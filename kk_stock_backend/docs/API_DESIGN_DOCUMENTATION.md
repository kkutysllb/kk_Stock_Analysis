# é«˜å¹¶å‘é‡åŒ–åˆ†æAPIæ¥å£è®¾è®¡æ–‡æ¡£

## ğŸš€ é¡¹ç›®æ¦‚è¿°

åŸºäºå½“å‰é¡¹ç›®çš„39ä¸ªæ•°æ®é›†åˆï¼Œè®¾è®¡äº†ä¸€å¥—æ”¯æŒé«˜å¹¶å‘çš„å®Œæ•´APIæ¥å£ç³»ç»Ÿï¼Œæ¶µç›–è‚¡ç¥¨ã€æŒ‡æ•°ã€æœŸè´§ã€ETFç­‰å…¨æ–¹ä½æ•°æ®æŸ¥è¯¢å’Œåˆ†æåŠŸèƒ½ã€‚

### ğŸ—ï¸ é«˜å¹¶å‘æ¶æ„ç‰¹æ€§

- **å¼‚æ­¥å¤„ç†**: åŸºäºFastAPI + Motorå®ç°å…¨å¼‚æ­¥æ•°æ®åº“æ“ä½œ
- **Redisç¼“å­˜**: å¤šå±‚ç¼“å­˜ç­–ç•¥ï¼Œæ”¯æŒç¼“å­˜é¢„çƒ­å’Œæ™ºèƒ½å¤±æ•ˆ
- **æ™ºèƒ½é™æµ**: ä»¤ç‰Œæ¡¶+æ»‘åŠ¨çª—å£ç®—æ³•ï¼Œæ”¯æŒç”¨æˆ·åˆ†çº§é™æµ
- **è¿æ¥æ± ä¼˜åŒ–**: MongoDBè¿æ¥æ± ä¼˜åŒ–ï¼Œæ”¯æŒäº‘ç«¯+æœ¬åœ°åŒæ•°æ®åº“
- **å¹¶è¡ŒæŸ¥è¯¢**: æ”¯æŒæ‰¹é‡å¹¶è¡ŒæŸ¥è¯¢ï¼Œæå‡å“åº”é€Ÿåº¦
- **æ€§èƒ½ç›‘æ§**: å®æ—¶æ€§èƒ½æŒ‡æ ‡ç›‘æ§å’Œæ…¢æŸ¥è¯¢æ£€æµ‹

### ğŸ“Š æ•°æ®è¦†ç›–èŒƒå›´

| æ•°æ®ç±»åˆ« | é›†åˆæ•°é‡ | ä¸»è¦å†…å®¹ |
|---------|---------|----------|
| ğŸ—ï¸ åŸºç¡€è®¾æ–½æ•°æ® | 10ä¸ª | äº¤æ˜“æ—¥å†ã€è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ã€å…¬å¸ä¿¡æ¯ã€ETF/æœŸè´§åŸºç¡€ä¿¡æ¯ |
| ğŸ“… äº¤æ˜“æ—¥å†æ•°æ® | 2ä¸ª | è‚¡ç¥¨/æœŸè´§äº¤æ˜“æ—¥å†ã€èŠ‚å‡æ—¥ä¿¡æ¯ |
| ğŸ“ˆ è¡Œæƒ…æ•°æ® | 9ä¸ª | è‚¡ç¥¨/æŒ‡æ•°/ETFæ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿Kçº¿æ•°æ® |
| ğŸ’° è´¢åŠ¡æ•°æ® | 7ä¸ª | ä¸‰å¤§æŠ¥è¡¨ã€è´¢åŠ¡æŒ‡æ ‡ã€ä¸šç»©é¢„å‘Šã€è´¢åŠ¡å®¡è®¡ |
| ğŸ’¸ èµ„é‡‘æµå‘æ•°æ® | 4ä¸ª | ä¸ªè‚¡ã€è¡Œä¸šã€å¤§ç›˜èµ„é‡‘æµå‘ |
| ğŸ¦ èèµ„èåˆ¸æ•°æ® | 2ä¸ª | èèµ„èåˆ¸æ±‡æ€»å’Œæ˜ç»† |
| ğŸ‰ é¾™è™æ¦œæ•°æ® | 2ä¸ª | é¾™è™æ¦œç»Ÿè®¡å’Œæœºæ„äº¤æ˜“ |
| ğŸ“Š å…¶ä»–æ•°æ® | 5ä¸ª | SHIBORåˆ©ç‡ã€æœŸè´§æ•°æ®ç­‰ |

## ğŸ“‹ APIæ¥å£æ€»è§ˆ

å½“å‰ç³»ç»Ÿå…±åŒ…å« **27ä¸ªè·¯ç”±æ¨¡å—**ï¼Œæä¾› **200+ä¸ªAPIæ¥å£**ï¼Œè¦†ç›–ä»¥ä¸‹åŠŸèƒ½æ¨¡å—ï¼š

| æ¨¡å— | è·¯ç”±å‰ç¼€ | æ¥å£æ•°é‡ | ä¸»è¦åŠŸèƒ½ |
|------|----------|----------|----------|
| ç”¨æˆ·ç®¡ç† | `/user` | 25+ | ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†ã€è‚¡ç¥¨æ± ç®¡ç† |
| å¸‚åœºæ•°æ® | `/market` | 15+ | å®æ—¶è¡Œæƒ…ã€å¸‚åœºæ¦‚è§ˆã€æŒ‡æ•°è¯¦æƒ… |
| è‚¡ç¥¨æ•°æ® | `/stock` | 30+ | è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ã€Kçº¿æ•°æ®ã€æŠ€æœ¯æŒ‡æ ‡ |
| æŒ‡æ•°æ•°æ® | `/index` | 20+ | æŒ‡æ•°åŸºæœ¬ä¿¡æ¯ã€æˆåˆ†è‚¡ã€è¡Œä¸šåˆ†ç±» |
| è´¢åŠ¡æ•°æ® | `/financial` | 25+ | è´¢åŠ¡æŠ¥è¡¨ã€è´¢åŠ¡æŒ‡æ ‡ã€ä¸šç»©é¢„å‘Š |
| æœŸè´§æ•°æ® | `/futures` | 15+ | æœŸè´§åŸºæœ¬ä¿¡æ¯ã€æ—¥çº¿æ•°æ®ã€æŒä»“åˆ†æ |
| ETFæ•°æ® | `/etf` | 10+ | ETFåŸºæœ¬ä¿¡æ¯ã€å‡€å€¼æ•°æ®ã€æˆåˆ†è‚¡ |
| æœŸæƒæ•°æ® | `/options` | 8+ | æœŸæƒåŸºæœ¬ä¿¡æ¯ã€æ—¥çº¿æ•°æ®ã€å¸Œè…Šå­—æ¯ |
| äº¤æ˜“æ—¥å† | `/calendar` | 10+ | äº¤æ˜“æ—¥æŸ¥è¯¢ã€èŠ‚å‡æ—¥ä¿¡æ¯ã€ç»Ÿè®¡åˆ†æ |
| èµ„é‡‘æµå‘ | `/money_flow` | 12+ | ä¸ªè‚¡ã€è¡Œä¸šã€å¤§ç›˜èµ„é‡‘æµå‘åˆ†æ |
| èèµ„èåˆ¸ | `/margin` | 8+ | èèµ„èåˆ¸ä½™é¢ã€æ˜ç»†æ•°æ® |
| é¾™è™æ¦œ | `/dragon-tiger` | 6+ | é¾™è™æ¦œç»Ÿè®¡ã€æœºæ„å¸­ä½åˆ†æ |
| æ¶¨è·Œåœæ•°æ® | `/limit_data` | 5+ | æ¶¨è·Œåœç»Ÿè®¡ã€è¿æ¿åˆ†æ |
| å®è§‚æ•°æ® | `/macro` | 5+ | SHIBORåˆ©ç‡ã€å®è§‚ç»æµæŒ‡æ ‡ |
| æ•°æ®åˆ†æ | `/analytics` | 15+ | æŠ€æœ¯åˆ†æã€é‡ä»·å…³ç³»ã€è¶‹åŠ¿åˆ†æ |
| å¸‚åœºæƒ…ç»ª | `/sentiment` | 10+ | å¸‚åœºæƒ…ç»ªæŒ‡æ ‡ã€ææ…ŒæŒ‡æ•° |
| æŠ•èµ„ç­–ç•¥ | `/strategy` | 20+ | é‡åŒ–ç­–ç•¥ã€å›æµ‹åˆ†æã€é€‰è‚¡ç­›é€‰ |
| é“æ°ç†è®ºåˆ†æ | `/dow-theory` | 5+ | é“æ°ç†è®ºæŠ€æœ¯åˆ†æ |
| ç¼ è®ºåˆ†æ | `/chan-theory` | 5+ | ç¼ è®ºæŠ€æœ¯åˆ†æ |
| ç³»ç»Ÿç®¡ç† | `/admin` | 15+ | ç³»ç»Ÿç›‘æ§ã€æ•°æ®åº“ç®¡ç†ã€ç¼“å­˜ç®¡ç† |
| ç³»ç»Ÿç›‘æ§ | `/system` | 8+ | å¥åº·æ£€æŸ¥ã€æ€§èƒ½æŒ‡æ ‡ã€çŠ¶æ€ç›‘æ§ |

## ğŸ”— APIæ¥å£æ¶æ„

### æ ¸å¿ƒè·¯ç”±æ¨¡å—

```
ğŸ“ api/
â”œâ”€â”€ ğŸ”§ core/                    # æ ¸å¿ƒåŸºç¡€è®¾æ–½
â”‚   â”œâ”€â”€ cache.py               # Redisç¼“å­˜ç®¡ç†å™¨
â”‚   â”œâ”€â”€ database.py            # é«˜å¹¶å‘æ•°æ®åº“ç®¡ç†å™¨
â”‚   â””â”€â”€ rate_limiter.py        # å¤šå±‚é™æµä¸­é—´ä»¶
â”œâ”€â”€ ğŸ›¤ï¸ routers/                 # APIè·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ user.py               # ç”¨æˆ·è®¤è¯å’Œç®¡ç†
â”‚   â”œâ”€â”€ stock_data.py         # è‚¡ç¥¨æ•°æ®æ¥å£
â”‚   â”œâ”€â”€ index_data.py         # æŒ‡æ•°æ•°æ®æ¥å£
â”‚   â”œâ”€â”€ financial_data.py     # è´¢åŠ¡æ•°æ®æ¥å£
â”‚   â”œâ”€â”€ trading_calendar.py   # äº¤æ˜“æ—¥å†æ¥å£
â”‚   â”œâ”€â”€ market_flow.py        # èµ„é‡‘æµå‘æ¥å£
â”‚   â”œâ”€â”€ margin_data.py        # èèµ„èåˆ¸æ¥å£
â”‚   â”œâ”€â”€ dragon_tiger.py       # é¾™è™æ¦œæ¥å£
â”‚   â”œâ”€â”€ analytics.py          # æ•°æ®åˆ†ææ¥å£
â”‚   â”œâ”€â”€ strategy.py           # æŠ•èµ„ç­–ç•¥æ¥å£
â”‚   â”œâ”€â”€ content.py            # æ™ºèƒ½å†…å®¹ç”Ÿæˆ
â”‚   â”œâ”€â”€ admin.py              # ç³»ç»Ÿç®¡ç†æ¥å£
â”‚   â””â”€â”€ system.py             # ç³»ç»Ÿç›‘æ§æ¥å£
â””â”€â”€ ğŸ“– main.py                  # APIä¸»å…¥å£
```

## ğŸ“‹ å®Œæ•´æ¥å£æ¸…å•

### 1. ç”¨æˆ·ç®¡ç†æ¨¡å— (`/user`)

#### 1.1 ç”¨æˆ·è®¤è¯æ¥å£

**POST `/user/register` - ç”¨æˆ·æ³¨å†Œ**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "username": "testuser",
  "password": "password123",
  "email": "test@example.com"
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "token_type": "bearer",
    "expires_in": 86400,
    "user_info": {
      "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
      "username": "testuser",
      "email": "test@example.com",
      "roles": ["user"],
      "created_at": "2024-12-01T10:00:00Z",
      "is_active": true
    }
  },
  "timestamp": "2024-12-01T10:00:00Z"
}
```

**POST `/user/login` - ç”¨æˆ·ç™»å½•**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "username": "testuser",
  "password": "password123"
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "token_type": "bearer",
    "expires_in": 86400,
    "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "user_info": {
      "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
      "username": "testuser",
      "email": "test@example.com",
      "roles": ["user"],
      "last_login": "2024-12-01T10:00:00Z",
      "is_active": true,
      "avatar_url": "https://example.com/avatar/default.png"
    }
  },
  "timestamp": "2024-12-01T10:00:00Z"
}
```

**POST `/user/login/wechat` - å¾®ä¿¡ç™»å½•**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "code": "wx_auth_code_123456",
  "state": "random_state_string"
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "å¾®ä¿¡ç™»å½•æˆåŠŸ",
  "data": {
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "token_type": "bearer",
    "expires_in": 86400,
    "user_info": {
      "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
      "username": "å¾®ä¿¡ç”¨æˆ·_abc123",
      "nickname": "å¼ ä¸‰",
      "avatar_url": "https://wx.qlogo.cn/mmopen/...",
      "openid": "oABC123DEF456GHI789JKL",
      "unionid": "uXYZ987WVU654TSR321QPN",
      "roles": ["user"],
      "is_active": true,
      "wechat_bound": true
    }
  },
  "timestamp": "2024-12-01T10:00:00Z"
}
```

**GET `/user/user-info` - è·å–ç”¨æˆ·ä¿¡æ¯**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "email": "test@example.com",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "avatar_url": "https://example.com/avatar/user123.png",
    "roles": ["user", "analyst"],
    "permissions": ["read:stock", "read:financial", "write:stock_pool"],
    "created_at": "2024-11-01T10:00:00Z",
    "last_login": "2024-12-01T10:00:00Z",
    "is_active": true,
    "subscription": {
      "plan": "premium",
      "expires_at": "2025-01-01T00:00:00Z",
      "features": ["unlimited_api", "advanced_analysis"]
    }
  },
  "timestamp": "2024-12-01T10:00:00Z"
}
```

**GET `/user/info` - è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "email": "test@example.com",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "real_name": "å¼ ä¸‰",
    "phone": "13800138000",
    "avatar_url": "https://example.com/avatar/user123.png",
    "gender": "male",
    "birthday": "1990-01-01",
    "location": "åŒ—äº¬å¸‚æœé˜³åŒº",
    "bio": "é‡åŒ–æŠ•èµ„çˆ±å¥½è€…",
    "roles": ["user", "analyst"],
    "permissions": ["read:stock", "read:financial", "write:stock_pool"],
    "created_at": "2024-11-01T10:00:00Z",
    "updated_at": "2024-12-01T09:00:00Z",
    "last_login": "2024-12-01T10:00:00Z",
    "login_count": 156,
    "is_active": true,
    "is_verified": true,
    "subscription": {
      "plan": "premium",
      "expires_at": "2025-01-01T00:00:00Z",
      "features": ["unlimited_api", "advanced_analysis", "real_time_data"],
      "api_quota": {
        "daily_limit": 10000,
        "used_today": 1250,
        "remaining": 8750
      }
    },
    "preferences": {
      "language": "zh-CN",
      "timezone": "Asia/Shanghai",
      "theme": "dark",
      "notifications": {
        "email": true,
        "sms": false,
        "push": true
      }
    },
    "statistics": {
      "stock_pools_count": 5,
      "favorite_stocks_count": 23,
      "analysis_count": 89,
      "total_api_calls": 15678
    }
  },
  "timestamp": "2024-12-01T10:00:00Z"
}
```

#### 1.2 å¯†ç ç®¡ç†æ¥å£

**POST `/user/password/reset` - è¯·æ±‚å¯†ç é‡ç½®**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "email": "test@example.com"
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "é‡ç½®é‚®ä»¶å·²å‘é€",
  "data": {
    "email": "test@example.com",
    "reset_token_expires": "2024-12-01T11:00:00Z",
    "message": "è¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±ï¼Œé‡ç½®é“¾æ¥å°†åœ¨1å°æ—¶å†…æœ‰æ•ˆ"
  },
  "timestamp": "2024-12-01T10:00:00Z"
}
```

**POST `/user/password/reset/confirm` - ç¡®è®¤å¯†ç é‡ç½®**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "token": "reset_token_abc123def456",
  "new_password": "newpassword123"
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "å¯†ç é‡ç½®æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "reset_time": "2024-12-01T10:30:00Z",
    "message": "å¯†ç å·²æˆåŠŸé‡ç½®ï¼Œè¯·ä½¿ç”¨æ–°å¯†ç ç™»å½•"
  },
  "timestamp": "2024-12-01T10:30:00Z"
}
```

**POST `/user/password/change` - ä¿®æ”¹å¯†ç **

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "old_password": "oldpassword123",
  "new_password": "newpassword456"
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "å¯†ç ä¿®æ”¹æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "change_time": "2024-12-01T10:45:00Z",
    "message": "å¯†ç å·²æˆåŠŸä¿®æ”¹ï¼Œä¸‹æ¬¡ç™»å½•è¯·ä½¿ç”¨æ–°å¯†ç "
  },
  "timestamp": "2024-12-01T10:45:00Z"
}
```

#### 1.3 ç®¡ç†å‘˜æ¥å£

**POST `/user/admin/add_user` - ç®¡ç†å‘˜æ·»åŠ ç”¨æˆ·**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "username": "newuser",
  "password": "password123",
  "email": "newuser@example.com",
  "roles": ["user", "analyst"],
  "nickname": "æ–°ç”¨æˆ·",
  "is_active": true
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "ç”¨æˆ·åˆ›å»ºæˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j2",
    "username": "newuser",
    "email": "newuser@example.com",
    "nickname": "æ–°ç”¨æˆ·",
    "roles": ["user", "analyst"],
    "created_at": "2024-12-01T11:00:00Z",
    "created_by": "admin",
    "is_active": true,
    "initial_password_sent": true
  },
  "timestamp": "2024-12-01T11:00:00Z"
}
```

**GET `/user/admin/users` - è·å–æ‰€æœ‰ç”¨æˆ·**

è¯·æ±‚å‚æ•°ï¼š`?page=1&size=20&status=active&role=user`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "items": [
      {
        "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
        "username": "testuser1",
        "email": "test1@example.com",
        "nickname": "æµ‹è¯•ç”¨æˆ·1",
        "avatar_url": "https://example.com/avatar/user1.png",
        "roles": ["user"],
        "is_active": true,
        "created_at": "2024-11-01T10:00:00Z",
        "last_login": "2024-12-01T09:30:00Z",
        "login_count": 156,
        "subscription": {
          "plan": "premium",
          "expires_at": "2025-01-01T00:00:00Z"
        }
      },
      {
        "user_id": "64f1a2b3c4d5e6f7g8h9i0j2",
        "username": "testuser2",
        "email": "test2@example.com",
        "nickname": "æµ‹è¯•ç”¨æˆ·2",
        "avatar_url": "https://example.com/avatar/user2.png",
        "roles": ["user", "analyst"],
        "is_active": true,
        "created_at": "2024-11-15T14:20:00Z",
        "last_login": "2024-12-01T08:45:00Z",
        "login_count": 89,
        "subscription": {
          "plan": "basic",
          "expires_at": "2024-12-31T23:59:59Z"
        }
      }
    ],
    "pagination": {
      "total": 1250,
      "page": 1,
      "size": 20,
      "pages": 63,
      "has_next": true,
      "has_prev": false
    }
  },
  "timestamp": "2024-12-01T11:00:00Z"
}
```

**GET `/user/admin/users/{user_id}` - è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "email": "test@example.com",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "real_name": "å¼ ä¸‰",
    "phone": "13800138000",
    "avatar_url": "https://example.com/avatar/user123.png",
    "roles": ["user", "analyst"],
    "permissions": ["read:stock", "read:financial", "write:stock_pool"],
    "is_active": true,
    "is_verified": true,
    "created_at": "2024-11-01T10:00:00Z",
    "updated_at": "2024-12-01T09:00:00Z",
    "last_login": "2024-12-01T10:00:00Z",
    "login_count": 156,
    "subscription": {
      "plan": "premium",
      "expires_at": "2025-01-01T00:00:00Z",
      "api_quota": {
        "daily_limit": 10000,
        "used_today": 1250,
        "remaining": 8750
      }
    },
    "activity_stats": {
      "total_api_calls": 15678,
      "stock_pools_count": 5,
      "favorite_stocks_count": 23,
      "analysis_count": 89
    }
  },
  "timestamp": "2024-12-01T11:00:00Z"
}
```

**PUT `/user/admin/users/{user_id}/status` - æ›´æ–°ç”¨æˆ·çŠ¶æ€**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "status": "inactive",
  "reason": "è¿è§„æ“ä½œ"
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "ç”¨æˆ·çŠ¶æ€æ›´æ–°æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "old_status": "active",
    "new_status": "inactive",
    "reason": "è¿è§„æ“ä½œ",
    "updated_by": "admin",
    "updated_at": "2024-12-01T11:15:00Z"
  },
  "timestamp": "2024-12-01T11:15:00Z"
}
```

**PUT `/user/admin/users/{user_id}/roles` - æ›´æ–°ç”¨æˆ·è§’è‰²**

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "roles": ["user", "analyst", "premium"]
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "ç”¨æˆ·è§’è‰²æ›´æ–°æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "old_roles": ["user"],
    "new_roles": ["user", "analyst", "premium"],
    "updated_by": "admin",
    "updated_at": "2024-12-01T11:20:00Z",
    "effective_permissions": [
      "read:stock",
      "read:financial", 
      "write:stock_pool",
      "read:advanced_analysis",
      "write:analysis"
    ]
  },
  "timestamp": "2024-12-01T11:20:00Z"
}
```

**DELETE `/user/admin/users/{user_id}` - åˆ é™¤ç”¨æˆ·**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "ç”¨æˆ·åˆ é™¤æˆåŠŸ",
  "data": {
    "user_id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "username": "testuser",
    "deleted_by": "admin",
    "deleted_at": "2024-12-01T11:25:00Z",
    "backup_created": true,
    "data_retention_days": 30
  },
  "timestamp": "2024-12-01T11:25:00Z"
}
```

#### 1.4 ç”¨æˆ·è‚¡ç¥¨æ± æ¥å£

**GET `/user/stock-pools` - è·å–ç”¨æˆ·è‚¡ç¥¨æ± åˆ—è¡¨**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "items": [
      {
        "pool_id": "64f1a2b3c4d5e6f7g8h9i0k1",
        "name": "æˆ‘çš„è‡ªé€‰è‚¡",
        "description": "æ—¥å¸¸å…³æ³¨çš„ä¼˜è´¨è‚¡ç¥¨",
        "stock_count": 15,
        "created_at": "2024-11-01T10:00:00Z",
        "updated_at": "2024-12-01T09:30:00Z",
        "is_default": true,
        "is_public": false,
        "tags": ["è‡ªé€‰", "é•¿æœŸæŒæœ‰"],
        "performance": {
          "total_return": 12.5,
          "daily_change": 2.3,
          "best_performer": "000001.SZ",
          "worst_performer": "000002.SZ"
        }
      },
      {
        "pool_id": "64f1a2b3c4d5e6f7g8h9i0k2",
        "name": "ç§‘æŠ€è‚¡æ± ",
        "description": "ç§‘æŠ€è¡Œä¸šç›¸å…³è‚¡ç¥¨",
        "stock_count": 8,
        "created_at": "2024-11-15T14:20:00Z",
        "updated_at": "2024-11-30T16:45:00Z",
        "is_default": false,
        "is_public": true,
        "tags": ["ç§‘æŠ€", "æˆé•¿"],
        "performance": {
          "total_return": -3.2,
          "daily_change": -1.1,
          "best_performer": "300750.SZ",
          "worst_performer": "300001.SZ"
        }
      }
    ],
    "total": 5,
    "summary": {
      "total_pools": 5,
      "total_stocks": 45,
      "avg_pool_size": 9,
      "public_pools": 2,
      "private_pools": 3
    }
  },
  "timestamp": "2024-12-01T11:30:00Z"
}
```

**POST `/user/stock-pools` - åˆ›å»ºè‚¡ç¥¨æ± **

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "name": "æ–°è‚¡ç¥¨æ± ",
  "description": "è¿™æ˜¯ä¸€ä¸ªæ–°çš„è‚¡ç¥¨æ± ",
  "stocks": ["000001.SZ", "000002.SZ", "300750.SZ"],
  "is_public": false,
  "tags": ["æ–°å»º", "æµ‹è¯•"]
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è‚¡ç¥¨æ± åˆ›å»ºæˆåŠŸ",
  "data": {
    "pool_id": "64f1a2b3c4d5e6f7g8h9i0k3",
    "name": "æ–°è‚¡ç¥¨æ± ",
    "description": "è¿™æ˜¯ä¸€ä¸ªæ–°çš„è‚¡ç¥¨æ± ",
    "stock_count": 3,
    "stocks": [
      {
        "ts_code": "000001.SZ",
        "name": "å¹³å®‰é“¶è¡Œ",
        "added_at": "2024-12-01T11:35:00Z"
      },
      {
        "ts_code": "000002.SZ", 
        "name": "ä¸‡ç§‘A",
        "added_at": "2024-12-01T11:35:00Z"
      },
      {
        "ts_code": "300750.SZ",
        "name": "å®å¾·æ—¶ä»£",
        "added_at": "2024-12-01T11:35:00Z"
      }
    ],
    "created_at": "2024-12-01T11:35:00Z",
    "is_default": false,
    "is_public": false,
    "tags": ["æ–°å»º", "æµ‹è¯•"]
  },
  "timestamp": "2024-12-01T11:35:00Z"
}
```

**GET `/user/stock-pools/{pool_id}` - è·å–è‚¡ç¥¨æ± è¯¦æƒ…**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "pool_id": "64f1a2b3c4d5e6f7g8h9i0k1",
    "name": "æˆ‘çš„è‡ªé€‰è‚¡",
    "description": "æ—¥å¸¸å…³æ³¨çš„ä¼˜è´¨è‚¡ç¥¨",
    "stock_count": 15,
    "created_at": "2024-11-01T10:00:00Z",
    "updated_at": "2024-12-01T09:30:00Z",
    "is_default": true,
    "is_public": false,
    "tags": ["è‡ªé€‰", "é•¿æœŸæŒæœ‰"],
    "stocks": [
      {
        "ts_code": "000001.SZ",
        "name": "å¹³å®‰é“¶è¡Œ",
        "industry": "é“¶è¡Œ",
        "market": "ä¸»æ¿",
        "added_at": "2024-11-01T10:00:00Z",
        "current_price": 10.56,
        "change_pct": 2.3,
        "volume": 1250000,
        "market_cap": 204567890000,
        "pe_ratio": 5.2,
        "pb_ratio": 0.8
      },
      {
        "ts_code": "000002.SZ",
        "name": "ä¸‡ç§‘A",
        "industry": "æˆ¿åœ°äº§",
        "market": "ä¸»æ¿",
        "added_at": "2024-11-05T14:20:00Z",
        "current_price": 8.95,
        "change_pct": -1.2,
        "volume": 980000,
        "market_cap": 98765432100,
        "pe_ratio": 8.9,
        "pb_ratio": 0.9
      }
    ],
    "performance": {
      "total_return": 12.5,
      "daily_change": 2.3,
      "weekly_change": 5.8,
      "monthly_change": 8.2,
      "best_performer": {
        "ts_code": "000001.SZ",
        "name": "å¹³å®‰é“¶è¡Œ",
        "return": 15.6
      },
      "worst_performer": {
        "ts_code": "000002.SZ",
        "name": "ä¸‡ç§‘A",
        "return": -2.1
      }
    },
    "statistics": {
      "avg_pe": 7.2,
      "avg_pb": 1.1,
      "total_market_cap": 1567890123456,
      "sector_distribution": {
        "é“¶è¡Œ": 3,
        "æˆ¿åœ°äº§": 2,
        "ç§‘æŠ€": 5,
        "åˆ¶é€ ä¸š": 3,
        "å…¶ä»–": 2
      }
    }
  },
  "timestamp": "2024-12-01T11:40:00Z"
}
```

**PUT `/user/stock-pools/{pool_id}` - æ›´æ–°è‚¡ç¥¨æ± **

è¯·æ±‚å‚æ•°ï¼š
```json
{
  "name": "æ›´æ–°åçš„è‚¡ç¥¨æ± åç§°",
  "description": "æ›´æ–°åçš„æè¿°",
  "tags": ["æ›´æ–°", "ä¼˜åŒ–"],
  "is_public": true
}
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è‚¡ç¥¨æ± æ›´æ–°æˆåŠŸ",
  "data": {
    "pool_id": "64f1a2b3c4d5e6f7g8h9i0k1",
    "name": "æ›´æ–°åçš„è‚¡ç¥¨æ± åç§°",
    "description": "æ›´æ–°åçš„æè¿°",
    "stock_count": 15,
    "updated_at": "2024-12-01T11:45:00Z",
    "is_public": true,
    "tags": ["æ›´æ–°", "ä¼˜åŒ–"],
    "changes": {
      "name": {
        "old": "æˆ‘çš„è‡ªé€‰è‚¡",
        "new": "æ›´æ–°åçš„è‚¡ç¥¨æ± åç§°"
      },
      "description": {
        "old": "æ—¥å¸¸å…³æ³¨çš„ä¼˜è´¨è‚¡ç¥¨",
        "new": "æ›´æ–°åçš„æè¿°"
      },
      "is_public": {
        "old": false,
        "new": true
      }
    }
  },
  "timestamp": "2024-12-01T11:45:00Z"
}
```

**DELETE `/user/stock-pools/{pool_id}` - åˆ é™¤è‚¡ç¥¨æ± **

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è‚¡ç¥¨æ± åˆ é™¤æˆåŠŸ",
  "data": {
    "pool_id": "64f1a2b3c4d5e6f7g8h9i0k1",
    "name": "æˆ‘çš„è‡ªé€‰è‚¡",
    "deleted_at": "2024-12-01T11:50:00Z",
    "stock_count": 15,
    "backup_created": true,
    "recovery_deadline": "2024-12-31T23:59:59Z"
  },
  "timestamp": "2024-12-01T11:50:00Z"
}
```

### 2. å¸‚åœºæ•°æ®æ¨¡å— (`/market`)

**GET `/market/quote` - è·å–å®æ—¶è¡Œæƒ…**

è¯·æ±‚å‚æ•°ï¼š`?symbols=000001.SZ,000002.SZ&fields=ts_code,name,close,change,pct_chg,volume`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "quotes": [
      {
        "ts_code": "000001.SZ",
        "symbol": "000001",
        "name": "å¹³å®‰é“¶è¡Œ",
        "market": "æ·±äº¤æ‰€",
        "current_price": 10.56,
        "pre_close": 10.32,
        "open": 10.35,
        "high": 10.68,
        "low": 10.28,
        "close": 10.56,
        "change": 0.24,
        "pct_chg": 2.33,
        "volume": 125000000,
        "amount": 1320000000.0,
        "turnover_rate": 0.61,
        "pe_ratio": 5.23,
        "pb_ratio": 0.82,
        "market_cap": 204567890000,
        "circ_mv": 198765432100,
        "timestamp": "2024-12-01T15:00:00Z",
        "status": "trading"
      },
      {
        "ts_code": "000002.SZ",
        "symbol": "000002", 
        "name": "ä¸‡ç§‘A",
        "market": "æ·±äº¤æ‰€",
        "current_price": 8.95,
        "pre_close": 9.06,
        "open": 9.02,
        "high": 9.08,
        "low": 8.89,
        "close": 8.95,
        "change": -0.11,
        "pct_chg": -1.21,
        "volume": 98000000,
        "amount": 876543210.0,
        "turnover_rate": 0.89,
        "pe_ratio": 8.92,
        "pb_ratio": 0.95,
        "market_cap": 98765432100,
        "circ_mv": 95432109876,
        "timestamp": "2024-12-01T15:00:00Z",
        "status": "trading"
      }
    ],
    "update_time": "2024-12-01T15:00:00Z",
    "market_status": "open"
  },
  "timestamp": "2024-12-01T15:00:00Z"
}
```

**GET `/market/overview` - å¸‚åœºæ¦‚è§ˆ**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "market_summary": {
      "trade_date": "20241201",
      "total_stocks": 5234,
      "trading_stocks": 5198,
      "suspended_stocks": 36,
      "up_stocks": 2856,
      "down_stocks": 1987,
      "flat_stocks": 355,
      "limit_up": 89,
      "limit_down": 12,
      "new_high": 156,
      "new_low": 78
    },
    "indices": {
      "sh_composite": {
        "ts_code": "000001.SH",
        "name": "ä¸Šè¯æŒ‡æ•°",
        "close": 3245.67,
        "change": 28.45,
        "pct_chg": 0.88,
        "volume": 2567890123,
        "amount": 345678901234.0
      },
      "sz_component": {
        "ts_code": "399001.SZ",
        "name": "æ·±è¯æˆæŒ‡",
        "close": 10567.89,
        "change": -45.23,
        "pct_chg": -0.43,
        "volume": 1876543210,
        "amount": 234567890123.0
      },
      "cyb_composite": {
        "ts_code": "399006.SZ",
        "name": "åˆ›ä¸šæ¿æŒ‡",
        "close": 2134.56,
        "change": 12.34,
        "pct_chg": 0.58,
        "volume": 987654321,
        "amount": 123456789012.0
      }
    },
    "sectors": {
      "top_gainers": [
        {
          "sector": "æ–°èƒ½æºæ±½è½¦",
          "pct_chg": 3.45,
          "stocks_count": 156,
          "up_count": 128,
          "down_count": 28
        },
        {
          "sector": "äººå·¥æ™ºèƒ½",
          "pct_chg": 2.89,
          "stocks_count": 89,
          "up_count": 67,
          "down_count": 22
        }
      ],
      "top_losers": [
        {
          "sector": "æˆ¿åœ°äº§",
          "pct_chg": -2.34,
          "stocks_count": 234,
          "up_count": 45,
          "down_count": 189
        },
        {
          "sector": "ä¼ ç»Ÿèƒ½æº",
          "pct_chg": -1.78,
          "stocks_count": 123,
          "up_count": 34,
          "down_count": 89
        }
      ]
    },
    "money_flow": {
      "total_amount": 567890123456.0,
      "net_inflow": 12345678901.0,
      "main_inflow": 8765432109.0,
      "retail_inflow": 3580246792.0,
      "north_money": {
        "net_inflow": 2345678901.0,
        "sh_inflow": 1234567890.0,
        "sz_inflow": 1111111011.0
      }
    },
    "market_sentiment": {
      "fear_greed_index": 65,
      "sentiment": "è´ªå©ª",
      "vix": 18.45,
      "put_call_ratio": 0.78
    },
    "update_time": "2024-12-01T15:00:00Z"
  },
  "timestamp": "2024-12-01T15:00:00Z"
}
```

**GET `/market/indices` - ä¸»è¦æŒ‡æ•°**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "major_indices": [
      {
        "ts_code": "000001.SH",
        "name": "ä¸Šè¯æŒ‡æ•°",
        "close": 3245.67,
        "pre_close": 3217.22,
        "open": 3220.15,
        "high": 3256.89,
        "low": 3215.34,
        "change": 28.45,
        "pct_chg": 0.88,
        "volume": 2567890123,
        "amount": 345678901234.0,
        "pe": 13.45,
        "pb": 1.23,
        "dividend_yield": 2.34
      },
      {
        "ts_code": "399001.SZ",
        "name": "æ·±è¯æˆæŒ‡",
        "close": 10567.89,
        "pre_close": 10613.12,
        "open": 10598.45,
        "high": 10625.67,
        "low": 10542.33,
        "change": -45.23,
        "pct_chg": -0.43,
        "volume": 1876543210,
        "amount": 234567890123.0,
        "pe": 18.67,
        "pb": 1.89,
        "dividend_yield": 1.78
      },
      {
        "ts_code": "399006.SZ",
        "name": "åˆ›ä¸šæ¿æŒ‡",
        "close": 2134.56,
        "pre_close": 2122.22,
        "open": 2125.67,
        "high": 2145.89,
        "low": 2118.45,
        "change": 12.34,
        "pct_chg": 0.58,
        "volume": 987654321,
        "amount": 123456789012.0,
        "pe": 35.67,
        "pb": 3.45,
        "dividend_yield": 0.89
      }
    ],
    "sector_indices": [
      {
        "ts_code": "000300.SH",
        "name": "æ²ªæ·±300",
        "close": 3876.54,
        "change": 15.67,
        "pct_chg": 0.41,
        "volume": 1567890123,
        "amount": 198765432109.0
      },
      {
        "ts_code": "000905.SH",
        "name": "ä¸­è¯500",
        "close": 5432.10,
        "change": -8.90,
        "pct_chg": -0.16,
        "volume": 876543210,
        "amount": 98765432101.0
      }
    ],
    "update_time": "2024-12-01T15:00:00Z"
  },
  "timestamp": "2024-12-01T15:00:00Z"
}
```

**GET `/market/sectors` - è¡Œä¸šæ¿å—æ•°æ®**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "sectors": [
      {
        "sector_code": "BK0001",
        "sector_name": "é“¶è¡Œ",
        "stock_count": 42,
        "avg_price": 6.78,
        "total_market_cap": 1234567890123.0,
        "change": 0.45,
        "pct_chg": 1.23,
        "volume": 567890123,
        "amount": 38765432109.0,
        "up_count": 28,
        "down_count": 14,
        "flat_count": 0,
        "leading_stocks": [
          {
            "ts_code": "000001.SZ",
            "name": "å¹³å®‰é“¶è¡Œ",
            "pct_chg": 2.33
          },
          {
            "ts_code": "600036.SH",
            "name": "æ‹›å•†é“¶è¡Œ",
            "pct_chg": 1.89
          }
        ]
      },
      {
        "sector_code": "BK0002",
        "sector_name": "æˆ¿åœ°äº§",
        "stock_count": 156,
        "avg_price": 8.95,
        "total_market_cap": 987654321098.0,
        "change": -0.23,
        "pct_chg": -2.34,
        "volume": 234567890,
        "amount": 20987654321.0,
        "up_count": 23,
        "down_count": 133,
        "flat_count": 0,
        "leading_stocks": [
          {
            "ts_code": "000002.SZ",
            "name": "ä¸‡ç§‘A",
            "pct_chg": -1.21
          },
          {
            "ts_code": "000001.SZ",
            "name": "ä¿åˆ©å‘å±•",
            "pct_chg": -2.45
          }
        ]
      },
      {
        "sector_code": "BK0003",
        "sector_name": "æ–°èƒ½æºæ±½è½¦",
        "stock_count": 89,
        "avg_price": 45.67,
        "total_market_cap": 2345678901234.0,
        "change": 1.56,
        "pct_chg": 3.45,
        "volume": 345678901,
        "amount": 15789012345.0,
        "up_count": 67,
        "down_count": 22,
        "flat_count": 0,
        "leading_stocks": [
          {
            "ts_code": "300750.SZ",
            "name": "å®å¾·æ—¶ä»£",
            "pct_chg": 4.56
          },
          {
            "ts_code": "002594.SZ",
            "name": "æ¯”äºšè¿ª",
            "pct_chg": 3.78
          }
        ]
      }
    ],
    "summary": {
      "total_sectors": 28,
      "up_sectors": 16,
      "down_sectors": 12,
      "strongest_sector": {
        "name": "æ–°èƒ½æºæ±½è½¦",
        "pct_chg": 3.45
      },
      "weakest_sector": {
        "name": "æˆ¿åœ°äº§",
        "pct_chg": -2.34
      }
    },
    "update_time": "2024-12-01T15:00:00Z"
  },
  "timestamp": "2024-12-01T15:00:00Z"
}
```

### 3. è‚¡ç¥¨æ•°æ®æ¨¡å— (`/stock`)

#### 3.1 åŸºç¡€æ•°æ®æ¥å£

**GET `/stock/basic/search` - è‚¡ç¥¨æœç´¢**

è¯·æ±‚å‚æ•°ï¼š`?keyword=å¹³å®‰&limit=10`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "æœç´¢æˆåŠŸ",
  "data": {
    "results": [
      {
        "ts_code": "000001.SZ",
        "symbol": "000001",
        "name": "å¹³å®‰é“¶è¡Œ",
        "area": "æ·±åœ³",
        "industry": "é“¶è¡Œ",
        "market": "ä¸»æ¿",
        "list_date": "19910403",
        "is_hs": "H",
        "current_price": 10.56,
        "market_cap": 204567890000,
        "pe_ratio": 5.23,
        "pb_ratio": 0.82,
        "match_type": "name"
      },
      {
        "ts_code": "601318.SH",
        "symbol": "601318",
        "name": "ä¸­å›½å¹³å®‰",
        "area": "æ·±åœ³",
        "industry": "ä¿é™©",
        "market": "ä¸»æ¿",
        "list_date": "20070301",
        "is_hs": "H",
        "current_price": 45.67,
        "market_cap": 834567890123,
        "pe_ratio": 8.92,
        "pb_ratio": 1.23,
        "match_type": "name"
      }
    ],
    "total": 2,
    "keyword": "å¹³å®‰",
    "search_time": "2024-12-01T15:30:00Z"
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/basic/info` - è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯**

è¯·æ±‚å‚æ•°ï¼š`?ts_code=000001.SZ`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "basic_info": {
      "ts_code": "000001.SZ",
      "symbol": "000001",
      "name": "å¹³å®‰é“¶è¡Œ",
      "fullname": "å¹³å®‰é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸",
      "enname": "Ping An Bank Co., Ltd.",
      "area": "æ·±åœ³",
      "industry": "é“¶è¡Œ",
      "market": "ä¸»æ¿",
      "exchange": "SZSE",
      "curr_type": "CNY",
      "list_status": "L",
      "list_date": "19910403",
      "delist_date": null,
      "is_hs": "H"
    },
    "company_info": {
      "chairman": "è°¢æ°¸æ—",
      "manager": "èƒ¡è·ƒé£",
      "secretary": "é™ˆè“‰",
      "reg_capital": 19405918198.0,
      "setup_date": "19871212",
      "province": "å¹¿ä¸œçœ",
      "city": "æ·±åœ³å¸‚",
      "introduction": "å¹³å®‰é“¶è¡Œè‚¡ä»½æœ‰é™å…¬å¸æ˜¯ä¸€å®¶æ€»éƒ¨è®¾åœ¨æ·±åœ³çš„å…¨å›½æ€§è‚¡ä»½åˆ¶å•†ä¸šé“¶è¡Œ...",
      "website": "http://bank.pingan.com",
      "email": "ir@pingan.com.cn",
      "office": "æ·±åœ³å¸‚ç½—æ¹–åŒºæ·±å—ä¸œè·¯5047å·",
      "employees": 58000,
      "main_business": "å¸æ”¶å…¬ä¼—å­˜æ¬¾ï¼›å‘æ”¾çŸ­æœŸã€ä¸­æœŸå’Œé•¿æœŸè´·æ¬¾...",
      "business_scope": "å¸æ”¶å…¬ä¼—å­˜æ¬¾ï¼›å‘æ”¾çŸ­æœŸã€ä¸­æœŸå’Œé•¿æœŸè´·æ¬¾..."
    },
    "current_status": {
      "current_price": 10.56,
      "pre_close": 10.32,
      "change": 0.24,
      "pct_chg": 2.33,
      "volume": 125000000,
      "amount": 1320000000.0,
      "market_cap": 204567890000,
      "circ_mv": 198765432100,
      "pe_ratio": 5.23,
      "pb_ratio": 0.82,
      "ps_ratio": 0.95,
      "pcf_ratio": 3.45,
      "turnover_rate": 0.61,
      "volume_ratio": 1.23,
      "52w_high": 12.89,
      "52w_low": 8.45,
      "avg_price_5d": 10.23,
      "avg_price_20d": 9.87,
      "avg_price_60d": 9.56
    },
    "update_time": "2024-12-01T15:30:00Z"
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/basic/stats` - è‚¡ç¥¨ç»Ÿè®¡ä¿¡æ¯**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "market_stats": {
      "total_stocks": 5234,
      "trading_stocks": 5198,
      "suspended_stocks": 36,
      "st_stocks": 89,
      "new_stocks": 12
    },
    "price_distribution": {
      "under_5": 456,
      "5_to_10": 1234,
      "10_to_20": 1567,
      "20_to_50": 1345,
      "50_to_100": 456,
      "over_100": 176
    },
    "market_cap_distribution": {
      "under_50b": 2345,
      "50b_to_100b": 1234,
      "100b_to_500b": 1123,
      "500b_to_1000b": 345,
      "over_1000b": 187
    },
    "pe_distribution": {
      "negative": 234,
      "0_to_20": 1567,
      "20_to_50": 2345,
      "50_to_100": 789,
      "over_100": 299
    },
    "industry_stats": [
      {
        "industry": "é“¶è¡Œ",
        "count": 42,
        "avg_pe": 5.67,
        "avg_pb": 0.89,
        "avg_market_cap": 234567890123
      },
      {
        "industry": "æˆ¿åœ°äº§",
        "count": 156,
        "avg_pe": 12.34,
        "avg_pb": 1.23,
        "avg_market_cap": 98765432109
      }
    ],
    "update_time": "2024-12-01T15:30:00Z"
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/share/float` - æµé€šè‚¡æœ¬ä¿¡æ¯**

è¯·æ±‚å‚æ•°ï¼š`?ts_code=000001.SZ&start_date=20240101&end_date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "items": [
      {
        "ts_code": "000001.SZ",
        "ann_date": "20241130",
        "end_date": "20241130",
        "total_share": 19405918198.0,
        "float_share": 19405918198.0,
        "free_share": 19405918198.0,
        "a_share_total": 19405918198.0,
        "b_share_total": 0.0,
        "h_share_total": 0.0,
        "limit_shares": 0.0,
        "share_type": "æ™®é€šè‚¡"
      },
      {
        "ts_code": "000001.SZ",
        "ann_date": "20240630",
        "end_date": "20240630",
        "total_share": 19405918198.0,
        "float_share": 19405918198.0,
        "free_share": 19405918198.0,
        "a_share_total": 19405918198.0,
        "b_share_total": 0.0,
        "h_share_total": 0.0,
        "limit_shares": 0.0,
        "share_type": "æ™®é€šè‚¡"
      }
    ],
    "summary": {
      "current_total_share": 19405918198.0,
      "current_float_share": 19405918198.0,
      "float_ratio": 100.0,
      "share_changes": 0,
      "last_change_date": null
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

#### 3.2 Kçº¿æ•°æ®æ¥å£

**GET `/stock/daily/{ts_code}` - æ—¥çº¿æ•°æ®**

è¯·æ±‚å‚æ•°ï¼š`/stock/daily/000001.SZ?start_date=20241101&end_date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SZ",
    "name": "å¹³å®‰é“¶è¡Œ",
    "period": "daily",
    "items": [
      {
        "trade_date": "20241201",
        "open": 10.35,
        "high": 10.68,
        "low": 10.28,
        "close": 10.56,
        "pre_close": 10.32,
        "change": 0.24,
        "pct_chg": 2.33,
        "vol": 125000000,
        "amount": 1320000000.0,
        "turnover_rate": 0.61,
        "volume_ratio": 1.23,
        "pe": 5.23,
        "pb": 0.82
      },
      {
        "trade_date": "20241130",
        "open": 10.28,
        "high": 10.45,
        "low": 10.15,
        "close": 10.32,
        "pre_close": 10.25,
        "change": 0.07,
        "pct_chg": 0.68,
        "vol": 98000000,
        "amount": 1010000000.0,
        "turnover_rate": 0.51,
        "volume_ratio": 0.89,
        "pe": 5.11,
        "pb": 0.81
      },
      {
        "trade_date": "20241129",
        "open": 10.20,
        "high": 10.35,
        "low": 10.12,
        "close": 10.25,
        "pre_close": 10.18,
        "change": 0.07,
        "pct_chg": 0.69,
        "vol": 87000000,
        "amount": 890000000.0,
        "turnover_rate": 0.45,
        "volume_ratio": 0.76,
        "pe": 5.08,
        "pb": 0.80
      }
    ],
    "statistics": {
      "total_records": 22,
      "period_return": 3.45,
      "max_price": 10.68,
      "min_price": 9.87,
      "avg_volume": 95000000,
      "avg_amount": 975000000.0,
      "volatility": 2.34
    },
    "technical_indicators": {
      "ma5": 10.23,
      "ma10": 10.12,
      "ma20": 9.98,
      "ma60": 9.76,
      "ema12": 10.34,
      "ema26": 10.15,
      "macd": 0.12,
      "rsi": 65.4,
      "kdj_k": 78.9,
      "kdj_d": 72.3,
      "kdj_j": 92.1
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/weekly/{ts_code}` - å‘¨çº¿æ•°æ®**

è¯·æ±‚å‚æ•°ï¼š`/stock/weekly/000001.SZ?start_date=20241001&end_date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SZ",
    "name": "å¹³å®‰é“¶è¡Œ",
    "period": "weekly",
    "items": [
      {
        "trade_date": "20241201",
        "open": 10.15,
        "high": 10.68,
        "low": 10.05,
        "close": 10.56,
        "pre_close": 10.12,
        "change": 0.44,
        "pct_chg": 4.35,
        "vol": 567000000,
        "amount": 5890000000.0,
        "turnover_rate": 2.92
      },
      {
        "trade_date": "20241124",
        "open": 9.98,
        "high": 10.25,
        "low": 9.87,
        "close": 10.12,
        "pre_close": 9.95,
        "change": 0.17,
        "pct_chg": 1.71,
        "vol": 456000000,
        "amount": 4620000000.0,
        "turnover_rate": 2.35
      }
    ],
    "statistics": {
      "total_records": 9,
      "period_return": 8.76,
      "max_price": 10.68,
      "min_price": 9.45,
      "avg_weekly_volume": 478000000,
      "avg_weekly_amount": 4850000000.0
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/monthly/{ts_code}` - æœˆçº¿æ•°æ®**

è¯·æ±‚å‚æ•°ï¼š`/stock/monthly/000001.SZ?start_date=20240101&end_date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SZ",
    "name": "å¹³å®‰é“¶è¡Œ",
    "period": "monthly",
    "items": [
      {
        "trade_date": "20241130",
        "open": 9.87,
        "high": 10.68,
        "low": 9.45,
        "close": 10.56,
        "pre_close": 9.78,
        "change": 0.78,
        "pct_chg": 7.98,
        "vol": 2340000000,
        "amount": 23890000000.0,
        "turnover_rate": 12.06
      },
      {
        "trade_date": "20241031",
        "open": 9.56,
        "high": 10.12,
        "low": 9.23,
        "close": 9.78,
        "pre_close": 9.45,
        "change": 0.33,
        "pct_chg": 3.49,
        "vol": 1890000000,
        "amount": 18450000000.0,
        "turnover_rate": 9.74
      }
    ],
    "statistics": {
      "total_records": 12,
      "ytd_return": 15.67,
      "max_monthly_high": 11.23,
      "min_monthly_low": 8.67,
      "avg_monthly_volume": 1950000000,
      "best_month": {
        "date": "20241130",
        "return": 7.98
      },
      "worst_month": {
        "date": "20240229",
        "return": -5.67
      }
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/intraday/{ts_code}` - åˆ†é’Ÿçº§æ•°æ®**

è¯·æ±‚å‚æ•°ï¼š`/stock/intraday/000001.SZ?freq=5min&start_time=2024-12-01T09:30:00&end_time=2024-12-01T15:00:00`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SZ",
    "name": "å¹³å®‰é“¶è¡Œ",
    "freq": "5min",
    "trade_date": "20241201",
    "items": [
      {
        "datetime": "2024-12-01T09:30:00",
        "open": 10.32,
        "high": 10.38,
        "low": 10.30,
        "close": 10.35,
        "volume": 2500000,
        "amount": 25875000.0,
        "vwap": 10.35
      },
      {
        "datetime": "2024-12-01T09:35:00",
        "open": 10.35,
        "high": 10.42,
        "low": 10.33,
        "close": 10.40,
        "volume": 1800000,
        "amount": 18720000.0,
        "vwap": 10.40
      },
      {
        "datetime": "2024-12-01T09:40:00",
        "open": 10.40,
        "high": 10.45,
        "low": 10.38,
        "close": 10.43,
        "volume": 1600000,
        "amount": 16688000.0,
        "vwap": 10.43
      }
    ],
    "summary": {
      "total_bars": 66,
      "session_open": 10.32,
      "session_high": 10.68,
      "session_low": 10.28,
      "session_close": 10.56,
      "total_volume": 125000000,
      "total_amount": 1320000000.0,
      "avg_price": 10.56,
      "price_change": 0.24,
      "pct_change": 2.33
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

#### 3.3 æŠ€æœ¯æŒ‡æ ‡æ¥å£

**GET `/stock/indicators/{ts_code}` - æŠ€æœ¯æŒ‡æ ‡**

è¯·æ±‚å‚æ•°ï¼š`/stock/indicators/000001.SZ?indicators=ma,macd,rsi,kdj&period=20`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SZ",
    "name": "å¹³å®‰é“¶è¡Œ",
    "calculation_date": "20241201",
    "indicators": {
      "moving_averages": {
        "ma5": 10.23,
        "ma10": 10.12,
        "ma20": 9.98,
        "ma60": 9.76,
        "ma120": 9.45,
        "ma250": 9.12,
        "ema12": 10.34,
        "ema26": 10.15,
        "ema50": 10.05
      },
      "macd": {
        "dif": 0.19,
        "dea": 0.07,
        "macd": 0.12,
        "signal": "é‡‘å‰",
        "trend": "ä¸Šæ¶¨"
      },
      "rsi": {
        "rsi6": 72.4,
        "rsi12": 65.8,
        "rsi24": 58.9,
        "signal": "è¶…ä¹°",
        "trend": "å¼ºåŠ¿"
      },
      "kdj": {
        "k": 78.9,
        "d": 72.3,
        "j": 92.1,
        "signal": "é‡‘å‰",
        "trend": "ä¸Šæ¶¨"
      },
      "bollinger_bands": {
        "upper": 10.89,
        "middle": 10.23,
        "lower": 9.57,
        "width": 1.32,
        "position": 0.75,
        "signal": "æ¥è¿‘ä¸Šè½¨"
      },
      "volume_indicators": {
        "obv": 1234567890,
        "volume_ma5": 95000000,
        "volume_ma10": 87000000,
        "volume_ratio": 1.23,
        "turnover_rate": 0.61
      },
      "momentum_indicators": {
        "momentum": 0.24,
        "roc": 2.33,
        "williams_r": -22.1,
        "cci": 156.7,
        "atr": 0.45
      }
    },
    "signals": {
      "overall_trend": "ä¸Šæ¶¨",
      "strength": "å¼ºåŠ¿",
      "support_level": 10.05,
      "resistance_level": 10.75,
      "buy_signals": ["MACDé‡‘å‰", "KDJé‡‘å‰"],
      "sell_signals": ["RSIè¶…ä¹°"],
      "recommendation": "è°¨æ…ä¹°å…¥"
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/money-flow/{ts_code}` - èµ„é‡‘æµå‘**

è¯·æ±‚å‚æ•°ï¼š`/stock/money-flow/000001.SZ?start_date=20241101&end_date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SZ",
    "name": "å¹³å®‰é“¶è¡Œ",
    "items": [
      {
        "trade_date": "20241201",
        "buy_sm_vol": 15000000,
        "buy_sm_amount": 158700000.0,
        "sell_sm_vol": 12000000,
        "sell_sm_amount": 127200000.0,
        "buy_md_vol": 25000000,
        "buy_md_amount": 264000000.0,
        "sell_md_vol": 22000000,
        "sell_md_amount": 232800000.0,
        "buy_lg_vol": 35000000,
        "buy_lg_amount": 369600000.0,
        "sell_lg_vol": 30000000,
        "sell_lg_amount": 317400000.0,
        "buy_elg_vol": 50000000,
        "buy_elg_amount": 528000000.0,
        "sell_elg_vol": 36000000,
        "sell_elg_amount": 380160000.0,
        "net_mf_vol": 25000000,
        "net_mf_amount": 263940000.0
      }
    ],
    "summary": {
      "period_days": 22,
      "total_net_inflow": 2567890123.0,
      "main_net_inflow": 1876543210.0,
      "retail_net_inflow": 691346913.0,
      "avg_daily_inflow": 116722278.32,
      "max_single_day_inflow": 456789012.0,
      "max_single_day_outflow": -234567890.0,
      "inflow_days": 15,
      "outflow_days": 7
    },
    "analysis": {
      "main_trend": "å‡€æµå…¥",
      "retail_trend": "å‡€æµå…¥",
      "strength": "å¼ºåŠ¿æµå…¥",
      "concentration": "ä¸»åŠ›é›†ä¸­",
      "recommendation": "èµ„é‡‘é¢æ”¯æ’‘è¾ƒå¼º"
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

**GET `/stock/factor/{ts_code}` - å› å­æ•°æ®**

è¯·æ±‚å‚æ•°ï¼š`/stock/factor/000001.SZ?factors=pe,pb,roe,roa&start_date=20241101&end_date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SZ",
    "name": "å¹³å®‰é“¶è¡Œ",
    "items": [
      {
        "trade_date": "20241201",
        "pe": 5.23,
        "pe_ttm": 5.18,
        "pb": 0.82,
        "ps": 0.95,
        "ps_ttm": 0.93,
        "dv_ratio": 4.56,
        "dv_ttm": 4.48,
        "total_share": 19405918198.0,
        "float_share": 19405918198.0,
        "free_share": 19405918198.0,
        "turnover_rate": 0.61,
        "turnover_rate_f": 0.61,
        "volume_ratio": 1.23,
        "pe_percentile": 15.6,
        "pb_percentile": 25.8,
        "ps_percentile": 35.2
      }
    ],
    "fundamental_factors": {
      "profitability": {
        "roe": 15.67,
        "roa": 0.89,
        "roic": 12.34,
        "gross_margin": 45.67,
        "net_margin": 25.89,
        "operating_margin": 32.45
      },
      "growth": {
        "revenue_growth": 8.9,
        "profit_growth": 12.3,
        "eps_growth": 11.8,
        "book_value_growth": 9.5,
        "operating_cash_flow_growth": 15.2
      },
      "leverage": {
        "debt_to_equity": 0.45,
        "debt_to_assets": 0.31,
        "interest_coverage": 8.9,
        "current_ratio": 1.25,
        "quick_ratio": 0.95
      },
      "efficiency": {
        "asset_turnover": 0.65,
        "inventory_turnover": null,
        "receivables_turnover": 8.5,
        "working_capital_turnover": 2.3
      }
    },
    "technical_factors": {
      "momentum": {
        "return_1m": 7.8,
        "return_3m": 15.6,
        "return_6m": 23.4,
        "return_12m": 45.7,
        "volatility_1m": 2.3,
        "volatility_3m": 2.8,
        "max_drawdown": -8.9
      },
      "liquidity": {
        "avg_turnover_rate": 0.58,
        "avg_volume": 95000000,
        "avg_amount": 975000000.0,
        "bid_ask_spread": 0.01,
        "market_impact": 0.05
      }
    },
    "ranking": {
      "industry_pe_rank": 5,
      "industry_pb_rank": 8,
      "industry_roe_rank": 3,
      "market_cap_rank": 15,
      "total_stocks_in_industry": 42
    }
  },
  "timestamp": "2024-12-01T15:30:00Z"
}
```

### 4. æŒ‡æ•°æ•°æ®æ¨¡å— (`/index`)

**GET `/index/basic/list` - æŒ‡æ•°åŸºæœ¬ä¿¡æ¯åˆ—è¡¨**

è¯·æ±‚å‚æ•°ï¼š`?market=SSE&category=ç»¼åˆæŒ‡æ•°&limit=20`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "items": [
      {
        "ts_code": "000001.SH",
        "symbol": "000001",
        "name": "ä¸Šè¯æŒ‡æ•°",
        "fullname": "ä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€ç»¼åˆè‚¡ä»·æŒ‡æ•°",
        "market": "SSE",
        "publisher": "ä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€",
        "index_type": "ç»¼åˆæŒ‡æ•°",
        "category": "è§„æ¨¡æŒ‡æ•°",
        "base_date": "19901219",
        "base_point": 100.0,
        "list_date": "19910715",
        "weight_rule": "æµé€šå¸‚å€¼åŠ æƒ",
        "desc": "åæ˜ ä¸Šæµ·è¯åˆ¸äº¤æ˜“æ‰€ä¸Šå¸‚è‚¡ç¥¨ä»·æ ¼çš„å˜åŠ¨æƒ…å†µ",
        "exp_date": null,
        "current_value": 3245.67,
        "change": 28.45,
        "pct_chg": 0.88,
        "pe": 13.45,
        "pb": 1.23,
        "dividend_yield": 2.34,
        "constituent_count": 1747
      },
      {
        "ts_code": "000300.SH",
        "symbol": "000300",
        "name": "æ²ªæ·±300",
        "fullname": "æ²ªæ·±300æŒ‡æ•°",
        "market": "MSCI",
        "publisher": "ä¸­è¯æŒ‡æ•°æœ‰é™å…¬å¸",
        "index_type": "è§„æ¨¡æŒ‡æ•°",
        "category": "å®½åŸºæŒ‡æ•°",
        "base_date": "20041231",
        "base_point": 1000.0,
        "list_date": "20050408",
        "weight_rule": "è‡ªç”±æµé€šå¸‚å€¼åŠ æƒ",
        "desc": "åæ˜ æ²ªæ·±ä¸¤å¸‚Aè‚¡å¸‚åœºæ•´ä½“è¡¨ç°çš„å®½åŸºæŒ‡æ•°",
        "exp_date": null,
        "current_value": 3876.54,
        "change": 15.67,
        "pct_chg": 0.41,
        "pe": 12.89,
        "pb": 1.45,
        "dividend_yield": 2.67,
        "constituent_count": 300
      },
      {
        "ts_code": "399001.SZ",
        "symbol": "399001",
        "name": "æ·±è¯æˆæŒ‡",
        "fullname": "æ·±è¯æˆä»½è‚¡æŒ‡æ•°",
        "market": "SZSE",
        "publisher": "æ·±åœ³è¯åˆ¸äº¤æ˜“æ‰€",
        "index_type": "æˆä»½æŒ‡æ•°",
        "category": "è§„æ¨¡æŒ‡æ•°",
        "base_date": "19940720",
        "base_point": 1000.0,
        "list_date": "19950123",
        "weight_rule": "æµé€šå¸‚å€¼åŠ æƒ",
        "desc": "åæ˜ æ·±åœ³è¯åˆ¸å¸‚åœºçš„èµ°åŠ¿æƒ…å†µ",
        "exp_date": null,
        "current_value": 10567.89,
        "change": -45.23,
        "pct_chg": -0.43,
        "pe": 18.67,
        "pb": 1.89,
        "dividend_yield": 1.78,
        "constituent_count": 500
      }
    ],
    "pagination": {
      "total": 156,
      "page": 1,
      "size": 20,
      "pages": 8,
      "has_next": true,
      "has_prev": false
    },
    "summary": {
      "total_indices": 156,
      "by_market": {
        "SSE": 89,
        "SZSE": 67
      },
      "by_category": {
        "ç»¼åˆæŒ‡æ•°": 12,
        "è§„æ¨¡æŒ‡æ•°": 45,
        "è¡Œä¸šæŒ‡æ•°": 78,
        "ä¸»é¢˜æŒ‡æ•°": 21
      }
    }
  },
  "timestamp": "2024-12-01T16:00:00Z"
}
```

**GET `/index/major` - ä¸»è¦æŒ‡æ•°æ•°æ®**

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "major_indices": [
      {
        "ts_code": "000001.SH",
        "name": "ä¸Šè¯æŒ‡æ•°",
        "current_value": 3245.67,
        "pre_close": 3217.22,
        "open": 3220.15,
        "high": 3256.89,
        "low": 3215.34,
        "change": 28.45,
        "pct_chg": 0.88,
        "volume": 2567890123,
        "amount": 345678901234.0,
        "turnover_rate": 0.45,
        "pe": 13.45,
        "pb": 1.23,
        "dividend_yield": 2.34,
        "52w_high": 3456.78,
        "52w_low": 2890.12,
        "ytd_return": 8.76,
        "market_cap": 45678901234567.0
      },
      {
        "ts_code": "399001.SZ",
        "name": "æ·±è¯æˆæŒ‡",
        "current_value": 10567.89,
        "pre_close": 10613.12,
        "open": 10598.45,
        "high": 10625.67,
        "low": 10542.33,
        "change": -45.23,
        "pct_chg": -0.43,
        "volume": 1876543210,
        "amount": 234567890123.0,
        "turnover_rate": 0.67,
        "pe": 18.67,
        "pb": 1.89,
        "dividend_yield": 1.78,
        "52w_high": 11234.56,
        "52w_low": 9876.54,
        "ytd_return": -2.34,
        "market_cap": 23456789012345.0
      },
      {
        "ts_code": "399006.SZ",
        "name": "åˆ›ä¸šæ¿æŒ‡",
        "current_value": 2134.56,
        "pre_close": 2122.22,
        "open": 2125.67,
        "high": 2145.89,
        "low": 2118.45,
        "change": 12.34,
        "pct_chg": 0.58,
        "volume": 987654321,
        "amount": 123456789012.0,
        "turnover_rate": 1.23,
        "pe": 35.67,
        "pb": 3.45,
        "dividend_yield": 0.89,
        "52w_high": 2456.78,
        "52w_low": 1876.54,
        "ytd_return": 15.67,
        "market_cap": 12345678901234.0
      },
      {
        "ts_code": "000300.SH",
        "name": "æ²ªæ·±300",
        "current_value": 3876.54,
        "pre_close": 3860.87,
        "open": 3865.23,
        "high": 3889.12,
        "low": 3858.45,
        "change": 15.67,
        "pct_chg": 0.41,
        "volume": 1567890123,
        "amount": 198765432109.0,
        "turnover_rate": 0.56,
        "pe": 12.89,
        "pb": 1.45,
        "dividend_yield": 2.67,
        "52w_high": 4123.45,
        "52w_low": 3456.78,
        "ytd_return": 5.43,
        "market_cap": 34567890123456.0
      },
      {
        "ts_code": "000905.SH",
        "name": "ä¸­è¯500",
        "current_value": 5432.10,
        "pre_close": 5441.00,
        "open": 5438.67,
        "high": 5445.23,
        "low": 5425.89,
        "change": -8.90,
        "pct_chg": -0.16,
        "volume": 876543210,
        "amount": 98765432101.0,
        "turnover_rate": 0.78,
        "pe": 22.34,
        "pb": 2.12,
        "dividend_yield": 1.89,
        "52w_high": 5876.54,
        "52w_low": 4987.65,
        "ytd_return": 3.21,
        "market_cap": 15678901234567.0
      }
    ],
    "market_summary": {
      "total_market_cap": 131728271604938.0,
      "avg_pe": 20.60,
      "avg_pb": 2.01,
      "avg_dividend_yield": 1.91,
      "up_indices": 3,
      "down_indices": 2,
      "strongest_index": {
        "name": "åˆ›ä¸šæ¿æŒ‡",
        "pct_chg": 0.58
      },
      "weakest_index": {
        "name": "æ·±è¯æˆæŒ‡",
        "pct_chg": -0.43
      }
    },
    "update_time": "2024-12-01T16:00:00Z"
  },
  "timestamp": "2024-12-01T16:00:00Z"
}
```

**GET `/index/shenwan` - ç”³ä¸‡è¡Œä¸šæŒ‡æ•°**

è¯·æ±‚å‚æ•°ï¼š`?level=1&date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "trade_date": "20241201",
    "level": 1,
    "industries": [
      {
        "index_code": "801010.SI",
        "index_name": "å†œæ—ç‰§æ¸”",
        "close": 2345.67,
        "pre_close": 2334.56,
        "open": 2338.90,
        "high": 2356.78,
        "low": 2332.45,
        "change": 11.11,
        "pct_chg": 0.48,
        "volume": 123456789,
        "amount": 2890123456.0,
        "turnover_rate": 0.67,
        "pe": 25.67,
        "pb": 2.34,
        "constituent_count": 45,
        "market_cap": 567890123456.0
      },
      {
        "index_code": "801020.SI",
        "index_name": "é‡‡æ˜",
        "close": 1876.54,
        "pre_close": 1889.12,
        "open": 1885.67,
        "high": 1892.34,
        "low": 1869.45,
        "change": -12.58,
        "pct_chg": -0.67,
        "volume": 98765432,
        "amount": 1850987654.0,
        "turnover_rate": 0.45,
        "pe": 18.90,
        "pb": 1.67,
        "constituent_count": 32,
        "market_cap": 345678901234.0
      },
      {
        "index_code": "801030.SI",
        "index_name": "åŒ–å·¥",
        "close": 3456.78,
        "pre_close": 3445.67,
        "open": 3450.23,
        "high": 3467.89,
        "low": 3442.34,
        "change": 11.11,
        "pct_chg": 0.32,
        "volume": 234567890,
        "amount": 8109876543.0,
        "turnover_rate": 0.78,
        "pe": 22.45,
        "pb": 1.89,
        "constituent_count": 89,
        "market_cap": 1234567890123.0
      },
      {
        "index_code": "801040.SI",
        "index_name": "é’¢é“",
        "close": 2109.87,
        "pre_close": 2123.45,
        "open": 2118.90,
        "high": 2125.67,
        "low": 2098.76,
        "change": -13.58,
        "pct_chg": -0.64,
        "volume": 156789012,
        "amount": 3309876543.0,
        "turnover_rate": 0.56,
        "pe": 15.67,
        "pb": 1.23,
        "constituent_count": 28,
        "market_cap": 456789012345.0
      },
      {
        "index_code": "801050.SI",
        "index_name": "æœ‰è‰²é‡‘å±",
        "close": 2987.65,
        "pre_close": 2976.54,
        "open": 2980.12,
        "high": 2995.67,
        "low": 2972.34,
        "change": 11.11,
        "pct_chg": 0.37,
        "volume": 187654321,
        "amount": 5609876543.0,
        "turnover_rate": 0.67,
        "pe": 28.90,
        "pb": 2.45,
        "constituent_count": 56,
        "market_cap": 789012345678.0
      }
    ],
    "summary": {
      "total_industries": 28,
      "up_count": 16,
      "down_count": 12,
      "flat_count": 0,
      "strongest_industry": {
        "name": "å†œæ—ç‰§æ¸”",
        "pct_chg": 0.48
      },
      "weakest_industry": {
        "name": "é‡‡æ˜",
        "pct_chg": -0.67
      },
      "avg_pct_chg": 0.12,
      "total_volume": 4567890123,
      "total_amount": 56789012345.0
    }
  },
  "timestamp": "2024-12-01T16:00:00Z"
}
```

**GET `/index/daily/{ts_code}` - æŒ‡æ•°æ—¥çº¿æ•°æ®**

è¯·æ±‚å‚æ•°ï¼š`/index/daily/000001.SH?start_date=20241101&end_date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "ts_code": "000001.SH",
    "name": "ä¸Šè¯æŒ‡æ•°",
    "period": "daily",
    "items": [
      {
        "trade_date": "20241201",
        "open": 3220.15,
        "high": 3256.89,
        "low": 3215.34,
        "close": 3245.67,
        "pre_close": 3217.22,
        "change": 28.45,
        "pct_chg": 0.88,
        "vol": 2567890123,
        "amount": 345678901234.0,
        "pe": 13.45,
        "pb": 1.23,
        "dividend_yield": 2.34,
        "turnover_rate": 0.45
      },
      {
        "trade_date": "20241130",
        "open": 3198.76,
        "high": 3225.43,
        "low": 3192.87,
        "close": 3217.22,
        "pre_close": 3205.67,
        "change": 11.55,
        "pct_chg": 0.36,
        "vol": 2234567890,
        "amount": 298765432109.0,
        "pe": 13.32,
        "pb": 1.21,
        "dividend_yield": 2.36,
        "turnover_rate": 0.39
      },
      {
        "trade_date": "20241129",
        "open": 3189.45,
        "high": 3212.34,
        "low": 3185.67,
        "close": 3205.67,
        "pre_close": 3195.43,
        "change": 10.24,
        "pct_chg": 0.32,
        "vol": 1987654321,
        "amount": 267890123456.0,
        "pe": 13.27,
        "pb": 1.20,
        "dividend_yield": 2.37,
        "turnover_rate": 0.35
      }
    ],
    "statistics": {
      "total_records": 22,
      "period_return": 2.45,
      "max_value": 3256.89,
      "min_value": 3145.67,
      "avg_volume": 2198765432,
      "avg_amount": 304567890123.0,
      "volatility": 1.23,
      "max_daily_gain": 1.45,
      "max_daily_loss": -1.67,
      "up_days": 14,
      "down_days": 8
    },
    "technical_indicators": {
      "ma5": 3234.56,
      "ma10": 3223.45,
      "ma20": 3198.76,
      "ma60": 3167.89,
      "ema12": 3241.23,
      "ema26": 3225.67,
      "macd": 5.67,
      "rsi": 58.9,
      "kdj_k": 65.4,
      "kdj_d": 62.1,
      "kdj_j": 72.0
    },
    "valuation_metrics": {
      "current_pe": 13.45,
      "pe_percentile": 45.6,
      "current_pb": 1.23,
      "pb_percentile": 35.8,
      "dividend_yield": 2.34,
      "yield_percentile": 65.2
    }
  },
  "timestamp": "2024-12-01T16:00:00Z"
}
```

**GET `/index/components/{ts_code}` - æŒ‡æ•°æˆåˆ†è‚¡**

è¯·æ±‚å‚æ•°ï¼š`/index/components/000300.SH?date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "index_code": "000300.SH",
    "index_name": "æ²ªæ·±300",
    "trade_date": "20241201",
    "total_constituents": 300,
    "constituents": [
      {
        "con_code": "000001.SZ",
        "con_name": "å¹³å®‰é“¶è¡Œ",
        "weight": 1.23,
        "in_date": "20050408",
        "out_date": null,
        "is_new": false,
        "industry": "é“¶è¡Œ",
        "market_cap": 204567890000,
        "free_mv": 198765432100,
        "current_price": 10.56,
        "pct_chg": 2.33,
        "contribution": 0.029
      },
      {
        "con_code": "000002.SZ",
        "con_name": "ä¸‡ç§‘A",
        "weight": 0.89,
        "in_date": "20050408",
        "out_date": null,
        "is_new": false,
        "industry": "æˆ¿åœ°äº§",
        "market_cap": 98765432100,
        "free_mv": 95432109876,
        "current_price": 8.95,
        "pct_chg": -1.21,
        "contribution": -0.011
      },
      {
        "con_code": "600036.SH",
        "con_name": "æ‹›å•†é“¶è¡Œ",
        "weight": 2.45,
        "in_date": "20050408",
        "out_date": null,
        "is_new": false,
        "industry": "é“¶è¡Œ",
        "market_cap": 567890123456,
        "free_mv": 543210987654,
        "current_price": 34.67,
        "pct_chg": 1.89,
        "contribution": 0.046
      },
      {
        "con_code": "300750.SZ",
        "con_name": "å®å¾·æ—¶ä»£",
        "weight": 3.67,
        "in_date": "20180619",
        "out_date": null,
        "is_new": false,
        "industry": "ç”µåŠ›è®¾å¤‡",
        "market_cap": 1234567890123,
        "free_mv": 1098765432109,
        "current_price": 189.45,
        "pct_chg": 4.56,
        "contribution": 0.167
      },
      {
        "con_code": "600519.SH",
        "con_name": "è´µå·èŒ…å°",
        "weight": 4.89,
        "in_date": "20050408",
        "out_date": null,
        "is_new": false,
        "industry": "é£Ÿå“é¥®æ–™",
        "market_cap": 2345678901234,
        "free_mv": 2109876543210,
        "current_price": 1876.54,
        "pct_chg": 0.78,
        "contribution": 0.038
      }
    ],
    "industry_distribution": {
      "é“¶è¡Œ": {
        "count": 12,
        "weight": 8.67,
        "avg_pct_chg": 1.45
      },
      "éé“¶é‡‘è": {
        "count": 15,
        "weight": 6.78,
        "avg_pct_chg": 0.89
      },
      "é£Ÿå“é¥®æ–™": {
        "count": 18,
        "weight": 9.34,
        "avg_pct_chg": 0.56
      },
      "ç”µåŠ›è®¾å¤‡": {
        "count": 22,
        "weight": 12.45,
        "avg_pct_chg": 2.34
      },
      "åŒ»è¯ç”Ÿç‰©": {
        "count": 28,
        "weight": 8.90,
        "avg_pct_chg": -0.67
      }
    },
    "weight_distribution": {
      "top_10_weight": 35.67,
      "top_50_weight": 68.90,
      "top_100_weight": 85.43,
      "concentration_ratio": 0.3567
    },
    "changes": {
      "new_additions": [],
      "deletions": [],
      "weight_changes": [
        {
          "con_code": "000001.SZ",
          "con_name": "å¹³å®‰é“¶è¡Œ",
          "old_weight": 1.18,
          "new_weight": 1.23,
          "change": 0.05
        }
      ]
    },
    "performance_attribution": {
      "index_return": 0.41,
      "top_contributors": [
        {
          "con_code": "300750.SZ",
          "con_name": "å®å¾·æ—¶ä»£",
          "contribution": 0.167
        },
        {
          "con_code": "600036.SH",
          "con_name": "æ‹›å•†é“¶è¡Œ",
          "contribution": 0.046
        }
      ],
      "top_detractors": [
        {
          "con_code": "000002.SZ",
          "con_name": "ä¸‡ç§‘A",
          "contribution": -0.011
        }
      ]
    }
  },
  "timestamp": "2024-12-01T16:00:00Z"
}
```

**GET `/index/weight/{ts_code}` - æŒ‡æ•°æƒé‡**

è¯·æ±‚å‚æ•°ï¼š`/index/weight/000300.SH?date=20241201`

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "index_code": "000300.SH",
    "index_name": "æ²ªæ·±300",
    "trade_date": "20241201",
    "weight_method": "è‡ªç”±æµé€šå¸‚å€¼åŠ æƒ",
    "total_constituents": 300,
    "weights": [
      {
        "con_code": "600519.SH",
        "con_name": "è´µå·èŒ…å°",
        "weight": 4.89,
        "rank": 1,
        "market_cap": 2345678901234,
        "free_mv": 2109876543210,
        "shares": 1256637768,
        "free_shares": 1125574091,
        "price": 1876.54,
        "industry": "é£Ÿå“é¥®æ–™"
      },
      {
        "con_code": "300750.SZ",
        "con_name": "å®å¾·æ—¶ä»£",
        "weight": 3.67,
        "rank": 2,
        "market_cap": 1234567890123,
        "free_mv": 1098765432109,
        "shares": 4653132950,
        "free_shares": 4141666635,
        "price": 189.45,
        "industry": "ç”µåŠ›è®¾å¤‡"
      },
      {
        "con_code": "600036.SH",
        "con_name": "æ‹›å•†é“¶è¡Œ",
        "weight": 2.45,
        "rank": 3,
        "market_cap": 567890123456,
        "free_mv": 543210987654,
        "shares": 25220645819,
        "free_shares": 24109876543,
        "price": 34.67,
        "industry": "é“¶è¡Œ"
      },
      {
        "con_code": "000858.SZ",
        "con_name": "äº”ç²®æ¶²",
        "weight": 2.12,
        "rank": 4,
        "market_cap": 456789012345,
        "free_mv": 432109876543,
        "shares": 3868776656,
        "free_shares": 3654321098,
        "price": 156.78,
        "industry": "é£Ÿå“é¥®æ–™"
      },
      {
        "con_code": "000001.SZ",
        "con_name": "å¹³å®‰é“¶è¡Œ",
        "weight": 1.23,
        "rank": 5,
        "market_cap": 204567890000,
        "free_mv": 198765432100,
        "shares": 19405918198,
        "free_mv_shares": 19405918198,
        "price": 10.56,
        "industry": "é“¶è¡Œ"
      }
    ],
    "weight_statistics": {
      "max_weight": 4.89,
      "min_weight": 0.03,
      "avg_weight": 0.33,
      "median_weight": 0.28,
      "std_weight": 0.67,
      "top_10_total_weight": 28.45,
      "top_50_total_weight": 65.78,
      "herfindahl_index": 0.0234
    },
    "industry_weights": {
      "é£Ÿå“é¥®æ–™": 9.34,
      "ç”µåŠ›è®¾å¤‡": 12.45,
      "é“¶è¡Œ": 8.67,
      "éé“¶é‡‘è": 6.78,
      "åŒ»è¯ç”Ÿç‰©": 8.90,
      "ç”µå­": 7.56,
      "è®¡ç®—æœº": 5.67,
      "åŒ–å·¥": 4.89,
      "æœºæ¢°è®¾å¤‡": 4.23,
      "æ±½è½¦": 6.78
    },
    "market_weights": {
      "ä¸Šæµ·": 58.67,
      "æ·±åœ³": 41.33,
      "ä¸»æ¿": 78.90,
      "åˆ›ä¸šæ¿": 12.34,
      "ç§‘åˆ›æ¿": 8.76
    },
    "weight_changes": {
      "last_adjustment_date": "20241130",
      "next_adjustment_date": "20241215",
      "changes_count": 5,
      "major_changes": [
        {
          "con_code": "000001.SZ",
          "con_name": "å¹³å®‰é“¶è¡Œ",
          "old_weight": 1.18,
          "new_weight": 1.23,
          "change": 0.05,
          "reason": "å¸‚å€¼å˜åŒ–"
        }
      ]
    }
  },
  "timestamp": "2024-12-01T16:00:00Z"
}
```

### 5. è´¢åŠ¡æ•°æ®æ¨¡å— (`/financial`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/financial/income/{ts_code}` | GET | åˆ©æ¶¦è¡¨æ•°æ® | `ts_code`, `period`, `start_date`, `end_date` | åˆ©æ¶¦è¡¨æ•°æ®æ•°ç»„ |
| `/financial/balance/{ts_code}` | GET | èµ„äº§è´Ÿå€ºè¡¨ | `ts_code`, `period`, `start_date`, `end_date` | èµ„äº§è´Ÿå€ºè¡¨æ•°æ®æ•°ç»„ |
| `/financial/cashflow/{ts_code}` | GET | ç°é‡‘æµé‡è¡¨ | `ts_code`, `period`, `start_date`, `end_date` | ç°é‡‘æµé‡è¡¨æ•°æ®æ•°ç»„ |
| `/financial/indicators/{ts_code}` | GET | è´¢åŠ¡æŒ‡æ ‡ | `ts_code`, `period`, `start_date`, `end_date` | è´¢åŠ¡æŒ‡æ ‡æ•°æ®æ•°ç»„ |
| `/financial/forecast/{ts_code}` | GET | ä¸šç»©é¢„å‘Š | `ts_code`, `period`, `start_date`, `end_date` | ä¸šç»©é¢„å‘Šæ•°æ®æ•°ç»„ |
| `/financial/express/{ts_code}` | GET | ä¸šç»©å¿«æŠ¥ | `ts_code`, `period`, `start_date`, `end_date` | ä¸šç»©å¿«æŠ¥æ•°æ®æ•°ç»„ |
| `/financial/audit/{ts_code}` | GET | è´¢åŠ¡å®¡è®¡æ„è§ | `ts_code`, `period`, `start_date`, `end_date` | å®¡è®¡æ„è§æ•°æ®æ•°ç»„ |

### 6. æœŸè´§æ•°æ®æ¨¡å— (`/futures`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/futures/basic/list` | GET | æœŸè´§åŸºæœ¬ä¿¡æ¯ | `exchange`, `fut_type` | æœŸè´§åŸºæœ¬ä¿¡æ¯æ•°ç»„ |
| `/futures/daily/{ts_code}` | GET | æœŸè´§æ—¥çº¿æ•°æ® | `ts_code`, `start_date`, `end_date` | æœŸè´§Kçº¿æ•°æ®æ•°ç»„ |
| `/futures/holding/{ts_code}` | GET | æœŸè´§æŒä»“æ•°æ® | `ts_code`, `start_date`, `end_date` | æŒä»“æ•°æ®æ•°ç»„ |
| `/futures/settlement/{ts_code}` | GET | æœŸè´§ç»“ç®—æ•°æ® | `ts_code`, `trade_date` | ç»“ç®—æ•°æ® |

### 7. ETFæ•°æ®æ¨¡å— (`/etf`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/etf/basic/list` | GET | ETFåŸºæœ¬ä¿¡æ¯ | `market`, `category` | ETFåŸºæœ¬ä¿¡æ¯æ•°ç»„ |
| `/etf/daily/{ts_code}` | GET | ETFæ—¥çº¿æ•°æ® | `ts_code`, `start_date`, `end_date` | ETFå‡€å€¼æ•°æ®æ•°ç»„ |
| `/etf/index-info/list` | GET | ETFæŒ‡æ•°ä¿¡æ¯ | `ts_code` | ETFè·Ÿè¸ªæŒ‡æ•°ä¿¡æ¯ |
| `/etf/components/{ts_code}` | GET | ETFæˆåˆ†è‚¡ | `ts_code`, `date` | ETFæˆåˆ†è‚¡åˆ—è¡¨ |
| `/etf/search` | GET | ETFæœç´¢ | `keyword`, `limit` | ETFæœç´¢ç»“æœ |

### 8. æœŸæƒæ•°æ®æ¨¡å— (`/options`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/options/basic/list` | GET | æœŸæƒåŸºæœ¬ä¿¡æ¯ | `exchange`, `opt_type` | æœŸæƒåŸºæœ¬ä¿¡æ¯æ•°ç»„ |
| `/options/daily/{ts_code}` | GET | æœŸæƒæ—¥çº¿æ•°æ® | `ts_code`, `start_date`, `end_date` | æœŸæƒä»·æ ¼æ•°æ®æ•°ç»„ |
| `/options/greeks/{ts_code}` | GET | æœŸæƒå¸Œè…Šå­—æ¯ | `ts_code`, `trade_date` | å¸Œè…Šå­—æ¯æ•°æ® |

### 9. äº¤æ˜“æ—¥å†æ¨¡å— (`/calendar`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/calendar/basic` | GET | åŸºç¡€äº¤æ˜“æ—¥å† | `exchange`, `start_date`, `end_date` | äº¤æ˜“æ—¥å†æ•°æ® |
| `/calendar/exchanges` | GET | æ”¯æŒçš„äº¤æ˜“æ‰€ | æ—  | äº¤æ˜“æ‰€åˆ—è¡¨ |
| `/calendar/is-trading-day` | GET | åˆ¤æ–­æ˜¯å¦äº¤æ˜“æ—¥ | `date`, `exchange` | `{"is_trading_day": true/false}` |
| `/calendar/trading-days` | GET | è·å–äº¤æ˜“æ—¥åˆ—è¡¨ | `start_date`, `end_date`, `exchange` | äº¤æ˜“æ—¥åˆ—è¡¨ |
| `/calendar/next-trading-day` | GET | ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥ | `date`, `exchange` | ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥ |
| `/calendar/prev-trading-day` | GET | ä¸Šä¸€ä¸ªäº¤æ˜“æ—¥ | `date`, `exchange` | ä¸Šä¸€ä¸ªäº¤æ˜“æ—¥ |
| `/calendar/statistics` | GET | äº¤æ˜“æ—¥ç»Ÿè®¡ | `year`, `exchange` | äº¤æ˜“æ—¥ç»Ÿè®¡æ•°æ® |
| `/calendar/monthly-summary` | GET | æœˆåº¦äº¤æ˜“æ—¥æ±‡æ€» | `year`, `month`, `exchange` | æœˆåº¦æ±‡æ€»æ•°æ® |

### 10. èµ„é‡‘æµå‘æ¨¡å— (`/money_flow`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/money_flow/stock/{ts_code}` | GET | ä¸ªè‚¡èµ„é‡‘æµå‘ | `ts_code`, `start_date`, `end_date` | ä¸ªè‚¡èµ„é‡‘æµå‘æ•°æ® |
| `/money_flow/industry` | GET | è¡Œä¸šèµ„é‡‘æµå‘ | `date`, `industry` | è¡Œä¸šèµ„é‡‘æµå‘æ•°æ® |
| `/money_flow/market` | GET | å¤§ç›˜èµ„é‡‘æµå‘ | `start_date`, `end_date` | å¤§ç›˜èµ„é‡‘æµå‘æ•°æ® |
| `/money_flow/ranking` | GET | èµ„é‡‘æµå‘æ’è¡Œ | `date`, `type` | èµ„é‡‘æµå‘æ’è¡Œæ¦œ |

### 11. èèµ„èåˆ¸æ¨¡å— (`/margin`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/margin/summary` | GET | èèµ„èåˆ¸æ±‡æ€» | `trade_date`, `exchange` | èèµ„èåˆ¸æ±‡æ€»æ•°æ® |
| `/margin/detail/{ts_code}` | GET | ä¸ªè‚¡èèµ„èåˆ¸æ˜ç»† | `ts_code`, `start_date`, `end_date` | èèµ„èåˆ¸æ˜ç»†æ•°æ® |
| `/margin/ranking` | GET | èèµ„èåˆ¸æ’è¡Œ | `date`, `type` | èèµ„èåˆ¸æ’è¡Œæ¦œ |
| `/margin/trend` | GET | èèµ„èåˆ¸è¶‹åŠ¿ | `start_date`, `end_date` | èèµ„èåˆ¸è¶‹åŠ¿æ•°æ® |

### 12. é¾™è™æ¦œæ¨¡å— (`/dragon-tiger`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/dragon-tiger/list` | GET | é¾™è™æ¦œåˆ—è¡¨ | `trade_date`, `ts_code` | é¾™è™æ¦œæ•°æ®åˆ—è¡¨ |
| `/dragon-tiger/detail/{ts_code}` | GET | ä¸ªè‚¡é¾™è™æ¦œè¯¦æƒ… | `ts_code`, `trade_date` | é¾™è™æ¦œè¯¦ç»†æ•°æ® |
| `/dragon-tiger/institutions` | GET | æœºæ„å¸­ä½ç»Ÿè®¡ | `start_date`, `end_date` | æœºæ„å¸­ä½æ•°æ® |
| `/dragon-tiger/ranking` | GET | é¾™è™æ¦œæ’è¡Œ | `date`, `type` | é¾™è™æ¦œæ’è¡Œæ¦œ |

### 13. æ¶¨è·Œåœæ•°æ®æ¨¡å— (`/limit_data`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/limit_data/daily/list` | GET | æ¶¨è·Œåœæ—¥æŠ¥ | `trade_date`, `limit_type` | æ¶¨è·Œåœè‚¡ç¥¨åˆ—è¡¨ |
| `/limit_data/statistics` | GET | æ¶¨è·Œåœç»Ÿè®¡ | `start_date`, `end_date` | æ¶¨è·Œåœç»Ÿè®¡æ•°æ® |
| `/limit_data/consecutive` | GET | è¿æ¿ç»Ÿè®¡ | `trade_date`, `min_days` | è¿æ¿è‚¡ç¥¨æ•°æ® |
| `/limit_data/analysis` | GET | æ¶¨è·Œåœåˆ†æ | `trade_date` | æ¶¨è·Œåœå¸‚åœºåˆ†æ |

### 14. å®è§‚æ•°æ®æ¨¡å— (`/macro`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/macro/shibor` | GET | SHIBORåˆ©ç‡ | `start_date`, `end_date` | SHIBORåˆ©ç‡æ•°æ® |
| `/macro/gdp` | GET | GDPæ•°æ® | `start_date`, `end_date` | GDPæ•°æ® |
| `/macro/cpi` | GET | CPIæ•°æ® | `start_date`, `end_date` | CPIæ•°æ® |
| `/macro/pmi` | GET | PMIæ•°æ® | `start_date`, `end_date` | PMIæ•°æ® |

### 15. æ•°æ®åˆ†ææ¨¡å— (`/analytics`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/analytics/technical/{ts_code}` | GET | æŠ€æœ¯åˆ†æ | `ts_code`, `indicators` | æŠ€æœ¯åˆ†æç»“æœ |
| `/analytics/correlation` | GET | ç›¸å…³æ€§åˆ†æ | `symbols`, `period` | ç›¸å…³æ€§çŸ©é˜µ |
| `/analytics/volatility/{ts_code}` | GET | æ³¢åŠ¨ç‡åˆ†æ | `ts_code`, `period` | æ³¢åŠ¨ç‡æ•°æ® |
| `/analytics/momentum/{ts_code}` | GET | åŠ¨é‡åˆ†æ | `ts_code`, `period` | åŠ¨é‡æŒ‡æ ‡ |
| `/analytics/volume-price/{ts_code}` | GET | é‡ä»·å…³ç³»åˆ†æ | `ts_code`, `period` | é‡ä»·å…³ç³»æ•°æ® |

### 16. å¸‚åœºæƒ…ç»ªæ¨¡å— (`/sentiment`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/sentiment/fear-greed` | GET | ææ…Œè´ªå©ªæŒ‡æ•° | `date` | ææ…Œè´ªå©ªæŒ‡æ•° |
| `/sentiment/market-mood` | GET | å¸‚åœºæƒ…ç»ª | `date` | å¸‚åœºæƒ…ç»ªæŒ‡æ ‡ |
| `/sentiment/vix` | GET | æ³¢åŠ¨ç‡æŒ‡æ•° | `start_date`, `end_date` | VIXæŒ‡æ•°æ•°æ® |
| `/sentiment/put-call-ratio` | GET | çœ‹è·Œçœ‹æ¶¨æ¯”ç‡ | `start_date`, `end_date` | çœ‹è·Œçœ‹æ¶¨æ¯”ç‡ |

### 17. æŠ•èµ„ç­–ç•¥æ¨¡å— (`/strategy`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/strategy/screening` | POST | ç­–ç•¥ç­›é€‰ | ç­›é€‰æ¡ä»¶å¯¹è±¡ | ç­›é€‰ç»“æœåˆ—è¡¨ |
| `/strategy/backtest` | POST | ç­–ç•¥å›æµ‹ | ç­–ç•¥é…ç½®å¯¹è±¡ | å›æµ‹ç»“æœ |
| `/strategy/optimization` | POST | ç­–ç•¥ä¼˜åŒ– | ä¼˜åŒ–å‚æ•°å¯¹è±¡ | ä¼˜åŒ–ç»“æœ |
| `/strategy/performance/{strategy_id}` | GET | ç­–ç•¥è¡¨ç° | `strategy_id`, `period` | ç­–ç•¥è¡¨ç°æ•°æ® |
| `/strategy/ranking` | GET | ç­–ç•¥æ’è¡Œ | `category`, `period` | ç­–ç•¥æ’è¡Œæ¦œ |

### 18. é“æ°ç†è®ºåˆ†ææ¨¡å— (`/dow-theory`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/dow-theory/analyze/{ts_code}` | POST | é“æ°ç†è®ºåˆ†æ | `ts_code`, åˆ†æå‚æ•° | é“æ°ç†è®ºåˆ†æç»“æœ |
| `/dow-theory/trend/{ts_code}` | GET | è¶‹åŠ¿åˆ†æ | `ts_code`, `period` | è¶‹åŠ¿åˆ†ææ•°æ® |
| `/dow-theory/confirmation` | GET | ç›¸äº’ç¡®è®¤åˆ†æ | `symbols`, `period` | ç¡®è®¤åˆ†æç»“æœ |

### 19. ç¼ è®ºåˆ†ææ¨¡å— (`/chan-theory`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/chan-theory/analyze` | POST | ç¼ è®ºåˆ†æ | `ts_code`, åˆ†æå‚æ•° | ç¼ è®ºåˆ†æç»“æœ |
| `/chan-theory/structure/{ts_code}` | GET | ç»“æ„åˆ†æ | `ts_code`, `period` | ç»“æ„åˆ†ææ•°æ® |
| `/chan-theory/signals/{ts_code}` | GET | ä¿¡å·è¯†åˆ« | `ts_code`, `period` | ä¿¡å·è¯†åˆ«ç»“æœ |

### 20. ç³»ç»Ÿç®¡ç†æ¨¡å— (`/admin`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/admin/system/info` | GET | ç³»ç»Ÿä¿¡æ¯ | éœ€è¦ç®¡ç†å‘˜æƒé™ | ç³»ç»Ÿä¿¡æ¯å¯¹è±¡ |
| `/admin/cache/clear` | POST | æ¸…é™¤ç¼“å­˜ | `cache_type` | æ¸…é™¤ç»“æœ |
| `/admin/database/collections` | GET | æ•°æ®åº“é›†åˆä¿¡æ¯ | æ—  | é›†åˆåˆ—è¡¨ |
| `/admin/database/stats` | GET | æ•°æ®åº“ç»Ÿè®¡ | æ—  | æ•°æ®åº“ç»Ÿè®¡ä¿¡æ¯ |
| `/admin/users` | GET | ç”¨æˆ·ç®¡ç† | `page`, `size` | ç”¨æˆ·åˆ—è¡¨ |

### 21. ç³»ç»Ÿç›‘æ§æ¨¡å— (`/system`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/system/health` | GET | å¥åº·æ£€æŸ¥ | æ—  | `{"status": "healthy"}` |
| `/system/metrics` | GET | ç³»ç»ŸæŒ‡æ ‡ | æ—  | ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡ |
| `/system/status` | GET | ç³»ç»ŸçŠ¶æ€ | æ—  | ç³»ç»ŸçŠ¶æ€ä¿¡æ¯ |

### 22. æ•°æ®åº“é…ç½®æ¨¡å— (`/admin`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/admin/database/config` | GET | è·å–æ•°æ®åº“é…ç½® | éœ€è¦ç®¡ç†å‘˜æƒé™ | æ•°æ®åº“é…ç½®ä¿¡æ¯ |
| `/admin/database/config` | POST | æ›´æ–°æ•°æ®åº“é…ç½® | é…ç½®å¯¹è±¡ | æ›´æ–°ç»“æœ |
| `/admin/database/test` | POST | æµ‹è¯•æ•°æ®åº“è¿æ¥ | è¿æ¥å‚æ•° | æµ‹è¯•ç»“æœ |
| `/admin/database/status` | GET | æ•°æ®åº“çŠ¶æ€ | æ—  | æ•°æ®åº“çŠ¶æ€ä¿¡æ¯ |
| `/admin/database/reload` | POST | é‡æ–°åŠ è½½é…ç½® | æ—  | é‡è½½ç»“æœ |

### 23. æ¦‚å¿µæ•°æ®æ¨¡å—

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/limit/list` | GET | æ¶¨åœæ¦‚å¿µç»Ÿè®¡ | `trade_date` | æ¶¨åœæ¦‚å¿µæ•°æ® |
| `/limit/search` | GET | æ¦‚å¿µæœç´¢ | `keyword`, `limit` | æ¦‚å¿µæœç´¢ç»“æœ |
| `/sw/daily` | POST | ç”³ä¸‡è¡Œä¸šæ—¥çº¿æ•°æ® | `trade_date`, `industry_codes` | ç”³ä¸‡è¡Œä¸šæ•°æ® |

### 24. HMè‡ªå®šä¹‰æ•°æ®æ¨¡å— (`/hm`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | å‚æ•°è¯´æ˜ | è¿”å›æ ¼å¼ |
|---------|------|----------|----------|----------|
| `/hm/detail/list` | GET | HMè¯¦æƒ…åˆ—è¡¨ | `start_date`, `end_date` | HMè¯¦æƒ…æ•°æ® |
| `/hm/list/all` | GET | HMåˆ—è¡¨æ±‡æ€» | `trade_date` | HMæ±‡æ€»æ•°æ® |
| `/hm/batch/query` | POST | æ‰¹é‡æŸ¥è¯¢HMæ•°æ® | æŸ¥è¯¢æ¡ä»¶æ•°ç»„ | æ‰¹é‡æŸ¥è¯¢ç»“æœ |
| `/hm/export/summary` | GET | HMæ•°æ®å¯¼å‡ºæ±‡æ€» | `format`, `date_range` | å¯¼å‡ºæ±‡æ€»ä¿¡æ¯ |

### 7. é¾™è™æ¦œæ¥å£ (`/dragon-tiger`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | æ•°æ®æ¥æº |
|---------|------|----------|----------|
| `/dragon-tiger/list` | GET | é¾™è™æ¦œæ¯æ—¥ç»Ÿè®¡ | top_list |
| `/dragon-tiger/institution` | GET | æœºæ„äº¤æ˜“ç»Ÿè®¡ | top_inst |
| `/dragon-tiger/summary` | GET | é¾™è™æ¦œæ±‡æ€»åˆ†æ | èšåˆè®¡ç®— |
| `/dragon-tiger/stock/{ts_code}` | GET | ä¸ªè‚¡é¾™è™æ¦œå†å² | å†å²æŸ¥è¯¢ |

### 8. æ•°æ®åˆ†ææ¥å£ (`/analytics`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | è®¡ç®—ç±»å‹ |
|---------|------|----------|----------|
| `/analytics/correlation` | GET | ç›¸å…³æ€§åˆ†æ | ç»Ÿè®¡è®¡ç®— |
| `/analytics/sector-analysis` | GET | æ¿å—åˆ†æ | èšåˆåˆ†æ |
| `/analytics/market-mood` | GET | å¸‚åœºæƒ…ç»ªåˆ†æ | ç»¼åˆæŒ‡æ ‡ |
| `/analytics/volume-price` | GET | é‡ä»·å…³ç³»åˆ†æ | æŠ€æœ¯åˆ†æ |
| `/analytics/technical-indicators` | GET | æŠ€æœ¯æŒ‡æ ‡è®¡ç®— | æŠ€æœ¯åˆ†æ |

### 9. æŠ•èµ„ç­–ç•¥æ¥å£ (`/strategy`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | ç­–ç•¥ç±»å‹ |
|---------|------|----------|----------|
| `/strategy/screening` | GET | è‚¡ç¥¨ç­›é€‰ç­–ç•¥ | å¤šå› å­ç­›é€‰ |
| `/strategy/momentum` | GET | åŠ¨é‡ç­–ç•¥åˆ†æ | æŠ€æœ¯ç­–ç•¥ |
| `/strategy/value` | GET | ä»·å€¼æŠ•èµ„ç­–ç•¥ | åŸºæœ¬é¢ç­–ç•¥ |
| `/strategy/pairs-trading` | GET | é…å¯¹äº¤æ˜“ç­–ç•¥ | ç»Ÿè®¡å¥—åˆ© |
| `/strategy/backtesting` | POST | ç­–ç•¥å›æµ‹ | å†å²å›æµ‹ |

### 10. äº¤æ˜“æ—¥å†æ¥å£ (`/calendar`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | ç¼“å­˜ç­–ç•¥ |
|---------|------|----------|----------|
| `/calendar/basic` | GET | è·å–äº¤æ˜“æ—¥å†åŸºç¡€ä¿¡æ¯ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/exchanges` | GET | è·å–æ”¯æŒçš„äº¤æ˜“æ‰€åˆ—è¡¨ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/is-trading-day` | GET | åˆ¤æ–­æŒ‡å®šæ—¥æœŸæ˜¯å¦ä¸ºäº¤æ˜“æ—¥ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/trading-days` | GET | è·å–æ—¥æœŸèŒƒå›´å†…çš„äº¤æ˜“æ—¥åˆ—è¡¨ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/next-trading-day` | GET | è·å–ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/prev-trading-day` | GET | è·å–å‰ä¸€ä¸ªäº¤æ˜“æ—¥ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/statistics` | GET | è·å–äº¤æ˜“æ—¥å†ç»Ÿè®¡ä¿¡æ¯ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/monthly-summary` | GET | è·å–æœˆåº¦äº¤æ˜“æ—¥ç»Ÿè®¡ | é•¿æœŸç¼“å­˜(24h) |
| `/calendar/batch-check` | POST | æ‰¹é‡æ£€æŸ¥äº¤æ˜“æ—¥ | é•¿æœŸç¼“å­˜(24h) |

### 11. ç³»ç»Ÿç®¡ç†æ¥å£ (`/admin` & `/system`)

| æ¥å£è·¯å¾„ | æ–¹æ³• | åŠŸèƒ½æè¿° | æƒé™è¦æ±‚ |
|---------|------|----------|----------|
| `/system/health` | GET | ç³»ç»Ÿå¥åº·æ£€æŸ¥ | æ—  |
| `/system/metrics` | GET | æ€§èƒ½æŒ‡æ ‡ | æ—  |
| `/admin/cache/clear` | POST | æ¸…ç†ç¼“å­˜ | ç®¡ç†å‘˜ |
| `/admin/database/stats` | GET | æ•°æ®åº“ç»Ÿè®¡ | ç®¡ç†å‘˜ |
| `/admin/users` | GET | ç”¨æˆ·ç®¡ç† | ç®¡ç†å‘˜ |

## âš¡ é«˜å¹¶å‘ä¼˜åŒ–ç­–ç•¥

### 1. ç¼“å­˜ç­–ç•¥

```python
# å¤šå±‚ç¼“å­˜é…ç½®
CACHE_STRATEGIES = {
    "åŸºç¡€æ•°æ®": {"ttl": 86400},    # 24å°æ—¶ - è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
    "è¡Œæƒ…æ•°æ®": {"ttl": 3600},     # 1å°æ—¶ - Kçº¿æ•°æ®
    "å®æ—¶æ•°æ®": {"ttl": 300},      # 5åˆ†é’Ÿ - æ’è¡Œæ¦œã€æ¦‚è§ˆ
    "ç”¨æˆ·æ•°æ®": {"ttl": 3600},     # 1å°æ—¶ - è‡ªé€‰è‚¡ç­‰
    "åˆ†æç»“æœ": {"ttl": 86400},    # 24å°æ—¶ - å¤æ‚åˆ†æç»“æœ
}
```

### 2. é™æµé…ç½®

```python
# ç”¨æˆ·åˆ†çº§é™æµ
RATE_LIMITS = {
    "å…è´¹ç”¨æˆ·":   {"rps": 5,   "rpm": 300,   "rph": 1800},
    "åŸºç¡€ç”¨æˆ·":   {"rps": 20,  "rpm": 1200,  "rph": 7200},
    "é«˜çº§ç”¨æˆ·":   {"rps": 50,  "rpm": 3000,  "rph": 18000},
    "ä¼ä¸šç”¨æˆ·":   {"rps": 200, "rpm": 12000, "rph": 72000},
}
```

### 3. æ•°æ®åº“ä¼˜åŒ–

```python
# è¿æ¥æ± é…ç½®
DB_CONFIG = {
    "maxPoolSize": 100,        # æœ€å¤§è¿æ¥æ•°
    "minPoolSize": 10,         # æœ€å°è¿æ¥æ•°
    "maxIdleTimeMS": 60000,    # è¿æ¥ç©ºé—²æ—¶é—´
    "readPreference": "primaryPreferred",  # è¯»å†™åˆ†ç¦»
}
```

### 4. æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–

```python
# å¹¶è¡ŒæŸ¥è¯¢ç¤ºä¾‹
async def batch_stock_data(ts_codes: List[str]):
    queries = [
        {"collection": "stock_kline_daily", "filter": {"ts_code": code}}
        for code in ts_codes
    ]
    results = await db_manager.bulk_find_parallel(queries)
    return results
```

## ğŸ”’ å®‰å…¨å’Œè®¤è¯

### 1. JWTè®¤è¯
- ç”¨æˆ·ç™»å½•åè¿”å›JWT Token
- Tokenæœ‰æ•ˆæœŸ24å°æ—¶
- æ”¯æŒè§’è‰²åŸºè®¿é—®æ§åˆ¶

### 2. APIå¯†é’¥è®¤è¯
- ä¼ä¸šç”¨æˆ·å¯ç”³è¯·APIå¯†é’¥
- æ”¯æŒæŒ‰å¯†é’¥è¿›è¡Œé™æµå’Œè®¡è´¹

### 3. IPç™½åå•
- æ”¯æŒIPç™½åå•æœºåˆ¶
- å¯æŒ‰IPè¿›è¡Œè®¿é—®æ§åˆ¶

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### 1. ç›®æ ‡æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ç±»å‹ | ç›®æ ‡å€¼ | è¯´æ˜ |
|---------|-------|------|
| å“åº”æ—¶é—´ | < 100ms | 95%çš„è¯·æ±‚ |
| å¹¶å‘æ•° | 1000+ | åŒæ—¶åœ¨çº¿ç”¨æˆ· |
| ååé‡ | 10000+ QPS | å³°å€¼å¤„ç†èƒ½åŠ› |
| ç¼“å­˜å‘½ä¸­ç‡ | > 80% | çƒ­ç‚¹æ•°æ®ç¼“å­˜ |
| æ•°æ®åº“è¿æ¥ | < 2s | è¿æ¥å»ºç«‹æ—¶é—´ |

### 2. ç›‘æ§å’Œå‘Šè­¦

```python
# æ€§èƒ½ç›‘æ§æŒ‡æ ‡
METRICS = {
    "api_requests_total": "APIè¯·æ±‚æ€»æ•°",
    "api_request_duration": "APIè¯·æ±‚è€—æ—¶",
    "cache_hit_ratio": "ç¼“å­˜å‘½ä¸­ç‡", 
    "db_query_duration": "æ•°æ®åº“æŸ¥è¯¢è€—æ—¶",
    "rate_limit_exceeded": "é™æµè§¦å‘æ¬¡æ•°",
}
```

## ğŸš€ éƒ¨ç½²å’Œæ‰©å±•

### 1. å®¹å™¨åŒ–éƒ¨ç½²
```dockerfile
# æ”¯æŒDockerå®¹å™¨åŒ–éƒ¨ç½²
FROM python:3.11-slim
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "9000"]
```

### 2. è´Ÿè½½å‡è¡¡
- æ”¯æŒNginxè´Ÿè½½å‡è¡¡
- æ”¯æŒå¤šå®ä¾‹æ°´å¹³æ‰©å±•
- æ”¯æŒRedis Clusteré›†ç¾¤

### 3. ç›‘æ§é›†æˆ
- é›†æˆPrometheusç›‘æ§
- æ”¯æŒGrafanaå¯è§†åŒ–
- æ”¯æŒå‘Šè­¦é€šçŸ¥

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### 1. è·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯
```bash
curl -X GET "http://api.domain.com/stock/basic?market=ä¸»æ¿&limit=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 2. æ‰¹é‡è·å–Kçº¿æ•°æ®
```bash
curl -X GET "http://api.domain.com/stock/batch-kline?ts_codes=000001.SZ,000002.SZ&period=daily" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 3. è·å–å¸‚åœºæ¦‚è§ˆ
```bash
curl -X GET "http://api.domain.com/stock/overview" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 4. è‚¡ç¥¨æŠ€æœ¯åˆ†æ
```bash
curl -X GET "http://api.domain.com/stock/analysis/000001.SZ?days=30" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 5. äº¤æ˜“æ—¥å†æŸ¥è¯¢
```bash
# åˆ¤æ–­æ˜¯å¦ä¸ºäº¤æ˜“æ—¥
curl -X GET "http://api.domain.com/calendar/is-trading-day?date=20250627&exchange=SSE" \
  -H "Authorization: Bearer YOUR_TOKEN"

# è·å–äº¤æ˜“æ—¥åˆ—è¡¨
curl -X GET "http://api.domain.com/calendar/trading-days?start_date=20250601&end_date=20250630&exchange=SSE" \
  -H "Authorization: Bearer YOUR_TOKEN"

# è·å–ä¸‹ä¸€ä¸ªäº¤æ˜“æ—¥
curl -X GET "http://api.domain.com/calendar/next-trading-day?date=20250627&exchange=SSE&days=1" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### 1. ç‰ˆæœ¬ç®¡ç†
- é‡‡ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- æ”¯æŒAPIç‰ˆæœ¬å…¼å®¹
- æä¾›å‡çº§è¿ç§»æŒ‡å—

### 2. æ•°æ®æ›´æ–°
- æ”¯æŒå¢é‡æ•°æ®æ›´æ–°
- è‡ªåŠ¨ç¼“å­˜å¤±æ•ˆæœºåˆ¶
- æ•°æ®ä¸€è‡´æ€§ä¿è¯

### 3. æ€§èƒ½ä¼˜åŒ–
- å®šæœŸæ€§èƒ½åˆ†æ
- æ…¢æŸ¥è¯¢ä¼˜åŒ–
- ç¼“å­˜ç­–ç•¥è°ƒä¼˜

---

**ğŸ¯ æ€»ç»“**: æœ¬APIç³»ç»ŸåŸºäºå½“å‰é¡¹ç›®çš„ä¸°å¯Œæ•°æ®èµ„æºï¼Œè®¾è®¡äº†ä¸€å¥—å®Œæ•´çš„é«˜å¹¶å‘æ¥å£æ–¹æ¡ˆï¼Œæ¶µç›–äº†ä»åŸºç¡€æ•°æ®æŸ¥è¯¢åˆ°å¤æ‚åˆ†æè®¡ç®—çš„å…¨æ–¹ä½éœ€æ±‚ï¼Œé€šè¿‡å¤šå±‚ç¼“å­˜ã€æ™ºèƒ½é™æµã€å¼‚æ­¥å¤„ç†ç­‰æŠ€æœ¯æ‰‹æ®µï¼Œç¡®ä¿ç³»ç»Ÿåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šæ€§å’Œé«˜æ€§èƒ½è¡¨ç°ã€‚