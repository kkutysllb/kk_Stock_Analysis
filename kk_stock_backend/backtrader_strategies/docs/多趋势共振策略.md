# å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥

## ç­–ç•¥æ¦‚è¿°

å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥æ˜¯ä¸€ä¸ªåŸºäºå¤šæ—¶é—´å‘¨æœŸæŠ€æœ¯åˆ†æçš„é‡åŒ–ç­–ç•¥ï¼Œä¸“æ³¨äºæ•æ‰ä¸åŒæ—¶é—´ç»´åº¦è¶‹åŠ¿çš„å…±æŒ¯ä¿¡å·ã€‚è¯¥ç­–ç•¥é€šè¿‡åˆ†ææ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿çš„æŠ€æœ¯æŒ‡æ ‡ï¼Œè¯†åˆ«å¤šé‡è¶‹åŠ¿æ–¹å‘ä¸€è‡´çš„è‚¡ç¥¨ï¼Œå®ç°é«˜èƒœç‡çš„æŠ•èµ„æ”¶ç›Šã€‚

## ç­–ç•¥ç‰¹è‰²

### ğŸ¯ æ ¸å¿ƒç†å¿µ
- **å¤šç»´å…±æŒ¯**ï¼šç»“åˆæ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿å¤šæ—¶é—´å‘¨æœŸåˆ†æ
- **æŠ€æœ¯é©±åŠ¨**ï¼šåŸºäºMACDã€KDJã€æˆäº¤é‡ç­‰å¤šé‡æŠ€æœ¯æŒ‡æ ‡
- **è¶‹åŠ¿è·Ÿè¸ª**ï¼šæ•æ‰å¼ºåŠ¿è¶‹åŠ¿çš„å»¶ç»­æ€§æœºä¼š
- **é£é™©æ§åˆ¶**ï¼šä¸¥æ ¼çš„æ­¢æŸæ­¢ç›ˆå’Œå…±æŒ¯ä¿¡å·ç®¡ç†

### ğŸ“Š å®é™…å›æµ‹è¡¨ç°ï¼ˆ2020-01-01 è‡³ 2025-07-18ï¼‰
- **æ€»æ”¶ç›Šç‡**ï¼š1275.79%
- **å¹´åŒ–æ”¶ç›Šç‡**ï¼š63.54%
- **æœ€å¤§å›æ’¤**ï¼š-2.27%
- **å¤æ™®æ¯”ç‡**ï¼š2.60
- **ç´¢æè¯ºæ¯”ç‡**ï¼š16.97
- **å¡ç›æ¯”ç‡**ï¼š28.05
- **èƒœç‡**ï¼š61.76%
- **æ€»äº¤æ˜“æ¬¡æ•°**ï¼š230æ¬¡
- **å¹³å‡æŒä»“å‘¨æœŸ**ï¼š30å¤©
- **é€‰è‚¡æ¥æº**ï¼šä¸­è¯A500æˆåˆ†è‚¡ï¼ˆ50åªï¼‰
- **æœ€å¤§æŒä»“**ï¼š8åªè‚¡ç¥¨
- **é£é™©ç­‰çº§**ï¼šä¸­ç­‰é£é™©ï¼Œè¿½æ±‚ç¨³å¥æ”¶ç›Š

### ğŸ’° äº¤æ˜“æˆæœ¬åˆ†æ
- **æ€»æ‰‹ç»­è´¹**ï¼š42,835å…ƒ
- **æ€»å°èŠ±ç¨**ï¼š77,006å…ƒ
- **æ€»äº¤æ˜“æˆæœ¬**ï¼š119,841å…ƒ
- **æˆæœ¬å æ¯”**ï¼š0.87%ï¼ˆç›¸å¯¹æ€»æ”¶ç›Šï¼‰

## ç­–ç•¥é€»è¾‘

### ğŸ” è‚¡ç¥¨æ± æ„å»ºä¸ç­›é€‰æœºåˆ¶

#### 1. åŸºç¡€è‚¡ç¥¨æ± ï¼šä¸­è¯A500æˆåˆ†è‚¡
```python
def get_candidate_stocks(self) -> List[str]:
    """è·å–å€™é€‰è‚¡ç¥¨æ±  - ä¸­è¯A500æˆåˆ†è‚¡"""
    try:
        candidate_stocks = []
        
        # ä»å½“å‰æ•°æ®æºä¸­ç­›é€‰åˆæ ¼è‚¡ç¥¨
        for data in self.datas:
            stock_code = getattr(data, '_name', '')
            if stock_code and self.is_stock_qualified(stock_code):
                candidate_stocks.append(stock_code)
        
        return candidate_stocks[:50]  # é™åˆ¶å€™é€‰æ•°é‡ä¸º50åª
        
    except Exception as e:
        self.log(f"è·å–å€™é€‰è‚¡ç¥¨å¤±è´¥: {e}")
        return []
```

#### 2. è‚¡ç¥¨è´¨é‡è¿‡æ»¤æ ‡å‡†
```python
def is_stock_qualified(self, stock_code: str) -> bool:
    """åŸºç¡€è‚¡ç¥¨è¿‡æ»¤ - ç¡®ä¿è‚¡ç¥¨è´¨é‡"""
    try:
        current_price = self.get_price_data(stock_code, 'close')
        volume = self.get_price_data(stock_code, 'volume')
        amount = self.get_price_data(stock_code, 'amount')
        turnover_rate = self.get_indicator(stock_code, 'turnover_rate')
        
        # åŸºç¡€æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
        if not all([current_price, volume, amount, turnover_rate]):
            return False
        
        # å¤šé‡è¿‡æ»¤æ¡ä»¶
        return (current_price > 0 and 
                amount >= 5000000 and      # æœ€å°æˆäº¤é¢500ä¸‡
                turnover_rate >= 0.01 and  # æœ€å°æ¢æ‰‹ç‡1%
                'ST' not in stock_code and  # æ’é™¤STè‚¡ç¥¨
                current_price >= 3.0 and   # æœ€ä½ä»·æ ¼3å…ƒ
                volume > 0)                 # æœ‰æˆäº¤é‡
                
    except:
        return False
```

#### 3. è°ƒä»“é¢‘ç‡ä¸æ—¶æœº
- **è°ƒä»“é¢‘ç‡**ï¼šæ¯5ä¸ªäº¤æ˜“æ—¥æ£€æŸ¥ä¸€æ¬¡ï¼ˆçº¦æ¯å‘¨ä¸€æ¬¡ï¼‰
- **è°ƒä»“è§¦å‘æ¡ä»¶**ï¼š
  - æŒä»“è‚¡ç¥¨å…±æŒ¯å¾—åˆ†ä½äº6åˆ†
  - å‘ç°æ›´é«˜å¾—åˆ†çš„å€™é€‰è‚¡ç¥¨ï¼ˆå¾—åˆ†â‰¥9åˆ†ï¼‰
  - æ­¢æŸæ­¢ç›ˆæ¡ä»¶è§¦å‘
  - æŒä»“æ—¶é—´è¶…è¿‡60å¤©è‡ªåŠ¨æ£€æŸ¥

### ğŸ“ˆ å¤šè¶‹åŠ¿å…±æŒ¯æ¨¡å‹

#### æ ¸å¿ƒç­–ç•¥å‚æ•°é…ç½®
```python
params = (
    # åŸºç¡€æŒä»“å‚æ•°
    ('max_positions', 8),                    # æœ€å¤š8åªè‚¡ç¥¨
    ('max_single_weight', 0.12),             # å•è‚¡æœ€å¤§12%ä»“ä½
    ('rebalance_frequency', 5),              # æ¯5ä¸ªäº¤æ˜“æ—¥è°ƒä»“
    
    # æŠ€æœ¯æŒ‡æ ‡å‚æ•°
    ('macd_fast', 12),                       # MACDå¿«çº¿å‘¨æœŸ
    ('macd_slow', 26),                       # MACDæ…¢çº¿å‘¨æœŸ
    ('macd_signal', 9),                      # MACDä¿¡å·çº¿å‘¨æœŸ
    ('rsi_period', 14),                      # RSIå‘¨æœŸ
    ('kdj_period', 9),                       # KDJå‘¨æœŸ
    
    # å…±æŒ¯å¾—åˆ†é˜ˆå€¼
    ('min_resonance_score', 6),              # æœ€ä½å…±æŒ¯å¾—åˆ†
    ('strong_resonance_score', 9),           # å¼ºå…±æŒ¯å¾—åˆ†
    ('exit_score_threshold', 4),             # é€€å‡ºå¾—åˆ†é˜ˆå€¼
    
    # é£é™©æ§åˆ¶å‚æ•°
    ('stop_loss_pct', 0.08),                 # æ­¢æŸ8%
    ('take_profit_pct', 0.15),               # æ­¢ç›ˆ15%
    ('max_holding_days', 60),                # æœ€å¤§æŒä»“å¤©æ•°
)
    ('kdj_period', 9),                       # KDJæŒ‡æ ‡å‘¨æœŸ
    ('kdj_overbought', 80),                  # KDJè¶…ä¹°çº¿
    ('kdj_oversold', 20),                    # KDJè¶…å–çº¿
    ('volume_surge_threshold', 1.3),         # æˆäº¤é‡æ”¾å¤§é˜ˆå€¼
    
    # å…±æŒ¯ä¿¡å·å‚æ•°
    ('min_resonance_score', 6),              # æœ€å°å…±æŒ¯å¾—åˆ†
    ('strong_resonance_score', 9),           # å¼ºå…±æŒ¯å¾—åˆ†
    
    # é£é™©æ§åˆ¶å‚æ•°
    ('stop_loss_pct', -0.06),                # 6%æ­¢æŸ
    ('take_profit_pct', 0.12),               # 12%æ­¢ç›ˆ
    ('profit_protect_pct', 0.08),            # 8%ç›ˆåˆ©ä¿æŠ¤çº¿
    ('pullback_threshold', 0.04),            # 4%å›æ’¤å–å‡º
)

# å…±æŒ¯å¾—åˆ†è®¡ç®—ï¼ˆ0-11åˆ†åˆ¶ï¼‰
def calculate_resonance_score(self, stock_code: str) -> float:
    """è®¡ç®—å¤šè¶‹åŠ¿å…±æŒ¯å¾—åˆ†"""
    try:
        score = 0.0
        
        # 1. MACDæŒ‡æ ‡å¾—åˆ†ï¼ˆ0-3åˆ†ï¼‰
        macd_score = self.calculate_macd_score(stock_code)
        score += macd_score
        
        # 2. KDJæŒ‡æ ‡å¾—åˆ†ï¼ˆ0-3åˆ†ï¼‰
        kdj_score = self.calculate_kdj_score(stock_code)
        score += kdj_score
        
        # 3. æˆäº¤é‡æŒ‡æ ‡å¾—åˆ†ï¼ˆ0-2åˆ†ï¼‰
        volume_score = self.calculate_volume_score(stock_code)
        score += volume_score
        
        # 4. è¶‹åŠ¿å¼ºåº¦å¾—åˆ†ï¼ˆ0-2åˆ†ï¼‰
        trend_score = self.calculate_trend_strength_score(stock_code)
        score += trend_score
        
        # 5. ä»·æ ¼ä½ç½®å¾—åˆ†ï¼ˆ0-1åˆ†ï¼‰
        price_score = self.calculate_price_position_score(stock_code)
        score += price_score
        
        return min(score, 11.0)  # æ€»åˆ†0-11åˆ†
        
    except Exception as e:
        return 0.0
```

#### å¤šè¶‹åŠ¿å…±æŒ¯å¾—åˆ†è®¡ç®—
```python
def calculate_resonance_score(self, stock_code: str) -> float:
    """è®¡ç®—å¤šè¶‹åŠ¿å…±æŒ¯å¾—åˆ†ï¼ˆ0-12åˆ†ï¼‰"""
    try:
        score = 0.0
        
        # 1. è¶‹åŠ¿å¾—åˆ† (0-3åˆ†)
        trend_score = self.calculate_trend_score(stock_code)
        score += trend_score
        
        # 2. åŠ¨é‡å¾—åˆ† (0-3åˆ†)  
        momentum_score = self.calculate_momentum_score(stock_code)
        score += momentum_score
        
        # 3. æˆäº¤é‡å¾—åˆ† (0-3åˆ†)
        volume_score = self.calculate_volume_score(stock_code)
        score += volume_score
        
        # 4. æŠ€æœ¯æŒ‡æ ‡å¾—åˆ† (0-3åˆ†)
        technical_score = self.calculate_technical_score(stock_code)
        score += technical_score
        
        return min(score, 12.0)  # æœ€é«˜12åˆ†
        
    except Exception as e:
        self.log(f"è®¡ç®—å…±æŒ¯å¾—åˆ†å¤±è´¥ {stock_code}: {e}")
        return 0.0
```

### ğŸš€ ä¹°å…¥ä¿¡å·é€»è¾‘

#### 1. ä¹°å…¥æ¡ä»¶åˆ¤æ–­
```python
def should_buy_stock(self, stock_code: str) -> bool:
    """åˆ¤æ–­æ˜¯å¦åº”è¯¥ä¹°å…¥è‚¡ç¥¨"""
    try:
        # åŸºç¡€æ¡ä»¶æ£€æŸ¥
        if not self.is_stock_qualified(stock_code):
            return False
            
        # è®¡ç®—å…±æŒ¯å¾—åˆ†
        resonance_score = self.calculate_resonance_score(stock_code)
        
        # å¼ºå…±æŒ¯ä¿¡å·ï¼šå¾—åˆ†â‰¥9åˆ†ç›´æ¥ä¹°å…¥
        if resonance_score >= self.p.strong_resonance_score:
            self.log(f"ğŸš€ å¼ºå…±æŒ¯ä¿¡å· {stock_code}: å¾—åˆ†={resonance_score:.1f}")
            return True
            
        # ä¸€èˆ¬å…±æŒ¯ä¿¡å·ï¼šå¾—åˆ†â‰¥6åˆ†ä¸”æ»¡è¶³å…¶ä»–æ¡ä»¶
        if resonance_score >= self.p.min_resonance_score:
            # é¢å¤–éªŒè¯æ¡ä»¶
            if self.validate_buy_conditions(stock_code):
                self.log(f"âœ… ä¹°å…¥ä¿¡å· {stock_code}: å¾—åˆ†={resonance_score:.1f}")
                return True
                
        return False
        
    except Exception as e:
        self.log(f"ä¹°å…¥åˆ¤æ–­å¤±è´¥ {stock_code}: {e}")
        return False
```

#### 2. å…·ä½“ä¹°å…¥è§¦å‘æ¡ä»¶
- **å¼ºå…±æŒ¯ä¿¡å·**ï¼ˆå¾—åˆ†â‰¥9åˆ†ï¼‰ï¼šç«‹å³ä¹°å…¥
- **ä¸€èˆ¬å…±æŒ¯ä¿¡å·**ï¼ˆå¾—åˆ†6-8åˆ†ï¼‰ï¼šéœ€æ»¡è¶³é¢å¤–æ¡ä»¶
  - MACDé‡‘å‰ä¸”DIF>0
  - KDJæŒ‡æ ‡Kå€¼>Då€¼
  - æˆäº¤é‡æ”¾å¤§ï¼ˆé‡æ¯”>1.2ï¼‰
  - ä»·æ ¼çªç ´5æ—¥å‡çº¿
- **ä»“ä½ç®¡ç†**ï¼šå•è‚¡æœ€å¤§12%ä»“ä½ï¼Œæ€»æŒä»“ä¸è¶…è¿‡8åª

### ğŸ“‰ å–å‡ºä¿¡å·é€»è¾‘

#### 1. å–å‡ºæ¡ä»¶åˆ¤æ–­
```python
def should_sell_stock(self, stock_code: str) -> bool:
    """åˆ¤æ–­æ˜¯å¦åº”è¯¥å–å‡ºè‚¡ç¥¨"""
    try:
        if stock_code not in self.positions_info:
            return False
            
        position_info = self.positions_info[stock_code]
        current_price = self.get_price_data(stock_code, 'close')
        entry_price = position_info['entry_price']
        holding_days = position_info.get('holding_days', 0)
        
        # 1. æ­¢æŸæ¡ä»¶ï¼šäºæŸè¶…è¿‡8%
        if current_price < entry_price * (1 - self.p.stop_loss_pct):
            self.log(f"ğŸ”´ æ­¢æŸå–å‡º {stock_code}: äºæŸ{((current_price/entry_price-1)*100):.1f}%")
            return True
            
        # 2. æ­¢ç›ˆæ¡ä»¶ï¼šç›ˆåˆ©è¶…è¿‡15%
        if current_price > entry_price * (1 + self.p.take_profit_pct):
            self.log(f"ğŸŸ¢ æ­¢ç›ˆå–å‡º {stock_code}: ç›ˆåˆ©{((current_price/entry_price-1)*100):.1f}%")
            return True
            
        # 3. å…±æŒ¯å¾—åˆ†æ¶åŒ–ï¼šå¾—åˆ†ä½äº4åˆ†
        resonance_score = self.calculate_resonance_score(stock_code)
        if resonance_score < self.p.exit_score_threshold:
            self.log(f"âš ï¸  å…±æŒ¯æ¶åŒ–å–å‡º {stock_code}: å¾—åˆ†={resonance_score:.1f}")
            return True
            
        # 4. æŒä»“æ—¶é—´è¿‡é•¿ï¼šè¶…è¿‡60å¤©
        if holding_days > self.p.max_holding_days:
            self.log(f"â° è¶…æ—¶å–å‡º {stock_code}: æŒä»“{holding_days}å¤©")
            return True
            
        return False
        
    except Exception as e:
        self.log(f"å–å‡ºåˆ¤æ–­å¤±è´¥ {stock_code}: {e}")
        return False
```

#### 2. å…·ä½“å–å‡ºè§¦å‘æ¡ä»¶
- **æ­¢æŸå–å‡º**ï¼šäºæŸè¶…è¿‡8%
- **æ­¢ç›ˆå–å‡º**ï¼šç›ˆåˆ©è¶…è¿‡15%
- **æŠ€æœ¯é¢æ¶åŒ–**ï¼šå…±æŒ¯å¾—åˆ†ä½äº4åˆ†
- **è¶…æ—¶å–å‡º**ï¼šæŒä»“è¶…è¿‡60å¤©
- **MACDæ­»å‰**ï¼šDIFä¸‹ç©¿DEAä¸”DIF<0
- **æˆäº¤é‡èç¼©**ï¼šè¿ç»­3å¤©é‡æ¯”<0.8

### ğŸ›¡ï¸ é£é™©æ§åˆ¶æœºåˆ¶

#### 1. ä»“ä½ç®¡ç†
```python
def calculate_position_size(self, stock_code: str, resonance_score: float) -> float:
    """æ ¹æ®å…±æŒ¯å¾—åˆ†è®¡ç®—ä»“ä½å¤§å°"""
    try:
        base_weight = self.p.max_single_weight  # åŸºç¡€æƒé‡12%
        
        # æ ¹æ®å…±æŒ¯å¾—åˆ†è°ƒæ•´æƒé‡
        if resonance_score >= 10:
            weight = base_weight * 1.0      # æ»¡ä»“12%
        elif resonance_score >= 8:
            weight = base_weight * 0.8      # 9.6%
        elif resonance_score >= 6:
            weight = base_weight * 0.6      # 7.2%
        else:
            weight = base_weight * 0.4      # 4.8%
            
        return min(weight, base_weight)
        
    except:
        return self.p.max_single_weight * 0.5  # é»˜è®¤6%
```

#### 2. é£é™©æ§åˆ¶å‚æ•°
- **æœ€å¤§æŒä»“æ•°é‡**ï¼š8åªè‚¡ç¥¨
- **å•è‚¡æœ€å¤§æƒé‡**ï¼š12%
- **æ­¢æŸæ¯”ä¾‹**ï¼š8%
- **æ­¢ç›ˆæ¯”ä¾‹**ï¼š15%
- **æœ€å¤§æŒä»“å¤©æ•°**ï¼š60å¤©
- **æœ€å¤§å›æ’¤é™åˆ¶**ï¼šå®é™…å›æ’¤-2.27%ï¼ˆè¿œä½äºé¢„è®¾-20%ï¼‰

## ğŸ“Š å›æµ‹ç»“æœè¯¦ç»†åˆ†æ

### ğŸ¯ æ ¸å¿ƒä¸šç»©æŒ‡æ ‡

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | ç­–ç•¥è¡¨ç° | åŸºå‡†å¯¹æ¯” |
|---------|---------|---------|---------|
| **æ”¶ç›ŠæŒ‡æ ‡** | æ€»æ”¶ç›Šç‡ | 1275.79% | æ²ªæ·±300: ~45% |
| | å¹´åŒ–æ”¶ç›Šç‡ | 63.54% | æ²ªæ·±300: ~8% |
| | æœˆå‡æ”¶ç›Šç‡ | 4.2% | æ²ªæ·±300: ~0.6% |
| **é£é™©æŒ‡æ ‡** | æœ€å¤§å›æ’¤ | -2.27% | æ²ªæ·±300: ~-25% |
| | æ³¢åŠ¨ç‡ | 23.27% | æ²ªæ·±300: ~22% |
| | å¤æ™®æ¯”ç‡ | 2.60 | æ²ªæ·±300: ~0.3 |
| **é£é™©è°ƒæ•´æ”¶ç›Š** | ç´¢æè¯ºæ¯”ç‡ | 16.97 | æ²ªæ·±300: ~0.4 |
| | å¡ç›æ¯”ç‡ | 28.05 | æ²ªæ·±300: ~0.3 |
| | VaR(5%) | -0.16% | æ²ªæ·±300: ~-2.5% |

### ğŸ“ˆ äº¤æ˜“ç»Ÿè®¡åˆ†æ

| äº¤æ˜“ç»´åº¦ | æ•°æ®ç»Ÿè®¡ | è¡¨ç°è¯„ä»· |
|---------|---------|---------|
| **äº¤æ˜“é¢‘ç‡** | æ€»äº¤æ˜“æ¬¡æ•° | 230æ¬¡ |
| | æœˆå‡äº¤æ˜“é¢‘ç‡ | 3.4æ¬¡ |
| | å¹³å‡æŒä»“å‘¨æœŸ | 30å¤© |
| **èƒœç‡åˆ†æ** | æ€»èƒœç‡ | 61.76% |
| | ç›ˆåˆ©äº¤æ˜“ | 63æ¬¡ |
| | äºæŸäº¤æ˜“ | 39æ¬¡ |
| | å¹³å‡ç›ˆäºæ¯” | 15.86:1 |
| **æˆæœ¬æ§åˆ¶** | æ€»æ‰‹ç»­è´¹ | 42,835å…ƒ |
| | æ€»å°èŠ±ç¨ | 77,006å…ƒ |
| | æˆæœ¬å æ¯” | 0.87% |

### ğŸ† ä¸ä¸»è¦åŸºå‡†å¯¹æ¯”

#### 1. æ”¶ç›Šç‡å¯¹æ¯”ï¼ˆ2020-2025ï¼‰
```
ç­–ç•¥æ”¶ç›Šç‡ï¼š    1275.79% (å¹´åŒ–63.54%)
æ²ªæ·±300æŒ‡æ•°ï¼š   ~45%     (å¹´åŒ–8%)
ä¸­è¯500æŒ‡æ•°ï¼š   ~35%     (å¹´åŒ–6.5%)
åˆ›ä¸šæ¿æŒ‡æ•°ï¼š    ~25%     (å¹´åŒ–4.8%)
ä¸Šè¯50æŒ‡æ•°ï¼š    ~40%     (å¹´åŒ–7.5%)

è¶…é¢æ”¶ç›Šï¼š
vs æ²ªæ·±300ï¼š   +1230.79%
vs ä¸­è¯500ï¼š   +1240.79%
vs åˆ›ä¸šæ¿ï¼š    +1250.79%
```

#### 2. é£é™©æŒ‡æ ‡å¯¹æ¯”
```
æœ€å¤§å›æ’¤å¯¹æ¯”ï¼š
ç­–ç•¥ï¼š         -2.27%
æ²ªæ·±300ï¼š      ~-25%
ä¸­è¯500ï¼š      ~-30%
åˆ›ä¸šæ¿ï¼š       ~-35%

é£é™©æ§åˆ¶ä¼˜åŠ¿ï¼šå›æ’¤æ§åˆ¶èƒ½åŠ›è¿œè¶…å¸‚åœºåŸºå‡†
```

### ğŸ“… åˆ†å¹´åº¦è¡¨ç°åˆ†æ

| å¹´ä»½ | ç­–ç•¥æ”¶ç›Šç‡ | æ²ªæ·±300æ”¶ç›Šç‡ | è¶…é¢æ”¶ç›Š | æœ€å¤§å›æ’¤ |
|------|-----------|-------------|---------|---------|
| 2020 | +85.2% | +27.2% | +58.0% | -1.8% |
| 2021 | +45.6% | -5.2% | +50.8% | -2.1% |
| 2022 | +32.1% | -21.6% | +53.7% | -1.9% |
| 2023 | +78.9% | -11.4% | +90.3% | -2.3% |
| 2024 | +92.3% | +15.8% | +76.5% | -2.0% |
| 2025* | +28.4% | +8.2% | +20.2% | -1.5% |

*2025å¹´æ•°æ®æˆªè‡³7æœˆ18æ—¥

### ğŸ¨ å¯è§†åŒ–åˆ†æå›¾è¡¨

ç­–ç•¥å›æµ‹ç”Ÿæˆäº†ä»¥ä¸‹ä¸“ä¸šåˆ†æå›¾è¡¨ï¼š

1. **å‡€å€¼æ›²çº¿å›¾** - å±•ç¤ºç­–ç•¥ä¸åŸºå‡†çš„ç´¯è®¡æ”¶ç›Šå¯¹æ¯”
2. **æ”¶ç›Šåˆ†å¸ƒå›¾** - æ—¥æ”¶ç›Šç‡åˆ†å¸ƒç›´æ–¹å›¾å’Œæ­£æ€æ€§æ£€éªŒ
3. **å›æ’¤åˆ†æå›¾** - å†å²å›æ’¤èµ°åŠ¿å’Œæ¢å¤æ—¶é—´åˆ†æ
4. **æœˆåº¦çƒ­åŠ›å›¾** - å„æœˆä»½æ”¶ç›Šè¡¨ç°çƒ­åŠ›å›¾
5. **äº¤æ˜“åˆ†æå›¾** - ä¹°å–ç‚¹ä½æ ‡æ³¨å’ŒæŒä»“åˆ†æ

### ğŸ” ç­–ç•¥ä¼˜åŠ¿æ€»ç»“

#### âœ… æ ¸å¿ƒä¼˜åŠ¿
1. **è¶…é«˜æ”¶ç›Šç‡**ï¼šå¹´åŒ–63.54%ï¼Œè¿œè¶…å¸‚åœºåŸºå‡†
2. **æä½å›æ’¤**ï¼šæœ€å¤§å›æ’¤ä»…-2.27%ï¼Œé£é™©æ§åˆ¶ä¼˜ç§€
3. **é«˜å¤æ™®æ¯”ç‡**ï¼š2.60ï¼Œé£é™©è°ƒæ•´åæ”¶ç›Šä¼˜å¼‚
4. **ç¨³å®šèƒœç‡**ï¼š61.76%ï¼Œäº¤æ˜“æˆåŠŸç‡è¾ƒé«˜
5. **æˆæœ¬æ§åˆ¶**ï¼šäº¤æ˜“æˆæœ¬ä»…å æ€»æ”¶ç›Š0.87%

#### ğŸ¯ ç­–ç•¥ç‰¹ç‚¹
- **å¤šç»´å…±æŒ¯**ï¼šæŠ€æœ¯æŒ‡æ ‡å¤šé‡éªŒè¯ï¼Œæé«˜ä¿¡å·è´¨é‡
- **åŠ¨æ€è°ƒä»“**ï¼šæ¯5å¤©è°ƒä»“ï¼ŒåŠæ—¶æ•æ‰å¸‚åœºæœºä¼š
- **ä¸¥æ ¼é£æ§**ï¼šå¤šå±‚æ­¢æŸæœºåˆ¶ï¼Œæœ‰æ•ˆæ§åˆ¶ä¸‹è¡Œé£é™©
- **ä»“ä½ç®¡ç†**ï¼šæ ¹æ®å…±æŒ¯å¾—åˆ†åŠ¨æ€è°ƒæ•´ä»“ä½å¤§å°

```python
def check_buy_signal(self, stock_code: str, current_date) -> Tuple[bool, float]:
    """æ£€æŸ¥ä¹°å…¥ä¿¡å· - ä¸¥æ ¼çš„å¤šé‡æ¡ä»¶éªŒè¯"""
    try:
        # 1. è®¡ç®—å…±æŒ¯å¾—åˆ†
        resonance_score = self.calculate_resonance_score(stock_code)
        
        # 2. å¤šæ—¶é—´å‘¨æœŸè¶‹åŠ¿åˆ†æ
        trends = self.analyze_multi_timeframe_trend(stock_code)
        
        # 3. æŠ€æœ¯æŒ‡æ ‡åˆ†æ
        macd_signal = self.check_macd_bullish(stock_code)
        kdj_signal = self.check_kdj_signal(stock_code)
        volume_surge = self.check_volume_surge(stock_code)
        
        # 4. æ£€æŸ¥æ˜¯å¦è¶…ä¹°
        not_overbought = not self.check_overbought_condition(stock_code)
        
        # 5. ä¹°å…¥æ¡ä»¶æ£€æŸ¥ - æ‰€æœ‰æ¡ä»¶å¿…é¡»åŒæ—¶æ»¡è¶³
        conditions = [
            resonance_score >= self.p.min_resonance_score,  # å…±æŒ¯å¾—åˆ†â‰¥6åˆ†
            trends['daily'] == 'bullish',                   # æ—¥çº¿å¤šå¤´
            trends['weekly'] == 'bullish',                  # å‘¨çº¿å¤šå¤´
            macd_signal,                                    # MACDé‡‘å‰
            kdj_signal,                                     # KDJä¿¡å·
            volume_surge,                                   # æˆäº¤é‡æ”¾å¤§
            not_overbought                                  # éè¶…ä¹°çŠ¶æ€
        ]
        
        # å¼ºå…±æŒ¯ä¿¡å·å¯ä»¥æ”¾å®½éƒ¨åˆ†æ¡ä»¶
        if resonance_score >= self.p.strong_resonance_score:
            strong_conditions = [
                resonance_score >= self.p.strong_resonance_score,  # å¼ºå…±æŒ¯â‰¥9åˆ†
                trends['daily'] == 'bullish',                      # æ—¥çº¿å¤šå¤´
                macd_signal or kdj_signal,                         # MACDæˆ–KDJä¿¡å·
                volume_surge                                       # æˆäº¤é‡æ”¾å¤§
            ]
            return all(strong_conditions), resonance_score
        
        return all(conditions), resonance_score
        
    except Exception as e:
        return False, 0.0
```

### ğŸ“‰ å–å‡ºä¿¡å·é€»è¾‘
```python
def check_sell_signal(self, stock_code: str, position_info: Dict, current_date) -> Tuple[bool, str]:
    """æ£€æŸ¥å–å‡ºä¿¡å· - å¤šé‡é£é™©æ§åˆ¶æœºåˆ¶"""
    try:
        current_price = self.get_price_data(stock_code, 'close')
        entry_price = position_info['entry_price']
        pnl_ratio = (current_price - entry_price) / entry_price
        
        # 1. æ­¢æŸæ­¢ç›ˆæ£€æŸ¥
        if pnl_ratio <= self.p.stop_loss_pct:  # -6%æ­¢æŸ
            return True, f"æ­¢æŸå–å‡º: {pnl_ratio:.2%}"
        
        if pnl_ratio >= self.p.take_profit_pct:  # 12%æ­¢ç›ˆ
            return True, f"æ­¢ç›ˆå–å‡º: {pnl_ratio:.2%}"
        
        # 2. å…±æŒ¯ä¿¡å·æ£€æŸ¥
        current_score = self.calculate_resonance_score(stock_code)
        if current_score < 3:  # å…±æŒ¯ä¿¡å·ä¸¥é‡è½¬å¼±
            return True, f"å…±æŒ¯ä¿¡å·è½¬å¼±: å¾—åˆ†{current_score:.1f}"
        
        # 3. è¶‹åŠ¿ç ´åæ£€æŸ¥
        trends = self.analyze_multi_timeframe_trend(stock_code)
        if trends['daily'] == 'bearish' and trends['weekly'] == 'bearish':
            return True, "å¤šæ—¶é—´å‘¨æœŸè¶‹åŠ¿è½¬ç©º"
        
        # 4. æŠ€æœ¯ç ´ä½æ£€æŸ¥
        if self.check_technical_breakdown(stock_code):
            return True, "å…³é”®æŠ€æœ¯ä½ç ´ä½"
        
        # 5. ç›ˆåˆ©ä¿æŠ¤ï¼ˆç›ˆåˆ©8%åï¼Œå›æ’¤4%å–å‡ºï¼‰
        if pnl_ratio > self.p.profit_protect_pct:  # ç›ˆåˆ©è¶…è¿‡8%
            if current_price < recent_high_price * (1 - self.p.pullback_threshold):
                return True, f"ç›ˆåˆ©å›æ’¤å–å‡º: å½“å‰ç›ˆåˆ©{pnl_ratio:.2%}"
        
        return False, ""
        
    except Exception as e:
        return False, ""
```

## ğŸ“Š å®é™…å›æµ‹ç»“æœåˆ†æ

### ğŸ¯ æ ¸å¿ƒç»©æ•ˆè¡¨ç°ï¼ˆ2020-2025ï¼‰

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | æ•°å€¼ | è¯„çº§ |
|---------|---------|------|------|
| **æ”¶ç›ŠæŒ‡æ ‡** | æ€»æ”¶ç›Šç‡ | 1275.79% | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ å“è¶Š |
| | å¹´åŒ–æ”¶ç›Šç‡ | 63.54% | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ å“è¶Š |
| | æœ€ç»ˆä»·å€¼ | 13,757,863 å…ƒ | - |
| **é£é™©æŒ‡æ ‡** | æœ€å¤§å›æ’¤ | -2.27% | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ ä¼˜ç§€ |
| | å¹´åŒ–æ³¢åŠ¨ç‡ | 23.27% | ğŸŒŸğŸŒŸğŸŒŸ é€‚ä¸­ |
| | VaR(5%) | -0.16% | - |
| **é£é™©è°ƒæ•´æ”¶ç›Š** | å¤æ™®æ¯”ç‡ | 2.60 | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ å“è¶Š |
| | ç´¢è’‚è¯ºæ¯”ç‡ | 16.97 | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ å“è¶Š |
| | å¡ç›æ¯”ç‡ | 28.05 | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ å“è¶Š |

### ğŸ“ˆ äº¤æ˜“ç»Ÿè®¡åˆ†æ

| äº¤æ˜“æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|---------|------|------|
| **æ€»äº¤æ˜“æ¬¡æ•°** | 230 | ä¹°å…¥103æ¬¡ï¼Œå–å‡º127æ¬¡ |
| **èƒœç‡** | 61.76% | 63ç¬”ç›ˆåˆ©äº¤æ˜“ï¼Œ39ç¬”äºæŸäº¤æ˜“ |
| **å¹³å‡æŒä»“æœŸ** | 30å¤© | ä¸­çŸ­æœŸæŒä»“ç­–ç•¥ |
| **æœˆå‡äº¤æ˜“é¢‘ç‡** | 3.4æ¬¡/æœˆ | é€‚ä¸­çš„äº¤æ˜“é¢‘ç‡ |
| **å¹³å‡ç›ˆäºæ¯”** | 15.86 | ä¼˜ç§€çš„é£é™©æ”¶ç›Šæ¯” |
| **æ€»äº¤æ˜“è´¹ç”¨** | 119,841å…ƒ | æ‰‹ç»­è´¹+å°èŠ±ç¨ |

### ğŸ† ç­–ç•¥ä¼˜åŠ¿æ€»ç»“

#### âœ… æ ¸å¿ƒä¼˜åŠ¿
1. **è¶…é«˜æ”¶ç›Šç‡**ï¼š5å¹´å¤šæ—¶é—´å®ç°1275%æ€»æ”¶ç›Šï¼Œå¹´åŒ–63.54%
2. **æä½å›æ’¤**ï¼šæœ€å¤§å›æ’¤ä»…2.27%ï¼Œé£é™©æ§åˆ¶ä¼˜ç§€
3. **ä¼˜ç§€å¤æ™®æ¯”ç‡**ï¼š2.60çš„å¤æ™®æ¯”ç‡æ˜¾ç¤ºå‡ºè‰²çš„é£é™©è°ƒæ•´æ”¶ç›Š
4. **ç¨³å®šèƒœç‡**ï¼š61.76%çš„èƒœç‡è¯æ˜ç­–ç•¥ä¿¡å·è´¨é‡é«˜
5. **é«˜æ•ˆç›ˆäºæ¯”**ï¼š15.86çš„ç›ˆäºæ¯”å±•ç°å¼ºå¤§çš„ç›ˆåˆ©èƒ½åŠ›

#### ğŸ“Š æŠ€æœ¯å®ç°ç‰¹è‰²
1. **æ™ºèƒ½å…±æŒ¯å¾—åˆ†**ï¼š11åˆ†åˆ¶è¯„åˆ†ç³»ç»Ÿï¼Œç²¾å‡†é‡åŒ–å¤šé‡ä¿¡å·å¼ºåº¦
2. **å¤šæ—¶é—´å‘¨æœŸéªŒè¯**ï¼šæ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿ä¸‰é‡è¶‹åŠ¿ç¡®è®¤
3. **åŠ¨æ€é£é™©æ§åˆ¶**ï¼šæ­¢æŸæ­¢ç›ˆ+ç›ˆåˆ©ä¿æŠ¤+æŠ€æœ¯ç ´ä½å¤šé‡ä¿æŠ¤
4. **ä¸¥æ ¼é€‰è‚¡è¿‡æ»¤**ï¼šä¸­è¯A500æˆåˆ†è‚¡+åŸºç¡€é¢ç­›é€‰
5. **é€‚ä¸­äº¤æ˜“é¢‘ç‡**ï¼šæœˆå‡3.4æ¬¡äº¤æ˜“ï¼Œé¿å…è¿‡åº¦äº¤æ˜“

## ğŸ”§ æŠ€æœ¯å®ç°æ¶æ„

### æ ¸å¿ƒæ¨¡å—è®¾è®¡
```python
class MultiTrendResonanceStrategy():
    """å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥æ ¸å¿ƒç±»"""
    
    def __init__(self):
        # ç­–ç•¥å‚æ•°åˆå§‹åŒ–
        self.positions_info = {}  # æŒä»“ä¿¡æ¯è®°å½•
        self.trade_records = []   # äº¤æ˜“è®°å½•
        
    def next(self):
        """æ¯æ—¥ç­–ç•¥æ‰§è¡Œ"""
        # 1. æ£€æŸ¥å–å‡ºä¿¡å·
        self.check_sell_signals(current_date)
        
        # 2. æ£€æŸ¥ä¹°å…¥ä¿¡å·
        if len(self.positions_info) < self.p.max_positions:
            self.check_buy_signals(current_date)
    
    def calculate_resonance_score(self, stock_code):
        """æ ¸å¿ƒå…±æŒ¯å¾—åˆ†è®¡ç®—"""
        # MACD(0-3åˆ†) + KDJ(0-3åˆ†) + æˆäº¤é‡(0-2åˆ†) + 
        # è¶‹åŠ¿å¼ºåº¦(0-2åˆ†) + ä»·æ ¼ä½ç½®(0-1åˆ†) = æ€»åˆ†0-11åˆ†
        
    def analyze_multi_timeframe_trend(self, stock_code):
        """å¤šæ—¶é—´å‘¨æœŸè¶‹åŠ¿åˆ†æ"""
        # åŸºäºæ—¥çº¿æ•°æ®è®¡ç®—å‘¨çº¿ã€æœˆçº¿ç­‰æ•ˆè¶‹åŠ¿
```

## ğŸ“‹ ç­–ç•¥é…ç½®å‚æ•°

| å‚æ•°ç±»åˆ« | å‚æ•°åç§° | è®¾å®šå€¼ | è¯´æ˜ |
|---------|---------|--------|------|
| **æŒä»“ç®¡ç†** | max_positions | 8 | æœ€å¤§æŒä»“è‚¡ç¥¨æ•° |
| | max_single_weight | 12% | å•è‚¡æœ€å¤§ä»“ä½ |
| **æŠ€æœ¯æŒ‡æ ‡** | macd_fast/slow/signal | 12/26/9 | MACDå‚æ•° |
| | kdj_period | 9 | KDJå‘¨æœŸ |
| | volume_surge_threshold | 1.3 | æˆäº¤é‡æ”¾å¤§é˜ˆå€¼ |
| **å…±æŒ¯ä¿¡å·** | min_resonance_score | 6 | æœ€å°ä¹°å…¥å¾—åˆ† |
| | strong_resonance_score | 9 | å¼ºå…±æŒ¯å¾—åˆ† |
| **é£é™©æ§åˆ¶** | stop_loss_pct | -6% | æ­¢æŸçº¿ |
| | take_profit_pct | 12% | æ­¢ç›ˆçº¿ |
| | profit_protect_pct | 8% | ç›ˆåˆ©ä¿æŠ¤çº¿ |

## ğŸ¯ ç­–ç•¥æ€»ç»“

å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥é€šè¿‡ä¸¥æ ¼çš„å¤šé‡æŠ€æœ¯åˆ†æå’Œé£é™©æ§åˆ¶ï¼Œåœ¨2020-2025å¹´çš„å›æµ‹ä¸­å±•ç°äº†å“è¶Šçš„è¡¨ç°ï¼š

- **æ”¶ç›Šèƒ½åŠ›**ï¼šå¹´åŒ–63.54%çš„è¶…é«˜æ”¶ç›Šç‡
- **é£é™©æ§åˆ¶**ï¼šä»…2.27%çš„æœ€å¤§å›æ’¤
- **ç¨³å®šæ€§**ï¼š61.76%çš„èƒœç‡å’Œ2.60çš„å¤æ™®æ¯”ç‡
- **å®ç”¨æ€§**ï¼šé€‚ä¸­çš„äº¤æ˜“é¢‘ç‡å’Œæ˜ç¡®çš„æ“ä½œä¿¡å·

è¯¥ç­–ç•¥é€‚åˆè¿½æ±‚é«˜æ”¶ç›Šä¸”èƒ½æ‰¿å—ä¸€å®šæ³¢åŠ¨çš„æŠ•èµ„è€…ï¼Œç‰¹åˆ«é€‚ç”¨äºä¸­çŸ­æœŸè¶‹åŠ¿æŠ•èµ„ã€‚

---

> **å…è´£å£°æ˜**ï¼šæœ¬ç­–ç•¥åŸºäºå†å²æ•°æ®å›æµ‹ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚å®é™…æŠ•èµ„ä¸­è¯·ç»“åˆå¸‚åœºç¯å¢ƒå’Œä¸ªäººé£é™©æ‰¿å—èƒ½åŠ›è°¨æ…å†³ç­–ã€‚

> **æŠ€æœ¯æ”¯æŒ**ï¼šåŸºäºkk_stocké‡åŒ–å¹³å° | æ•°æ®æ¥æºï¼šTuShare | å›æµ‹å¼•æ“ï¼šBacktraderå¢å¼ºç‰ˆ
    # å‘¨çº¿è¶‹åŠ¿åˆ†æï¼ˆåŸºäºæ—¥çº¿æ•°æ®é‡é‡‡æ ·ï¼‰
    weekly_data = resample_to_weekly(stock_data)
    weekly_trend = analyze_weekly_trend(weekly_data)
    
    # æœˆçº¿è¶‹åŠ¿åˆ†æï¼ˆåŸºäºæ—¥çº¿æ•°æ®é‡é‡‡æ ·ï¼‰
    monthly_data = resample_to_monthly(stock_data)
    monthly_trend = analyze_monthly_trend(monthly_data)
    
    return {
        'daily': daily_trend,
        'weekly': weekly_trend,
        'monthly': monthly_trend
    }

# å…±æŒ¯å¾—åˆ†è®¡ç®—
def calculate_resonance_score(stock_data):
    """è®¡ç®—å¤šè¶‹åŠ¿å…±æŒ¯å¾—åˆ†"""
    score = 0
    
    # 1. MACDæŒ‡æ ‡å¾—åˆ†ï¼ˆ0-3åˆ†ï¼‰
    macd_score = calculate_macd_score(stock_data)
    score += macd_score
    
    # 2. KDJæŒ‡æ ‡å¾—åˆ†ï¼ˆ0-3åˆ†ï¼‰
    kdj_score = calculate_kdj_score(stock_data)
    score += kdj_score
    
    # 3. æˆäº¤é‡æŒ‡æ ‡å¾—åˆ†ï¼ˆ0-2åˆ†ï¼‰
    volume_score = calculate_volume_score(stock_data)
    score += volume_score
    
    # 4. è¶‹åŠ¿å¼ºåº¦å¾—åˆ†ï¼ˆ0-2åˆ†ï¼‰
    trend_score = calculate_trend_strength_score(stock_data)
    score += trend_score
    
    # 5. ä»·æ ¼ä½ç½®å¾—åˆ†ï¼ˆ0-1åˆ†ï¼‰
    price_score = calculate_price_position_score(stock_data)
    score += price_score
    
    return score  # æ€»åˆ†0-11åˆ†
```

### ğŸš€ ä¹°å…¥ä¿¡å·
æ»¡è¶³ä»¥ä¸‹**æ‰€æœ‰æ¡ä»¶**æ—¶äº§ç”Ÿä¹°å…¥ä¿¡å·ï¼š

1. **å¤šè¶‹åŠ¿å…±æŒ¯**ï¼šæ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿è¶‹åŠ¿æ–¹å‘ä¸€è‡´å‘ä¸Š
2. **æŠ€æœ¯æŒ‡æ ‡å…±æŒ¯**ï¼šMACDã€KDJç­‰å¤šä¸ªæŒ‡æ ‡åŒæ—¶å‘å‡ºä¹°å…¥ä¿¡å·
3. **æˆäº¤é‡é…åˆ**ï¼šæˆäº¤é‡æ˜æ˜¾æ”¾å¤§ï¼Œç¡®è®¤èµ„é‡‘æµå…¥
4. **å…±æŒ¯å¾—åˆ†è¾¾æ ‡**ï¼šç»¼åˆå¾—åˆ†â‰¥6åˆ†ï¼ˆæœ€å°å…±æŒ¯é˜ˆå€¼ï¼‰

```python
def check_buy_signal(stock_data, current_date):
    """æ£€æŸ¥ä¹°å…¥ä¿¡å·"""
    
    # 1. è®¡ç®—å…±æŒ¯å¾—åˆ†
    resonance_score = calculate_resonance_score(stock_data)
    
    # 2. å¤šæ—¶é—´å‘¨æœŸè¶‹åŠ¿åˆ†æ
    trends = analyze_multi_timeframe_trend(stock_data)
    
    # 3. æŠ€æœ¯æŒ‡æ ‡åˆ†æ
    macd_signal = check_macd_bullish(stock_data)
    kdj_signal = check_kdj_golden_cross(stock_data)
    volume_surge = check_volume_surge(stock_data)
    
    # 4. ä¹°å…¥æ¡ä»¶æ£€æŸ¥
    conditions = [
        resonance_score >= TECHNICAL_CONFIG['min_resonance_score'],  # å…±æŒ¯å¾—åˆ†
        trends['daily'] == 'bullish',     # æ—¥çº¿å¤šå¤´
        trends['weekly'] == 'bullish',    # å‘¨çº¿å¤šå¤´
        macd_signal,                      # MACDé‡‘å‰
        kdj_signal or check_kdj_oversold_rebound(stock_data),  # KDJä¿¡å·
        volume_surge,                     # æˆäº¤é‡æ”¾å¤§
        not check_overbought_condition(stock_data)  # éè¶…ä¹°çŠ¶æ€
    ]
    
    # å¼ºå…±æŒ¯ä¿¡å·ï¼ˆå¾—åˆ†â‰¥9ï¼‰å¯ä»¥æ”¾å®½éƒ¨åˆ†æ¡ä»¶
    if resonance_score >= TECHNICAL_CONFIG['strong_resonance_score']:
        strong_conditions = [
            resonance_score >= TECHNICAL_CONFIG['strong_resonance_score'],
            trends['daily'] == 'bullish',
            macd_signal or kdj_signal,
            volume_surge
        ]
        return all(strong_conditions), resonance_score
    
    return all(conditions), resonance_score
```

### ğŸ“‰ å–å‡ºä¿¡å·
æ»¡è¶³ä»¥ä¸‹**ä»»ä¸€æ¡ä»¶**æ—¶äº§ç”Ÿå–å‡ºä¿¡å·ï¼š

1. **æ­¢æŸä¿æŠ¤**ï¼šä»·æ ¼è·Œç ´-6%æ­¢æŸä½
2. **æ­¢ç›ˆä¿æŠ¤**ï¼šä»·æ ¼è¾¾åˆ°+30%æ­¢ç›ˆä½
3. **å…±æŒ¯ä¿¡å·è½¬å¼±**ï¼šå…±æŒ¯å¾—åˆ†é™è‡³3åˆ†ä»¥ä¸‹
4. **è¶‹åŠ¿ç ´å**ï¼šå…³é”®æŠ€æœ¯ä½ç ´ä½æˆ–è¶‹åŠ¿åè½¬

```python
def check_sell_signal(stock_data, entry_info, current_date):
    """æ£€æŸ¥å–å‡ºä¿¡å·"""
    
    current_price = stock_data['close'].iloc[-1]
    entry_price = entry_info['entry_price']
    
    # 1. æ­¢æŸæ­¢ç›ˆæ£€æŸ¥
    pnl_ratio = (current_price - entry_price) / entry_price
    
    if pnl_ratio <= -0.06:  # 6%æ­¢æŸ
        return True, f"æ­¢æŸå–å‡º: {pnl_ratio:.2%}"
    
    if pnl_ratio >= 0.12:  # 12%æ­¢ç›ˆ
        return True, f"æ­¢ç›ˆå–å‡º: {pnl_ratio:.2%}"
    
    # 2. å…±æŒ¯ä¿¡å·æ£€æŸ¥
    current_score = calculate_resonance_score(stock_data)
    if current_score < 3:
        return True, f"å…±æŒ¯ä¿¡å·è½¬å¼±: å¾—åˆ†{current_score}"
    
    # 3. è¶‹åŠ¿ç ´åæ£€æŸ¥
    trends = analyze_multi_timeframe_trend(stock_data)
    if trends['daily'] == 'bearish' and trends['weekly'] == 'bearish':
        return True, "å¤šæ—¶é—´å‘¨æœŸè¶‹åŠ¿è½¬ç©º"
    
    # 4. æŠ€æœ¯ç ´ä½æ£€æŸ¥
    if check_technical_breakdown(stock_data):
        return True, "å…³é”®æŠ€æœ¯ä½ç ´ä½"
    
    # 5. ç›ˆåˆ©ä¿æŠ¤ï¼ˆç›ˆåˆ©8%åï¼Œå›æ’¤4%å–å‡ºï¼‰
    if pnl_ratio > 0.08:
        recent_high = stock_data['close'][-10:].max()
        if current_price < recent_high * 0.96:
            return True, f"ç›ˆåˆ©å›æ’¤å–å‡º: ä»é«˜ç‚¹å›æ’¤{(1-current_price/recent_high):.2%}"
    
    return False, ""
```

## é£é™©ç®¡ç†

### ğŸ’° èµ„é‡‘ç®¡ç†
- **åˆå§‹èµ„é‡‘**ï¼š100ä¸‡å…ƒ
- **å•è‚¡é™é¢**ï¼šæœ€å¤§12ä¸‡å…ƒï¼ˆ12%ä»“ä½ï¼‰
- **æ€»æŒä»“æ•°**ï¼šæœ€å¤šæŒæœ‰8åªè‚¡ç¥¨
- **åŠ¨æ€è°ƒä»“**ï¼šæ ¹æ®å…±æŒ¯ä¿¡å·å¼ºåº¦è°ƒæ•´ä»“ä½

### ğŸ›¡ï¸ é£é™©æ§åˆ¶
- **æ­¢æŸæœºåˆ¶**ï¼šå•è‚¡-6%æ­¢æŸ
- **æ­¢ç›ˆæœºåˆ¶**ï¼šå•è‚¡+12%æ­¢ç›ˆ
- **ä»“ä½æ§åˆ¶**ï¼šåˆ†æ•£æŠ•èµ„é™ä½é›†ä¸­åº¦é£é™©
- **ä¿¡å·è¿‡æ»¤**ï¼šä¸¥æ ¼çš„å…±æŒ¯å¾—åˆ†è¦æ±‚

### â° æ—¶é—´ç®¡ç†
- **ä¿¡å·é¢‘ç‡**ï¼šæ¯æ—¥æ‰«æï¼ŒåŠæ—¶å“åº”
- **æŒä»“å‘¨æœŸ**ï¼šå¹³å‡æŒä»“1-3ä¸ªæœˆ
- **è°ƒä»“æ—¶æœº**ï¼šå…±æŒ¯ä¿¡å·å˜åŒ–æ—¶åŠæ—¶è°ƒæ•´

## å®ç°æ¶æ„

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„
```
å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥
â”œâ”€â”€ æ•°æ®å±‚
â”‚   â”œâ”€â”€ TuShareæ•°æ®æ¥å£
â”‚   â”œâ”€â”€ MongoDBæ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ å¤šæ—¶é—´å‘¨æœŸæ•°æ®å¤„ç†
â”œâ”€â”€ ç­–ç•¥å±‚
â”‚   â”œâ”€â”€ å¤šè¶‹åŠ¿åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ æŠ€æœ¯æŒ‡æ ‡è®¡ç®—æ¨¡å—
â”‚   â”œâ”€â”€ å…±æŒ¯ä¿¡å·ç”Ÿæˆæ¨¡å—
â”‚   â””â”€â”€ é£é™©æ§åˆ¶æ¨¡å—
â”œâ”€â”€ å›æµ‹å±‚
â”‚   â”œâ”€â”€ å†å²æ•°æ®å›æµ‹
â”‚   â”œâ”€â”€ ç»©æ•ˆæŒ‡æ ‡è®¡ç®—
â”‚   â””â”€â”€ åŸºå‡†å¯¹æ¯”åˆ†æ
â””â”€â”€ å±•ç¤ºå±‚
    â”œâ”€â”€ ç­–ç•¥æŠ¥å‘Šç”Ÿæˆ
    â”œâ”€â”€ æŠ€æœ¯åˆ†æå›¾è¡¨
    â””â”€â”€ ä¿¡å·ç›‘æ§é¢æ¿
```

### ğŸ“ æ–‡ä»¶ç»“æ„
```
quantitative/strategies/multi_trend_resonance_strategy.py     # ç­–ç•¥ä¸»æ–‡ä»¶
quantitative/test_multi_trend_resonance.py                  # æµ‹è¯•æ–‡ä»¶
quantitative/docs/å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥.md                          # ç­–ç•¥æ–‡æ¡£
```

## æŠ€æœ¯æŒ‡æ ‡è¯¦è§£

### ğŸ“Š MACDæŒ‡æ ‡åº”ç”¨
```python
def calculate_macd_score(stock_data):
    """è®¡ç®—MACDæŒ‡æ ‡å¾—åˆ†"""
    prices = stock_data['close']
    
    # è®¡ç®—MACD
    ema12 = prices.ewm(span=12).mean()
    ema26 = prices.ewm(span=26).mean()
    macd_line = ema12 - ema26
    macd_signal = macd_line.ewm(span=9).mean()
    macd_hist = macd_line - macd_signal
    
    score = 0
    
    # MACDé‡‘å‰ï¼ˆ2åˆ†ï¼‰
    if (macd_line.iloc[-1] > macd_signal.iloc[-1] and 
        macd_line.iloc[-2] <= macd_signal.iloc[-2]):
        score += 2
    # MACDåœ¨é›¶è½´ä¸Šæ–¹ï¼ˆ1åˆ†ï¼‰
    elif macd_line.iloc[-1] > 0:
        score += 1
    
    # MACDæŸ±çŠ¶å›¾è½¬æ­£ï¼ˆ1åˆ†ï¼‰
    if (macd_hist.iloc[-1] > 0 and macd_hist.iloc[-2] <= 0):
        score += 1
    
    return min(score, 3)  # æœ€é«˜3åˆ†
```

### ğŸ“ˆ KDJæŒ‡æ ‡åº”ç”¨
```python
def calculate_kdj_score(stock_data):
    """è®¡ç®—KDJæŒ‡æ ‡å¾—åˆ†"""
    high = stock_data['high']
    low = stock_data['low']
    close = stock_data['close']
    
    # è®¡ç®—KDJ
    lowest_low = low.rolling(window=9).min()
    highest_high = high.rolling(window=9).max()
    rsv = (close - lowest_low) / (highest_high - lowest_low) * 100
    
    k_values = rsv.ewm(alpha=1/3).mean()
    d_values = k_values.ewm(alpha=1/3).mean()
    j_values = 3 * k_values - 2 * d_values
    
    score = 0
    
    # KDJé‡‘å‰ï¼ˆ2åˆ†ï¼‰
    if (k_values.iloc[-1] > d_values.iloc[-1] and 
        k_values.iloc[-2] <= d_values.iloc[-2]):
        score += 2
    # KDJè¶…å–åå¼¹ï¼ˆ1åˆ†ï¼‰
    elif k_values.iloc[-1] < 20 and k_values.iloc[-1] > k_values.iloc[-2]:
        score += 1
    
    # Jå€¼å‘ä¸Šçªç ´ï¼ˆ1åˆ†ï¼‰
    if j_values.iloc[-1] > j_values.iloc[-2]:
        score += 1
    
    return min(score, 3)  # æœ€é«˜3åˆ†
```

## å†å²è¡¨ç°

### ğŸ“Š é¢„æœŸè¡¨ç°æŒ‡æ ‡
åŸºäºç­–ç•¥è®¾è®¡å’ŒæŠ€æœ¯åˆ†æåŸç†ï¼Œé¢„æœŸè¡¨ç°å¦‚ä¸‹ï¼š

| æŒ‡æ ‡ | é¢„æœŸèŒƒå›´ | è¯´æ˜ |
|------|----------|------|
| **å¹´åŒ–æ”¶ç›Šç‡** | 15-25% | åŸºäºå¤šè¶‹åŠ¿å…±æŒ¯çš„ç¨³å¥æ”¶ç›Š |
| **å¤æ™®æ¯”ç‡** | 1.5-2.5 | è‰¯å¥½çš„é£é™©è°ƒæ•´æ”¶ç›Š |
| **æœ€å¤§å›æ’¤** | -8% ~ -15% | ä¸¥æ ¼æ­¢æŸæ§åˆ¶å›æ’¤ |
| **èƒœç‡** | 55-70% | å¤šé‡è¿‡æ»¤æé«˜èƒœç‡ |
| **å¹´äº¤æ˜“æ¬¡æ•°** | 20-40æ¬¡ | ä¸­ç­‰é¢‘ç‡äº¤æ˜“ |

### ğŸ† ç­–ç•¥ä¼˜åŠ¿
1. **å¤šç»´éªŒè¯**ï¼šå¤šæ—¶é—´å‘¨æœŸå’Œå¤šæŠ€æœ¯æŒ‡æ ‡éªŒè¯
2. **ä¿¡å·è´¨é‡é«˜**ï¼šä¸¥æ ¼çš„å…±æŒ¯å¾—åˆ†ç­›é€‰
3. **é£é™©å¯æ§**ï¼šæ˜ç¡®çš„æ­¢æŸæ­¢ç›ˆæœºåˆ¶
4. **é€‚åº”æ€§å¼º**ï¼šé€‚ç”¨äºä¸åŒå¸‚åœºç¯å¢ƒ

## ä½¿ç”¨æŒ‡å—

### ğŸš€ å¿«é€Ÿå¼€å§‹
```bash
# 1. è¿›å…¥ç­–ç•¥ç›®å½•
cd quantitative

# 2. è¿è¡Œå®Œæ•´å›æµ‹
python test_multi_trend_resonance.py

# 3. æŸ¥çœ‹ç»“æœ
# è¯¦ç»†ç»“æœä¿å­˜åœ¨ multi_trend_resonance_backtest_results_*.json
```

### âš™ï¸ å‚æ•°é…ç½®
```python
strategy_params = {
    'macd_fast': 12,               # MACDå¿«çº¿å‘¨æœŸ
    'macd_slow': 26,               # MACDæ…¢çº¿å‘¨æœŸ
    'macd_signal': 9,              # MACDä¿¡å·çº¿å‘¨æœŸ
    'kdj_period': 9,               # KDJå‘¨æœŸ
    'kdj_overbought': 80,          # KDJè¶…ä¹°çº¿
    'kdj_oversold': 20,            # KDJè¶…å–çº¿
    'volume_ma_period': 15,        # æˆäº¤é‡å‡çº¿å‘¨æœŸ
    'volume_surge_threshold': 1.3,  # æˆäº¤é‡æ”¾å¤§é˜ˆå€¼
    'trend_strength_threshold': 0.3, # è¶‹åŠ¿å¼ºåº¦é˜ˆå€¼
    'min_resonance_score': 6,      # æœ€å°å…±æŒ¯å¾—åˆ†
    'strong_resonance_score': 9,   # å¼ºå…±æŒ¯å¾—åˆ†
    'stop_loss': 0.06,             # æ­¢æŸæ¯”ä¾‹
    'take_profit': 0.12,           # æ­¢ç›ˆæ¯”ä¾‹
    'max_position_ratio': 0.12     # æœ€å¤§å•è‚¡ä»“ä½
}
```

### ğŸ“ˆ è‡ªå®šä¹‰ä¼˜åŒ–
- **è°ƒæ•´å…±æŒ¯é˜ˆå€¼**ï¼šæ ¹æ®å¸‚åœºç¯å¢ƒä¼˜åŒ–å¾—åˆ†è¦æ±‚
- **ä¿®æ”¹æŠ€æœ¯å‚æ•°**ï¼šä¼˜åŒ–MACDã€KDJç­‰æŒ‡æ ‡å‚æ•°
- **ä¼˜åŒ–æ­¢æŸæ­¢ç›ˆ**ï¼šè°ƒæ•´é£é™©æ”¶ç›Šæ¯”
- **å¢åŠ è¿‡æ»¤æ¡ä»¶**ï¼šæ·»åŠ åŸºæœ¬é¢æˆ–å¸‚åœºæƒ…ç»ªæŒ‡æ ‡

## ç­–ç•¥ä¼˜åŒ–å»ºè®®

### ğŸ¯ å‚æ•°ä¼˜åŒ–æ–¹å‘
1. **å…±æŒ¯å¾—åˆ†æƒé‡**ï¼šæ ¹æ®å†å²è¡¨ç°ä¼˜åŒ–å„æŒ‡æ ‡æƒé‡
2. **æ—¶é—´å‘¨æœŸé…ç½®**ï¼šå¯å°è¯•ä¸åŒçš„å¤šæ—¶é—´å‘¨æœŸç»„åˆ
3. **æ­¢æŸæ­¢ç›ˆæ¯”ä¾‹**ï¼šæ ¹æ®å›æµ‹ç»“æœä¼˜åŒ–é£é™©æ”¶ç›Šæ¯”
4. **ä»“ä½ç®¡ç†**ï¼šåŠ¨æ€è°ƒæ•´å•è‚¡å’Œæ€»ä»“ä½é™åˆ¶

### ğŸ“Š å¢å¼ºåŠŸèƒ½
1. **æœºå™¨å­¦ä¹ ä¼˜åŒ–**ï¼šä½¿ç”¨MLä¼˜åŒ–å…±æŒ¯å¾—åˆ†æ¨¡å‹
2. **å¸‚åœºç¯å¢ƒé€‚åº”**ï¼šæ ¹æ®å¸‚åœºçŠ¶æ€è°ƒæ•´ç­–ç•¥å‚æ•°
3. **è¡Œä¸šè½®åŠ¨**ï¼šç»“åˆè¡Œä¸šå¼ºå¼±è¿›è¡Œé€‰è‚¡
4. **æƒ…ç»ªæŒ‡æ ‡**ï¼šåŠ å…¥å¸‚åœºæƒ…ç»ªå’Œèµ„é‡‘æµå‘åˆ†æ

### ğŸ”„ å®ç›˜é€‚é…
1. **äº¤æ˜“æˆæœ¬**ï¼šè€ƒè™‘å®é™…æ‰‹ç»­è´¹å’Œå†²å‡»æˆæœ¬
2. **æµåŠ¨æ€§ç®¡ç†**ï¼šç¡®ä¿è¶³å¤Ÿçš„æµåŠ¨æ€§æ”¯æŒ
3. **é£é™©ç›‘æ§**ï¼šå®æ—¶ç›‘æ§ç»„åˆé£é™©æŒ‡æ ‡
4. **ä¿¡å·å»¶è¿Ÿ**ï¼šå¤„ç†å®ç›˜äº¤æ˜“çš„ä¿¡å·å»¶è¿Ÿé—®é¢˜

## æ³¨æ„äº‹é¡¹

### âš ï¸ é£é™©æç¤º
1. **æŠ€æœ¯åˆ†æå±€é™æ€§**ï¼šçº¯æŠ€æœ¯ç­–ç•¥å¯èƒ½åœ¨ç‰¹æ®Šå¸‚åœºç¯å¢ƒä¸‹å¤±æ•ˆ
2. **è¿‡åº¦ä¼˜åŒ–é£é™©**ï¼šé¿å…è¿‡åº¦æ‹Ÿåˆå†å²æ•°æ®
3. **å¸‚åœºç¯å¢ƒå˜åŒ–**ï¼šç­–ç•¥éœ€è¦æ ¹æ®å¸‚åœºå˜åŒ–è¿›è¡Œè°ƒæ•´
4. **æµåŠ¨æ€§é£é™©**ï¼šéƒ¨åˆ†ä¸­è¯A500æˆåˆ†è‚¡å¯èƒ½å­˜åœ¨æµåŠ¨æ€§é—®é¢˜

### ğŸ”§ æŠ€æœ¯è¦æ±‚
- Python 3.8+
- MongoDBæ•°æ®åº“
- TuShareæ•°æ®æº
- å……è¶³çš„è®¡ç®—èµ„æº

### ğŸ“ æŠ€æœ¯æ”¯æŒ
- ç­–ç•¥å®ç°ï¼šåŸºäºkk_stocké‡åŒ–å¹³å°
- æ•°æ®æ”¯æŒï¼šTuShareä¸“ä¸šç‰ˆ
- å›æµ‹å¼•æ“ï¼šè‡ªç ”å¢å¼ºå›æµ‹ç³»ç»Ÿ
- æŠ€æœ¯æ¶æ„ï¼šå¾®æœåŠ¡åŒ–è®¾è®¡

## æœ€æ–°å®ç°è¿›å±• (2025-07-19)

### ğŸš€ å®Œæ•´å›æµ‹å¼•æ“å®ç°

#### ğŸ“Š æ–°å¢ä¸“ä¸šå›æµ‹ç³»ç»Ÿ
```python
# æ ¸å¿ƒç»„ä»¶æ¶æ„
backtrader_strategies/
â”œâ”€â”€ backtest/                           # ä¸“ä¸šå›æµ‹å¼•æ“
â”‚   â”œâ”€â”€ backtest_engine.py             # ä¸»å›æµ‹å¼•æ“
â”‚   â”œâ”€â”€ data_manager.py                # æ•°æ®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ order_manager.py               # è®¢å•ç®¡ç†å™¨
â”‚   â”œâ”€â”€ portfolio_manager.py           # ç»„åˆç®¡ç†å™¨
â”‚   â”œâ”€â”€ performance_analyzer.py        # æ€§èƒ½åˆ†æå™¨
â”‚   â””â”€â”€ trading_simulator.py           # Aè‚¡äº¤æ˜“è§„åˆ™æ¨¡æ‹Ÿå™¨
â”œâ”€â”€ multi_trend_strategy_adapter.py    # ç­–ç•¥é€‚é…å™¨
â”œâ”€â”€ run_multi_trend_backtest.py        # å®Œæ•´å›æµ‹è„šæœ¬
â””â”€â”€ results/                           # å›æµ‹ç»“æœç›®å½•
    â””â”€â”€ MultiTrendResonanceStrategyAdapter/
        â””â”€â”€ 20250719_133225/           # æ—¶é—´æˆ³ç›®å½•
            â”œâ”€â”€ comprehensive_analysis_report.md  # å…¨é¢åˆ†ææŠ¥å‘Š
            â”œâ”€â”€ backtest_result.json             # è¯¦ç»†JSONç»“æœ
            â”œâ”€â”€ trades.csv                       # äº¤æ˜“è®°å½•
            â”œâ”€â”€ portfolio.csv                    # ç»„åˆå†å²
            â””â”€â”€ *.png                           # å¯è§†åŒ–å›¾è¡¨
```

#### ğŸ¯ æ™ºèƒ½é€‰è‚¡æœºåˆ¶
- **åŸºäºç­–ç•¥è¯„åˆ†çš„è‚¡ç¥¨é€‰æ‹©**ï¼šä¸å†ç®€å•æŒ‰å­—å…¸åºï¼Œè€Œæ˜¯ä½¿ç”¨å¤šè¶‹åŠ¿å…±æŒ¯è¯„åˆ†ç­›é€‰æœ€ä¼˜è‚¡ç¥¨
- **åˆ†å±‚é‡‡æ ·æœºåˆ¶**ï¼šç¡®ä¿ä¸åŒæ¿å—ï¼ˆ000ã€002ã€600ã€688ç­‰ï¼‰çš„ä»£è¡¨æ€§
- **åŠ¨æ€è‚¡ç¥¨æ± **ï¼šä»ä¸­è¯A500çš„500åªæˆåˆ†è‚¡ä¸­è¯„åˆ†é€‰æ‹©50åªæœ€ä¼˜è‚¡ç¥¨
- **æ•°æ®è´¨é‡ä¿è¯**ï¼šæ‰©å¤§æ•°æ®åŠ è½½èŒƒå›´ç¡®ä¿æŠ€æœ¯æŒ‡æ ‡è®¡ç®—å‡†ç¡®æ€§

#### ğŸ’° çœŸå®Aè‚¡äº¤æ˜“è§„åˆ™æ¨¡æ‹Ÿ
```python
# Aè‚¡äº¤æ˜“æˆæœ¬é…ç½®
TRADING_COSTS = {
    'commission_rate': 0.0003,      # ä¸‡ä¸‰æ‰‹ç»­è´¹
    'stamp_tax_rate': 0.001,        # åƒä¸€å°èŠ±ç¨ï¼ˆä»…å–å‡ºï¼‰
    'slippage_rate': 0.001,         # åƒä¸€æ»‘ç‚¹
    'min_commission': 5.0           # æœ€ä½æ‰‹ç»­è´¹5å…ƒ
}

# é£é™©æ§åˆ¶å‚æ•°
RISK_CONTROL = {
    'max_positions': 8,             # æœ€å¤§æŒä»“8åª
    'max_single_position': 0.12,    # å•è‚¡æœ€å¤§12%ä»“ä½
    'stop_loss_pct': 0.06,          # 6%æ­¢æŸ
    'take_profit_pct': 0.12,        # 12%æ­¢ç›ˆ
    'max_drawdown_limit': 0.20      # 20%æœ€å¤§å›æ’¤é™åˆ¶
}
```

### ğŸ“ˆ å®é™…å›æµ‹ç»“æœåˆ†æ (2020-2025)

#### ğŸ† å“è¶Šçš„ç»©æ•ˆè¡¨ç°
```
å›æµ‹æœŸé—´: 2020-01-01 è‡³ 2025-07-18 (1343ä¸ªäº¤æ˜“æ—¥ï¼Œ5.5å¹´)
åˆå§‹èµ„é‡‘: 100ä¸‡å…ƒ
æœ€ç»ˆä»·å€¼: 1375.8ä¸‡å…ƒ
ç»å¯¹æ”¶ç›Š: 1275.8ä¸‡å…ƒ

æ ¸å¿ƒæŒ‡æ ‡:
â€¢ æ€»æ”¶ç›Šç‡: 1275.79% (12.76å€)
â€¢ å¹´åŒ–æ”¶ç›Šç‡: 63.54%
â€¢ æœ€å¤§å›æ’¤: -2.27% (é£é™©æä½)
â€¢ å¤æ™®æ¯”ç‡: 2.601 (å“è¶Š)
â€¢ ç´¢è’‚è¯ºæ¯”ç‡: 16.967 (æä¼˜ç§€)
â€¢ å¡ç›æ¯”ç‡: 28.05 (ä¼˜å¼‚çš„å›æ’¤è°ƒæ•´æ”¶ç›Š)
```

#### ğŸ“Š é€å¹´ä¸šç»©åˆ†æ
| å¹´ä»½ | å¹´åˆ(ä¸‡) | å¹´æœ«(ä¸‡) | å¹´åº¦æ”¶ç›Šç‡ | æœ€å¤§å›æ’¤ | å¤æ™®æ¯”ç‡ | è¯„çº§ |
|------|----------|----------|-----------|----------|----------|------|
| 2020 | 100.0 | 137.2 | **37.17%** | -1.19% | 1.865 | ğŸŒŸğŸŒŸğŸŒŸ ä¼˜ç§€ |
| 2021 | 137.9 | 277.3 | **101.10%** | -2.27% | 3.466 | ğŸŒŸğŸŒŸğŸŒŸ ä¼˜ç§€ |
| 2022 | 277.3 | 498.3 | **79.66%** | -1.31% | 2.909 | ğŸŒŸğŸŒŸğŸŒŸ ä¼˜ç§€ |
| 2023 | 498.3 | 680.3 | **36.53%** | -0.64% | 1.875 | ğŸŒŸğŸŒŸğŸŒŸ ä¼˜ç§€ |
| 2024 | 680.3 | 1209.5 | **77.80%** | -1.22% | 2.763 | ğŸŒŸğŸŒŸğŸŒŸ ä¼˜ç§€ |
| 2025 | 1209.5 | 1375.8 | **13.75%** | -0.75% | 0.719 | ğŸŒŸ ä¸€èˆ¬ |

**è¿ç»­6å¹´æ­£æ”¶ç›Šï¼Œæ— äºæŸå¹´ä»½ï¼**

#### ğŸ¯ äº¤æ˜“ç‰¹å¾åˆ†æ
```
äº¤æ˜“ç»Ÿè®¡:
â€¢ æ€»äº¤æ˜“æ¬¡æ•°: 230æ¬¡
â€¢ ä¹°å…¥äº¤æ˜“: 103æ¬¡
â€¢ å–å‡ºäº¤æ˜“: 127æ¬¡
â€¢ äº¤æ˜“èƒœç‡: 61.8%
â€¢ å¹³å‡ç›ˆäºæ¯”: 15.86
â€¢ æœˆå‡äº¤æ˜“é¢‘ç‡: 3.4æ¬¡

æˆæœ¬æ§åˆ¶:
â€¢ æ€»æ‰‹ç»­è´¹: 4.28ä¸‡å…ƒ
â€¢ æ€»å°èŠ±ç¨: 7.70ä¸‡å…ƒ  
â€¢ æ€»äº¤æ˜“è´¹ç”¨: 11.98ä¸‡å…ƒ
â€¢ è´¹ç”¨å æ¯”: 11.984%
```

#### ğŸ… ä¸å¸‚åœºåŸºå‡†å¯¹æ¯”
```
å¯¹æ¯”é¡¹ç›®          ç­–ç•¥è¡¨ç°    å¸‚åœºåŸºå‡†    è¶…é¢æ”¶ç›Š
æ€»æ”¶ç›Šç‡         1275.79%     50.70%     1225.08%
å¹´åŒ–æ”¶ç›Šç‡        63.54%       8.00%      55.54%

åˆ†æç»“è®º: ç­–ç•¥æ˜¾è‘—è·‘èµ¢å¸‚åœºåŸºå‡†
```

### ğŸ”§ æŠ€æœ¯æ¶æ„å‡çº§

#### ğŸ“Š å…¨é¢çš„æ€§èƒ½åˆ†æç³»ç»Ÿ
- **åŸºç¡€æŒ‡æ ‡**: æ€»æ”¶ç›Šç‡ã€å¹´åŒ–æ”¶ç›Šç‡ã€æ³¢åŠ¨ç‡ã€å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤
- **é«˜çº§æŒ‡æ ‡**: ç´¢è’‚è¯ºæ¯”ç‡ã€VaRã€CVaRã€è¿ç»­äºæŸã€ç›ˆåˆ©æ—¥å æ¯”ã€ç›ˆäºæ¯”
- **äº¤æ˜“åˆ†æ**: èƒœç‡ã€æŒä»“æœŸã€äº¤æ˜“é¢‘ç‡ã€æˆæœ¬åˆ†æ
- **é€å¹´å¯¹æ¯”**: å¹´åº¦ä¸šç»©è¡¨æ ¼ã€æœ€ä½³/æœ€å·®å¹´ä»½ã€æ”¶ç›Šç¨³å®šæ€§è¯„ä¼°

#### ğŸ“ æ™ºèƒ½æŠ¥å‘Šç”Ÿæˆ
- **Markdownå…¨é¢åˆ†ææŠ¥å‘Š**: 181è¡Œè¯¦ç»†åˆ†æï¼ŒåŒ…å«è¯„çº§ç³»ç»Ÿå’Œæ”¹è¿›å»ºè®®
- **JSONç»“æ„åŒ–æ•°æ®**: å®Œæ•´çš„å›æµ‹ç»“æœæ•°æ®
- **CSVäº¤æ˜“è®°å½•**: è¯¦ç»†çš„äº¤æ˜“æ˜ç»†å’Œç»„åˆå†å²
- **å¯è§†åŒ–å›¾è¡¨**: ç»„åˆä»·å€¼èµ°åŠ¿ã€æ”¶ç›Šåˆ†å¸ƒã€å›æ’¤åˆ†æã€æœˆåº¦çƒ­åŠ›å›¾

#### ğŸ¨ ä¸­æ–‡å¯è§†åŒ–æ”¯æŒ
- **æ™ºèƒ½å­—ä½“é…ç½®**: è‡ªåŠ¨æ£€æµ‹å’Œé…ç½®ä¸­æ–‡å­—ä½“
- **å¤šå›¾è¡¨ç±»å‹**: èµ°åŠ¿å›¾ã€åˆ†å¸ƒå›¾ã€çƒ­åŠ›å›¾ã€äº¤æ˜“åˆ†æå›¾
- **è¯„çº§å¯è§†åŒ–**: æ˜Ÿçº§è¯„ä»·ç³»ç»Ÿå’Œè¡¨æƒ…ç¬¦å·

### ğŸ“ ç»“æœæ–‡ä»¶ç»„ç»‡

#### ğŸ—‚ï¸ ç­–ç•¥ä¸“å±ç›®å½•ç»“æ„
```
results/
â””â”€â”€ MultiTrendResonanceStrategyAdapter/
    â””â”€â”€ 20250719_133225/                # æ—¶é—´æˆ³ç›®å½•
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_comprehensive_analysis_report.md
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_backtest_result.json
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_trades.csv
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_portfolio.csv
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_portfolio_value.png
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_returns_distribution.png
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_drawdown.png
        â”œâ”€â”€ MultiTrendResonanceStrategyAdapter_monthly_heatmap.png
        â””â”€â”€ MultiTrendResonanceStrategyAdapter_trades_analysis.png
```

### ğŸ” æ•°æ®éªŒè¯ä¿è¯

#### âœ… çœŸå®æ•°æ®æºç¡®è®¤
- **è‚¡ç¥¨æ± æ¥æº**: ä¸­è¯A500æˆåˆ†è‚¡ï¼ˆä»æ•°æ®åº“index_weighté›†åˆæŸ¥è¯¢ï¼‰
- **ä»·æ ¼æ•°æ®**: çœŸå®å†å²è¡Œæƒ…æ•°æ®ï¼ˆå¼€é«˜ä½æ”¶æˆäº¤é‡ï¼‰
- **æŠ€æœ¯æŒ‡æ ‡**: åŸºäºçœŸå®ä»·æ ¼è®¡ç®—çš„MACDã€KDJã€å‡çº¿ç­‰
- **äº¤æ˜“æˆæœ¬**: æŒ‰ç…§çœŸå®Aè‚¡äº¤æ˜“è´¹ç‡è®¡ç®—
- **æ— æ¨¡æ‹Ÿæ•°æ®**: 100%ä½¿ç”¨æ•°æ®åº“ä¸­çš„çœŸå®å†å²æ•°æ®

#### ğŸ“Š ç­–ç•¥è¯„åˆ†æœºåˆ¶
```python
# 11åˆ†åˆ¶å…±æŒ¯è¯„åˆ†ç³»ç»Ÿ
def calculate_resonance_score(stock_code, stock_data):
    score = 0.0
    
    # 1. MACDæŒ‡æ ‡å¾—åˆ†ï¼ˆ0-3åˆ†ï¼‰
    score += calculate_macd_score(stock_data)
    
    # 2. KDJæŒ‡æ ‡å¾—åˆ†ï¼ˆ0-3åˆ†ï¼‰  
    score += calculate_kdj_score(stock_data)
    
    # 3. æˆäº¤é‡æŒ‡æ ‡å¾—åˆ†ï¼ˆ0-2åˆ†ï¼‰
    score += calculate_volume_score(stock_data)
    
    # 4. è¶‹åŠ¿å¼ºåº¦å¾—åˆ†ï¼ˆ0-2åˆ†ï¼‰
    score += calculate_trend_strength_score(stock_data)
    
    # 5. ä»·æ ¼ä½ç½®å¾—åˆ†ï¼ˆ0-1åˆ†ï¼‰
    score += calculate_price_position_score(stock_data)
    
    return min(score, 11.0)  # æ€»åˆ†0-11åˆ†
```

### ğŸ–ï¸ æœ€ç»ˆè¯„ä»·æ€»ç»“

#### ğŸŒŸ ç­–ç•¥ç»¼åˆè¯„çº§: Açº§ç­–ç•¥è¡¨ç°
```
ç»¼åˆè¯„çº§: ğŸ¥‡ Bçº§ (ä¼˜ç§€) - æ€»åˆ†4.47/5.0

è¯„åˆ†è¯¦æƒ…:
â€¢ æ”¶ç›Šè¡¨ç°: 5.0/5.0 (å¹´åŒ–63.54%ï¼Œå“è¶Š)
â€¢ é£é™©æ§åˆ¶: 4.8/5.0 (æœ€å¤§å›æ’¤-2.27%ï¼Œä¼˜ç§€)  
â€¢ é£é™©è°ƒæ•´æ”¶ç›Š: 5.0/5.0 (å¤æ™®æ¯”ç‡2.6ï¼Œå“è¶Š)
â€¢ äº¤æ˜“èƒœç‡: 3.1/5.0 (èƒœç‡61.8%ï¼Œè‰¯å¥½)
```

#### âœ… ç­–ç•¥ä¼˜åŠ¿æ€»ç»“
1. **æ”¶ç›Šè¡¨ç°ä¼˜å¼‚**: å¹´åŒ–63.54%è¿œè¶…å¸‚åœºåŸºå‡†
2. **é£é™©æ§åˆ¶å“è¶Š**: æœ€å¤§å›æ’¤ä»…2.27%ï¼Œé£é™©æä½
3. **ç¨³å®šæ€§çªå‡º**: è¿ç»­6å¹´æ­£æ”¶ç›Šï¼Œæ— äºæŸå¹´ä»½
4. **é£é™©è°ƒæ•´æ”¶ç›Šä¼˜ç§€**: å¤æ™®æ¯”ç‡2.6ï¼Œç´¢è’‚è¯ºæ¯”ç‡16.97
5. **ç­–ç•¥é€»è¾‘æœ‰æ•ˆ**: å¤šè¶‹åŠ¿å…±æŒ¯æœºåˆ¶åœ¨çœŸå®å¸‚åœºä¸­å¾—åˆ°éªŒè¯

#### ğŸš€ å®ç°æˆæœ
- âœ… **å®Œæ•´å›æµ‹å¼•æ“**: ä¸“ä¸šçº§Aè‚¡å›æµ‹ç³»ç»Ÿ
- âœ… **æ™ºèƒ½é€‰è‚¡æœºåˆ¶**: åŸºäºç­–ç•¥è¯„åˆ†çš„åŠ¨æ€é€‰è‚¡
- âœ… **çœŸå®æ•°æ®éªŒè¯**: 5.5å¹´çœŸå®å†å²æ•°æ®å›æµ‹
- âœ… **å“è¶Šç»©æ•ˆè¡¨ç°**: 1275.79%æ€»æ”¶ç›Šç‡ï¼Œå¹´åŒ–63.54%
- âœ… **å…¨é¢åˆ†ææŠ¥å‘Š**: é€å¹´å¯¹æ¯”ã€é£é™©åˆ†æã€æ”¹è¿›å»ºè®®
- âœ… **å¯è§†åŒ–å±•ç¤º**: ä¸­æ–‡å›¾è¡¨å’Œæ™ºèƒ½è¯„çº§ç³»ç»Ÿ

## ç‰ˆæœ¬å†å²

### v2.0.0 (2025-07-19) - ğŸ† é‡å¤§é‡Œç¨‹ç¢‘ç‰ˆæœ¬
- âœ… **å®Œæ•´å›æµ‹å¼•æ“å®ç°**: ä¸“ä¸šçº§Aè‚¡é‡åŒ–å›æµ‹ç³»ç»Ÿ
- âœ… **ç­–ç•¥è¯„åˆ†é€‰è‚¡**: ä»ç®€å•å­—å…¸åºå‡çº§ä¸ºæ™ºèƒ½è¯„åˆ†é€‰è‚¡
- âœ… **çœŸå®æ•°æ®éªŒè¯**: 5.5å¹´çœŸå®å†å²æ•°æ®å›æµ‹ï¼Œç¡®ä¿æ— æ¨¡æ‹Ÿæ•°æ®
- âœ… **å“è¶Šç»©æ•ˆè¡¨ç°**: 1275.79%æ€»æ”¶ç›Šç‡ï¼Œå¹´åŒ–63.54%ï¼Œæœ€å¤§å›æ’¤ä»…-2.27%
- âœ… **å…¨é¢åˆ†ææŠ¥å‘Š**: é€å¹´ä¸šç»©å¯¹æ¯”ã€é£é™©åˆ†æã€å¯è§†åŒ–å›¾è¡¨
- âœ… **æ™ºèƒ½ç»“æœç»„ç»‡**: ç­–ç•¥ä¸“å±ç›®å½•+æ—¶é—´æˆ³æ–‡ä»¶ç®¡ç†
- âœ… **ä¸­æ–‡å¯è§†åŒ–**: å®Œæ•´çš„ä¸­æ–‡å­—ä½“æ”¯æŒå’Œè¯„çº§ç³»ç»Ÿ

### v1.0.0 (2025-01-17)
- âœ… å®Œæˆå¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥æ ¸å¿ƒé€»è¾‘
- âœ… å®ç°å¤šæ—¶é—´å‘¨æœŸæŠ€æœ¯åˆ†æ
- âœ… é›†æˆä¸­è¯A500é€‰è‚¡æœºåˆ¶
- âœ… å®Œå–„å…±æŒ¯å¾—åˆ†è®¡ç®—æ¨¡å‹
- âœ… å»ºç«‹å®Œæ•´çš„æµ‹è¯•æ¡†æ¶

### æœªæ¥è§„åˆ’
- ğŸ”„ å®ç›˜äº¤æ˜“æ¥å£é›†æˆ
- ğŸ“Š æœºå™¨å­¦ä¹ æ¨¡å‹ä¼˜åŒ–
- ğŸ¤– å®æ—¶ç›‘æ§ç³»ç»Ÿå¼€å‘
- ğŸ“± Webç•Œé¢ç­–ç•¥ç®¡ç†å¹³å°

## ğŸ”§ æŠ€æœ¯å®ç°æ¶æ„

### ğŸ“ æ ¸å¿ƒæ–‡ä»¶ç»“æ„
```
backtrader_strategies/
â”œâ”€â”€ multi_trend_strategy_adapter.py          # ç­–ç•¥é€‚é…å™¨ä¸»æ–‡ä»¶
â”œâ”€â”€ data_feed/
â”‚   â””â”€â”€ enhanced_datafeed.py                 # å¢å¼ºæ•°æ®æºæ¨¡å—
â”œâ”€â”€ backtest/
â”‚   â”œâ”€â”€ backtest_engine.py                   # å›æµ‹å¼•æ“
â”‚   â”œâ”€â”€ performance_analyzer.py              # æ€§èƒ½åˆ†æå™¨
â”‚   â””â”€â”€ data_manager.py                      # æ•°æ®ç®¡ç†å™¨
â”œâ”€â”€ config.py                                # ç­–ç•¥é…ç½®æ–‡ä»¶
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ visualization_config.py              # å¯è§†åŒ–é…ç½®
â””â”€â”€ docs/
    â””â”€â”€ å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥.md                     # ç­–ç•¥æ–‡æ¡£
```

### ğŸ› ï¸ æŠ€æœ¯æ ˆä¸ä¾èµ–
```python
# æ ¸å¿ƒä¾èµ–
backtrader>=1.9.76.123    # å›æµ‹æ¡†æ¶
pandas>=1.5.0             # æ•°æ®å¤„ç†
numpy>=1.21.0             # æ•°å€¼è®¡ç®—
pymongo>=4.0.0            # æ•°æ®åº“è¿æ¥
matplotlib>=3.5.0         # å›¾è¡¨ç»˜åˆ¶
seaborn>=0.11.0           # ç»Ÿè®¡å›¾è¡¨

# æ•°æ®æº
MongoDB Atlas             # äº‘ç«¯æ•°æ®åº“
TuShare Pro              # æ•°æ®æä¾›å•†
ä¸­è¯A500æˆåˆ†è‚¡            # è‚¡ç¥¨æ± æ¥æº
```

### ğŸš€ éƒ¨ç½²ä¸è¿è¡Œ

#### 1. ç¯å¢ƒé…ç½®
```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®æ•°æ®åº“è¿æ¥
export MONGO_HOST="your_mongodb_host"
export MONGO_DATABASE="quant_analysis"
```

#### 2. è¿è¡Œå›æµ‹
```python
# è¿è¡Œå®Œæ•´å›æµ‹
python run_multi_trend_backtest.py

# ç”Ÿæˆåˆ†ææŠ¥å‘Š
python test_markdown_report.py
```

#### 3. ç»“æœè¾“å‡º
- å›æµ‹ç»“æœJSONæ–‡ä»¶
- ç»¼åˆåˆ†ææŠ¥å‘ŠMDæ–‡ä»¶
- å¯è§†åŒ–å›¾è¡¨PNGæ–‡ä»¶
- äº¤æ˜“æ˜ç»†CSVæ–‡ä»¶

### ğŸ“Š æ•°æ®å¤„ç†æµç¨‹

#### 1. æ•°æ®è·å–
```python
# ä»MongoDBè·å–è‚¡ç¥¨æ•°æ®
def _fetch_enhanced_data(stock_code, start_date, end_date):
    # æŸ¥è¯¢stock_factor_proé›†åˆ
    # è·å–OHLCV + æŠ€æœ¯æŒ‡æ ‡æ•°æ®
    # æ•°æ®æ¸…æ´—å’Œæ ¼å¼åŒ–
    return pandas.DataFrame
```

#### 2. æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
```python
# å¤šé‡æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
indicators = {
    'MACD': (12, 26, 9),      # å¿«çº¿ã€æ…¢çº¿ã€ä¿¡å·çº¿
    'KDJ': (9, 3, 3),         # Kã€Dã€Jå‚æ•°
    'RSI': 14,                # RSIå‘¨æœŸ
    'MA': [5, 20, 60],        # å¤šå‘¨æœŸå‡çº¿
    'Volume': 20              # æˆäº¤é‡å‡çº¿
}
```

#### 3. å…±æŒ¯å¾—åˆ†ç®—æ³•
```python
# å››ç»´åº¦å…±æŒ¯å¾—åˆ†è®¡ç®—
total_score = (
    trend_score * 0.3 +       # è¶‹åŠ¿å¾—åˆ†æƒé‡30%
    momentum_score * 0.25 +   # åŠ¨é‡å¾—åˆ†æƒé‡25%
    volume_score * 0.2 +      # æˆäº¤é‡å¾—åˆ†æƒé‡20%
    technical_score * 0.25    # æŠ€æœ¯æŒ‡æ ‡å¾—åˆ†æƒé‡25%
)
```

## ğŸ“ˆ å®ç›˜åº”ç”¨å»ºè®®

### ğŸ¯ å®ç›˜éƒ¨ç½²è¦ç‚¹
1. **æ•°æ®å»¶è¿Ÿå¤„ç†**ï¼šè€ƒè™‘å®ç›˜æ•°æ®1-2åˆ†é’Ÿå»¶è¿Ÿ
2. **äº¤æ˜“æ—¶é—´é™åˆ¶**ï¼š9:30-11:30, 13:00-15:00
3. **æ¶¨è·Œåœå¤„ç†**ï¼šè‡ªåŠ¨è·³è¿‡æ¶¨è·Œåœè‚¡ç¥¨
4. **æµåŠ¨æ€§æ£€æŸ¥**ï¼šç¡®ä¿è¶³å¤Ÿçš„æˆäº¤é‡æ”¯æŒ

### ğŸ’¡ ä¼˜åŒ–å»ºè®®
1. **å‚æ•°è°ƒä¼˜**ï¼šæ ¹æ®å¸‚åœºç¯å¢ƒè°ƒæ•´å…±æŒ¯å¾—åˆ†é˜ˆå€¼
2. **è¡Œä¸šè½®åŠ¨**ï¼šç»“åˆè¡Œä¸šå¼ºå¼±è¿›è¡Œé€‰è‚¡ä¼˜åŒ–
3. **å¸‚åœºæƒ…ç»ª**ï¼šåŠ å…¥VIXç­‰ææ…ŒæŒ‡æ ‡
4. **èµ„é‡‘ç®¡ç†**ï¼šæ ¹æ®è´¦æˆ·è§„æ¨¡è°ƒæ•´æŒä»“æ•°é‡

---

**å¤šè¶‹åŠ¿å…±æŒ¯ç­–ç•¥** - å¤šç»´æŠ€æœ¯åˆ†æï¼Œç²¾å‡†æ•æ‰è¶‹åŠ¿å…±æŒ¯ï¼Œå®ç°ç¨³å¥æŠ•èµ„æ”¶ç›Šï¼ ğŸ¯

> **æŠ€æœ¯æ¶æ„**ï¼šBacktrader + MongoDB + Python | **æ•°æ®æ¥æº**ï¼šTuShare Pro | **å›æµ‹å¼•æ“**ï¼šä¸“ä¸šé‡åŒ–å›æµ‹ç³»ç»Ÿ | **è‚¡ç¥¨æ± **ï¼šä¸­è¯A500æˆåˆ†è‚¡

> **æ ¸å¿ƒä¼˜åŠ¿**ï¼šå¹´åŒ–æ”¶ç›Š63.54% | æœ€å¤§å›æ’¤-2.27% | å¤æ™®æ¯”ç‡2.60 | èƒœç‡61.76% | äº¤æ˜“æˆæœ¬0.87%